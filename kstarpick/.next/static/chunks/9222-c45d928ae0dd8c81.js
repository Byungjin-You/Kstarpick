"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9222],{2575:function(e,t,a){a.r(t);var s=a(85893),l=a(67294),r=a(41664),n=a.n(r),i=a(11163),d=a(33299),c=a(43765),o=a(38361),m=a(2553),u=a(63594),x=a(2287),h=a(89176),p=a(55264),g=a(70095),b=a(77362),f=a(94086),y=a(70088),j=a(70775);t.default=e=>{let{children:t}=e,a=(0,i.useRouter)(),{data:r,status:N}=(0,d.useSession)(),[v,w]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{("unauthenticated"===N||r&&"admin"!==r.user.role)&&a.push("/admin/login")},[r,N,a]),"loading"===N)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,s.jsx)("div",{className:"p-8 bg-white rounded-lg shadow-md",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-t-[#ff3e8e] rounded-full animate-spin"}),(0,s.jsx)("p",{className:"text-xl font-medium",children:"Loading admin panel..."})]})})}):"unauthenticated"===N||r&&"admin"!==r.user.role?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,s.jsx)("div",{className:"p-8 bg-white rounded-lg shadow-md max-w-md",children:(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4 text-center",children:[(0,s.jsx)(c.default,{size:48,className:"text-red-500"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Unauthorized Access"}),(0,s.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access the admin area."}),(0,s.jsx)(n(),{href:"/",className:"px-4 py-2 mt-4 text-white bg-[#ff3e8e] rounded-md hover:bg-[#e02e7c]",children:"Go to Homepage"})]})})}):(o.default,m.default,u.default,x.default,h.default,p.default,(0,s.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("div",{className:"w-64 min-h-screen bg-white shadow-md",children:[(0,s.jsx)("div",{className:"p-4 border-b",children:(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"관리자 패널"})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("ul",{className:"space-y-2",children:[(0,s.jsx)("li",{children:(0,s.jsxs)(n(),{href:"/admin",className:"flex items-center px-4 py-2 rounded-lg ".concat("/admin"===a.pathname?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"),children:[(0,s.jsx)(o.default,{className:"mr-3 h-5 w-5"}),"대시보드"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)(n(),{href:"/admin/content",className:"flex items-center px-4 py-2 rounded-lg ".concat(a.pathname.startsWith("/admin/content")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"),children:[(0,s.jsx)(g.default,{className:"mr-3 h-5 w-5"}),"콘텐츠 관리"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)(n(),{href:"/admin/news",className:"flex items-center px-4 py-2 rounded-lg ".concat(a.pathname.startsWith("/admin/news")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"),children:[(0,s.jsx)(b.default,{className:"mr-3 h-5 w-5"}),"뉴스 관리"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)(n(),{href:"/admin/drama",className:"flex items-center px-4 py-2 rounded-lg ".concat(a.pathname.startsWith("/admin/drama")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"),children:[(0,s.jsx)(f.default,{className:"mr-3 h-5 w-5"}),"드라마 관리"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)(n(),{href:"/admin/music",className:"flex items-center px-4 py-2 rounded-lg ".concat(a.pathname.startsWith("/admin/music")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"),children:[(0,s.jsx)(x.default,{className:"mr-3 h-5 w-5"}),"음악 차트 관리"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)(n(),{href:"/admin/celeb",className:"flex items-center px-4 py-2 rounded-lg ".concat(a.pathname.startsWith("/admin/celeb")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"),children:[(0,s.jsx)(y.default,{className:"mr-3 h-5 w-5"}),"셀럽 관리"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)(n(),{href:"/admin/users",className:"flex items-center px-4 py-2 rounded-lg ".concat(a.pathname.startsWith("/admin/users")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"),children:[(0,s.jsx)(h.default,{className:"mr-3 h-5 w-5"}),"사용자 관리"]})})]}),(0,s.jsx)("div",{className:"border-t mt-4 pt-4",children:(0,s.jsxs)("button",{onClick:()=>{localStorage.removeItem("adminToken"),sessionStorage.removeItem("adminToken"),(0,d.signOut)({callbackUrl:"/"})},className:"flex items-center w-full px-4 py-2 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[(0,s.jsx)(j.default,{className:"mr-3 h-5 w-5"}),"로그아웃"]})})]})]}),(0,s.jsx)("div",{className:"flex-1",children:t})]})}))}},74128:function(e,t,a){a.r(t);var s=a(85893),l=a(67294),r=a(43283),n=a(12895),i=a(62634),d=a(62190),c=a(4270),o=a(25675),m=a.n(o);t.default=e=>{let{value:t=[],onChange:a,disabled:o=!1}=e,[u,x]=(0,l.useState)({name:"",role:"",image:""}),[h,p]=(0,l.useState)(!1),[g,b]=(0,l.useState)(""),f=e=>{let{name:t,value:a}=e.target;x(e=>({...e,[t]:a})),b("")},y=e=>{a(t.filter((t,a)=>a!==e).map((e,t)=>({...e,order:t})))},j=(e,s)=>{if("up"===s&&0===e||"down"===s&&e===t.length-1)return;let l="up"===s?e-1:e+1,r=[...t];[r[e],r[l]]=[r[l],r[e]],a(r.map((e,t)=>({...e,order:t})))},N=e=>e&&(e.startsWith("http://")||e.startsWith("https://"));return(0,s.jsxs)("div",{className:"space-y-4",children:[t.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:t.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center border rounded-md p-3 bg-white",children:[(0,s.jsx)("div",{className:"flex-shrink-0 mr-4",children:e.image?(0,s.jsx)("div",{className:"relative h-12 w-12 rounded-full overflow-hidden bg-gray-100",children:N(e.image)?(0,s.jsx)("img",{src:e.image,alt:e.name,className:"w-12 h-12 object-cover",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder-tvfilm.svg"}}):(0,s.jsx)(m(),{src:e.image,alt:e.name,width:48,height:48,className:"object-cover",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder-tvfilm.svg"}})}):(0,s.jsx)("div",{className:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",children:(0,s.jsx)(r.default,{size:20})})}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("p",{className:"font-medium",children:e.name}),e.role&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.role})]}),!o&&(0,s.jsxs)("div",{className:"flex-shrink-0 flex items-center space-x-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>j(a,"up"),disabled:0===a,className:"p-1 text-gray-500 hover:text-gray-700 ".concat(0===a?"opacity-50 cursor-not-allowed":""),children:(0,s.jsx)(n.default,{size:16})}),(0,s.jsx)("button",{type:"button",onClick:()=>j(a,"down"),disabled:a===t.length-1,className:"p-1 text-gray-500 hover:text-gray-700 ".concat(a===t.length-1?"opacity-50 cursor-not-allowed":""),children:(0,s.jsx)(i.default,{size:16})}),(0,s.jsx)("button",{type:"button",onClick:()=>y(a),className:"p-1 text-red-500 hover:text-red-700",children:(0,s.jsx)(d.default,{size:16})})]})]},a))}),!o&&(0,s.jsxs)("div",{className:"mt-4 border rounded-md p-4 bg-gray-50",children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Add Cast Member"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"text",name:"name",placeholder:"Cast member name",value:u.name,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"text",name:"role",placeholder:"Role/Character (optional)",value:u.role,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})}),h?(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"text",name:"image",placeholder:"Image URL",value:u.image,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),u.image&&(0,s.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 mr-2",children:"Preview:"}),N(u.image)?(0,s.jsx)("img",{src:u.image,alt:"Preview",className:"w-8 h-8 rounded-full object-cover",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder-tvfilm.svg"}}):(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:(0,s.jsx)(r.default,{size:12})})]})]}):(0,s.jsxs)("button",{type:"button",onClick:()=>{p(!h)},className:"text-blue-500 text-sm hover:text-blue-700 flex items-center",children:[(0,s.jsx)(c.default,{size:16,className:"mr-1"}),"Add image URL"]}),g&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"button",onClick:()=>{if(!u.name.trim()){b("Cast member name is required");return}a([...t,{...u,order:t.length}]),x({name:"",role:"",image:""}),p(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Cast Member"})})]})]})]})}},79731:function(e,t,a){a.r(t);var s=a(85893),l=a(67294),r=a(70088),n=a(7656),i=a(23488),d=a(41949),c=a(86762),o=a(62190),m=a(78865),u=a(4270);t.default=e=>{let{reviews:t=[],onChange:a,tvfilmId:x,dramaId:h,readOnly:p=!1}=e,[g,b]=(0,l.useState)([]),[f,y]=(0,l.useState)(null),[j,N]=(0,l.useState)(null),[v,w]=(0,l.useState)("all"),[k,C]=(0,l.useState)({authorName:"",title:"",content:"",rating:5,date:new Date().toISOString(),tags:[],featured:!1}),[F,S]=(0,l.useState)(null),[A,D]=(0,l.useState)(""),[_,q]=(0,l.useState)(!1),[I,z]=(0,l.useState)(null);(0,l.useEffect)(()=>{t&&Array.isArray(t)?b(t):b([])},[t]),(0,l.useEffect)(()=>{if(_)return;let e=setTimeout(()=>{a&&Array.isArray(g)&&a(g)},200);return()=>clearTimeout(e)},[g,a,_]);let L=e=>{let{name:t,value:a,type:s,checked:l}=e.target,r="checkbox"===s?l:"rating"===t?parseInt(a,10):a;C(e=>({...e,[t]:r})),F&&t&&S(null)},W=e=>{let t=[];e.title&&"string"==typeof e.title&&""!==e.title.trim()?e.title.length>100&&t.push("제목은 100자 이내여야 합니다"):t.push("제목이 없거나 유효하지 않습니다"),e.content&&"string"==typeof e.content&&""!==e.content.trim()?e.content.length>5e3&&t.push("내용은 5000자 이내여야 합니다"):t.push("내용이 없거나 유효하지 않습니다"),e.authorName&&"string"==typeof e.authorName&&""!==e.authorName.trim()?e.authorName.length>50&&t.push("작성자 이름은 50자 이내여야 합니다"):t.push("작성자 이름이 없거나 유효하지 않습니다");let a=parseInt(e.rating,10);return(isNaN(a)||a<1||a>10)&&t.push("별점이 유효하지 않습니다 (1-10 사이 숫자여야 함)"),t},T=e=>{!p&&!_&&window.confirm("정말로 이 리뷰를 삭제하시겠습니까?")&&(q(!0),b(t=>Array.isArray(t)?t.filter(t=>t._id!==e):[]),j===e&&(N(null),y(null),C({authorName:"",title:"",content:"",rating:5,date:new Date().toISOString(),tags:[],featured:!1})),q(!1))},E=e=>{_||p||(N(e._id),y("edit"),C({authorName:e.authorName||"",title:e.title||"",content:e.content||"",rating:e.rating||5,date:e.date||e.createdAt||new Date().toISOString(),tags:Array.isArray(e.tags)?e.tags:[],featured:e.featured||!1}),S(null))},R=()=>{_||(N(null),y(null),C({authorName:"",title:"",content:"",rating:5,date:new Date().toISOString(),tags:[],featured:!1}),S(null))},O=e=>{let t=[],a=Math.floor(e/2),l=e%2!=0;for(let e=0;e<a;e++)t.push((0,s.jsx)(r.default,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},"full-".concat(e)));l&&t.push((0,s.jsxs)("span",{className:"relative",children:[(0,s.jsx)(r.default,{className:"w-4 h-4 text-yellow-400"}),(0,s.jsx)(r.default,{className:"w-4 h-4 fill-yellow-400 text-yellow-400 absolute top-0 left-0 overflow-hidden",style:{clipPath:"inset(0 50% 0 0)"}})]},"half"));let n=5-a-(l?1:0);for(let e=0;e<n;e++)t.push((0,s.jsx)(r.default,{className:"w-4 h-4 text-yellow-400"},"empty-".concat(e)));return(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[t,(0,s.jsxs)("span",{className:"ml-1 text-sm text-gray-600",children:["(",e,"/10)"]})]})},P=e=>{if(!e)return"";try{let t=new Date(e);if(isNaN(t.getTime()))return"날짜 형식 오류";return t.toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(e){return"날짜 형식 오류"}},U=()=>Array.isArray(g)?g:[],K=()=>{A.trim()&&!(k.tags&&Array.isArray(k.tags)&&k.tags.includes(A.trim()))&&(C(e=>({...e,tags:[...Array.isArray(e.tags)?e.tags:[],A.trim()]})),D(""))},H=e=>{C(t=>({...t,tags:Array.isArray(t.tags)?t.tags.filter(t=>t!==e):[]}))};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:[p?"리뷰 목록":"리뷰 관리",g&&g.length>0&&(0,s.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["(",g.length,"개)"]})]}),!p&&!f&&(0,s.jsxs)("button",{type:"button",onClick:()=>{_||p||(C({_id:"temp_".concat(Date.now()),title:"",content:"",authorName:"",rating:5,tags:[],featured:!1,date:new Date}),D(""),y("add"),N(null))},className:"px-3 py-1.5 bg-pink-500 text-white rounded-md hover:bg-pink-600 flex items-center",disabled:_,children:[(0,s.jsx)(u.default,{className:"w-4 h-4 mr-1"}),"리뷰 추가"]})]}),!p&&f?(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-5 bg-white",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"font-bold text-gray-800",children:"edit"===f?"리뷰 편집":"새 리뷰 추가"}),(0,s.jsx)("button",{onClick:R,className:"text-gray-500 hover:text-gray-700",disabled:_,children:(0,s.jsx)(o.default,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["작성자 이름 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",name:"authorName",value:k.authorName,onChange:L,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-pink-500",placeholder:"작성자 이름",disabled:_,required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["별점 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[[...Array(10)].map((e,t)=>(0,s.jsx)("button",{type:"button",onClick:()=>L({target:{name:"rating",value:t+1}}),className:"p-1 focus:outline-none ".concat(t<k.rating?"text-yellow-400":"text-gray-300"),disabled:_,children:(0,s.jsx)(r.default,{className:"w-6 h-6",fill:"currentColor"})},t)),(0,s.jsxs)("span",{className:"ml-2 font-medium text-gray-700",children:[k.rating,"/10"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["리뷰 제목 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",name:"title",value:k.title,onChange:L,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-pink-500",placeholder:"리뷰 제목",disabled:_,required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["리뷰 내용 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("textarea",{name:"content",value:k.content,onChange:L,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-pink-500",placeholder:"리뷰 내용을 작성하세요",disabled:_,required:!0})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"featured",name:"featured",checked:k.featured||!1,onChange:L,className:"w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500",disabled:_}),(0,s.jsxs)("label",{htmlFor:"featured",className:"ml-2 block text-sm font-medium text-gray-700",children:["대표 리뷰로 설정 ",(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"(웹사이트 영화 카드에 표시됩니다)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"태그"}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("input",{type:"text",value:A,onChange:e=>D(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-1 focus:ring-pink-500",placeholder:"태그 입력 후 추가",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),K())},disabled:_}),(0,s.jsx)("button",{type:"button",onClick:K,className:"px-3 py-2 bg-gray-100 border border-gray-300 border-l-0 rounded-r-md hover:bg-gray-200",disabled:_,children:"추가"})]}),k.tags&&Array.isArray(k.tags)&&k.tags.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:k.tags.map((e,t)=>(0,s.jsxs)("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded flex items-center",children:[e,(0,s.jsx)("button",{type:"button",onClick:()=>H(e),className:"ml-1 text-gray-500 hover:text-red-500",disabled:_,children:(0,s.jsx)(o.default,{className:"w-3 h-3"})})]},t))})]}),F&&(0,s.jsx)("div",{className:"text-red-500 text-sm bg-red-50 p-2 rounded border border-red-200",children:F}),(0,s.jsxs)("div",{className:"flex justify-end pt-2",children:[(0,s.jsx)("button",{type:"button",onClick:R,className:"mr-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50",disabled:_,children:"취소"}),(0,s.jsx)("button",{type:"button",onClick:"edit"===f?e=>{if(e.preventDefault(),p)return;q(!0),S(null);let t=W(k);if(t.length>0){S(t.join("\n")),q(!1);return}b(e=>Array.isArray(e)?e.map(e=>e._id===j?{...k,_id:j,tvfilmId:x||e.tvfilmId,updatedAt:new Date().toISOString()}:e):[]),N(null),y(null),C({authorName:"",title:"",content:"",rating:5,date:new Date().toISOString(),tags:[],featured:!1}),S(null),q(!1)}:e=>{if(e.preventDefault(),p)return;q(!0),S(null);let t=W(k);if(t.length>0){S(t.join("\n")),q(!1);return}let a="temp_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,10)),s={...k,_id:a,tvfilmId:x||h||null,createdAt:k.date||new Date().toISOString(),updatedAt:new Date().toISOString()};b(e=>[...Array.isArray(e)?[...e]:[],s]),C({authorName:"",title:"",content:"",rating:5,date:new Date().toISOString(),tags:[],featured:!1}),S(null),y(null),q(!1)},className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600 ".concat(_?"opacity-70 cursor-not-allowed":""),disabled:_,children:_?(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"animate-spin mr-2",children:"◌"}),"처리 중..."]}):"edit"===f?(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(m.default,{className:"w-4 h-4 mr-1"}),"수정 완료"]}):(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(u.default,{className:"w-4 h-4 mr-1"}),"리뷰 추가"]})})]})]})]}):(()=>{let e=U();return e.length?(0,s.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,s.jsxs)("div",{className:"p-4 rounded-lg border ".concat(j===e._id?"border-blue-400 bg-blue-50":e.featured?"border-yellow-400 bg-yellow-50":"border-gray-200"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:e.title||"(제목 없음)"}),e.featured&&(0,s.jsxs)("span",{className:"bg-yellow-200 text-yellow-800 text-xs px-2 py-1 rounded-full flex items-center",children:[(0,s.jsx)(i.default,{className:"w-3 h-3 mr-1"}),"대표 리뷰"]})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.authorName||"익명"," - ",P(e.date||e.createdAt)]})]}),!p&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>E(e),className:"p-1 text-blue-500 hover:text-blue-700",title:"수정",disabled:_,children:(0,s.jsx)(d.default,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:()=>T(e._id),className:"p-1 text-red-500 hover:text-red-700",title:"삭제",disabled:_,children:(0,s.jsx)(c.default,{className:"w-5 h-5"})})]})]}),(0,s.jsx)("div",{className:"mt-2",children:O(e.rating||5)}),(0,s.jsx)("p",{className:"mt-2 text-gray-700",children:e.content||"(내용 없음)"}),e.tags&&Array.isArray(e.tags)&&e.tags.length>0&&(0,s.jsx)("div",{className:"mt-3 flex flex-wrap gap-1",children:e.tags.map((e,t)=>(0,s.jsx)("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded",children:e},t))})]},e._id))}):(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(n.default,{className:"mx-auto h-10 w-10 text-gray-300 mb-2"}),(0,s.jsx)("p",{className:"text-gray-500 mb-1",children:"아직 리뷰가 없습니다"}),!p&&(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"첫 번째 리뷰를 추가해보세요"})]})})()]})}},65972:function(e,t,a){a.r(t);var s=a(85893),l=a(67294),r=a(10857),n=a(12895),i=a(62634),d=a(62190),c=a(4270);t.default=e=>{let{videos:t,onChange:a}=e,[o,m]=(0,l.useState)({title:"",type:"trailer",url:""}),[u,x]=(0,l.useState)({}),h=[{value:"trailer",label:"공식 트레일러"},{value:"teaser",label:"티저"},{value:"ad",label:"광고"},{value:"making-of",label:"메이킹 필름"},{value:"clip",label:"클립"},{value:"interview",label:"인터뷰"},{value:"other",label:"기타"}],p=e=>{let{name:t,value:a}=e.target;m(e=>({...e,[t]:a})),u[t]&&x(e=>({...e,[t]:null}))},g=e=>/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)[a-zA-Z0-9_-]+/.test(e),b=e=>{let s=[...t];s.splice(e,1),s.forEach((e,t)=>{e.order=t}),a(s)},f=(e,s)=>{if("up"===s&&0===e||"down"===s&&e===t.length-1)return;let l=[...t],r="up"===s?e-1:e+1;[l[e],l[r]]=[l[r],l[e]],l.forEach((e,t)=>{e.order=t}),a(l)},y=e=>{if(!e)return null;let t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&11===t[2].length?t[2]:null};return(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"비디오: 트레일러 & 티저"}),(0,s.jsx)("div",{className:"mb-6",children:0===t.length?(0,s.jsx)("div",{className:"text-gray-500 mb-4 border border-dashed border-gray-300 p-4 rounded-md text-center",children:"등록된 비디오가 없습니다. 아래 폼에서 유튜브 링크를 추가해주세요."}):(0,s.jsx)("div",{className:"space-y-3",children:t.map((e,a)=>{var l;let c=y(e.url);return(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-3 border border-gray-200 p-3 rounded-md bg-white shadow-sm",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-full md:w-48 h-24 bg-gray-100 rounded overflow-hidden md:mr-2",children:c?(0,s.jsx)("img",{src:"https://img.youtube.com/vi/".concat(c,"/mqdefault.jpg"),alt:e.title,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:(0,s.jsx)(r.default,{className:"w-8 h-8 text-gray-400"})})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium",children:e.title}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)("span",{className:"bg-pink-100 text-pink-800 text-xs px-2 py-1 rounded",children:(null===(l=h.find(t=>t.value===e.type))||void 0===l?void 0:l.label)||e.type}),(0,s.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs inline-flex items-center",children:[e.url.substring(0,30),"..."]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>f(a,"up"),disabled:0===a,className:"p-1 rounded-full ".concat(0===a?"text-gray-300":"text-gray-500 hover:bg-gray-100"),children:(0,s.jsx)(n.default,{size:16})}),(0,s.jsx)("button",{type:"button",onClick:()=>f(a,"down"),disabled:a===t.length-1,className:"p-1 rounded-full ".concat(a===t.length-1?"text-gray-300":"text-gray-500 hover:bg-gray-100"),children:(0,s.jsx)(i.default,{size:16})}),(0,s.jsx)("button",{type:"button",onClick:()=>b(a),className:"p-1 rounded-full text-red-500 hover:bg-red-50",children:(0,s.jsx)(d.default,{size:16})})]})]})})]},a)})})}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-3 text-gray-700",children:"새 비디오 추가"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"제목"}),(0,s.jsx)("input",{type:"text",name:"title",value:o.title,onChange:p,placeholder:"공식 트레일러, 티저 영상 2 등",className:"w-full px-3 py-2 border rounded-md ".concat(u.title?"border-red-500":"border-gray-300")}),u.title&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-500",children:u.title})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"유형"}),(0,s.jsx)("select",{name:"type",value:o.type,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:h.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"유튜브 URL"}),(0,s.jsx)("input",{type:"text",name:"url",value:o.url,onChange:p,placeholder:"https://www.youtube.com/watch?v=...",className:"w-full px-3 py-2 border rounded-md ".concat(u.url?"border-red-500":"border-gray-300")}),u.url&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-500",children:u.url}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"유튜브 동영상 URL을 입력해주세요 (예: https://www.youtube.com/watch?v=dQw4w9WgXcQ)"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>{let e={};if(o.title.trim()||(e.title="제목을 입력해주세요"),o.url.trim()?g(o.url)||(e.url="유효한 YouTube URL을 입력해주세요"):e.url="URL을 입력해주세요",Object.keys(e).length>0){x(e);return}a([...t,{...o,order:t.length,id:Date.now().toString()}]),m({title:"",type:"trailer",url:""}),x({})},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-pink-600 hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500",children:[(0,s.jsx)(c.default,{size:16,className:"mr-2"}),"비디오 추가"]})]})]})}},62076:function(e,t,a){a.r(t);var s=a(85893),l=a(67294),r=a(12895),n=a(62634),i=a(62190);a(25675);let d=[{name:"Netflix",color:"#E50914",textColor:"#FFFFFF",type:"subscription",price:"9,500원/월",quality:["HD","4K"],url:"https://www.netflix.com/",logo:"https://upload.wikimedia.org/wikipedia/commons/7/7a/Logonetflix.png"},{name:"Disney+",color:"#0063E5",textColor:"#FFFFFF",type:"subscription",price:"9,900원/월",quality:["HD","4K"],url:"https://www.disneyplus.com/",logo:"https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney%2B_logo.svg"},{name:"TVING",color:"#FF0050",textColor:"#FFFFFF",type:"subscription",price:"7,900원/월",quality:["HD","4K"],url:"https://www.tving.com/",logo:"https://upload.wikimedia.org/wikipedia/commons/9/95/TVING_logo.png"},{name:"Watcha",color:"#FF0A54",textColor:"#FFFFFF",type:"subscription",price:"7,900원/월",quality:["HD","4K"],url:"https://watcha.com/",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/79/Watcha_logo.png/800px-Watcha_logo.png"},{name:"Wavve",color:"#1351F9",textColor:"#FFFFFF",type:"subscription",price:"7,900원/월",quality:["HD","4K"],url:"https://www.wavve.com/",logo:"https://upload.wikimedia.org/wikipedia/commons/8/8c/Wavve_logo.png"},{name:"Apple TV+",color:"#000000",textColor:"#FFFFFF",type:"subscription",price:"8,900원/월",quality:["HD","4K"],url:"https://tv.apple.com/",logo:"https://upload.wikimedia.org/wikipedia/commons/3/39/Apple_TV.svg"}];t.default=e=>{let{value:t=[],onChange:a,disabled:c=!1}=e,[o,m]=(0,l.useState)({name:"",logo:"",color:"#6366F1",textColor:"#FFFFFF",type:"subscription",price:"",quality:[],url:""}),[u,x]=(0,l.useState)(!1),[h,p]=(0,l.useState)(""),[g,b]=(0,l.useState)(""),[f,y]=(0,l.useState)(""),j=e=>{let{name:t,value:a}=e.target;m(e=>({...e,[t]:a})),b("")},N=e=>{m(t=>({...t,quality:t.quality.filter((t,a)=>a!==e)}))},v=e=>{a(t.filter((t,a)=>a!==e).map((e,t)=>({...e,order:t})))},w=(e,s)=>{if("up"===s&&0===e||"down"===s&&e===t.length-1)return;let l="up"===s?e-1:e+1,r=[...t];[r[e],r[l]]=[r[l],r[e]],a(r.map((e,t)=>({...e,order:t})))},k=e=>{switch(e){case"subscription":return"Subscription";case"rental":return"Rental";case"purchase":return"Purchase";case"free":return"Free";default:return e}},C=e=>e?"Netflix"===e?"N":"Disney+"===e?"D+":"Apple TV+"===e?"TV+":e.charAt(0):"";return(0,s.jsxs)("div",{className:"space-y-4",children:[t.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:t.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center border rounded-md p-3 bg-white",children:[(0,s.jsx)("div",{className:"flex-shrink-0 mr-4",children:(0,s.jsx)("div",{className:"relative h-12 w-20 overflow-hidden rounded flex items-center justify-center",style:{backgroundColor:e.color||"#6366F1",color:e.textColor||"#FFFFFF"},children:(0,s.jsx)("span",{className:"text-lg font-bold",children:C(e.name)})})}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("p",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-1 items-center text-xs text-gray-500",children:[(0,s.jsx)("span",{className:"bg-gray-100 px-2 py-0.5 rounded",children:k(e.type)}),e.price&&(0,s.jsxs)("span",{children:["• ",e.price]}),e.quality&&e.quality.length>0&&(0,s.jsxs)("span",{children:["• ",e.quality.join(", ")]})]})]}),!c&&(0,s.jsxs)("div",{className:"flex-shrink-0 flex items-center space-x-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>w(a,"up"),disabled:0===a,className:"p-1 text-gray-500 hover:text-gray-700 ".concat(0===a?"opacity-50 cursor-not-allowed":""),children:(0,s.jsx)(r.default,{size:16})}),(0,s.jsx)("button",{type:"button",onClick:()=>w(a,"down"),disabled:a===t.length-1,className:"p-1 text-gray-500 hover:text-gray-700 ".concat(a===t.length-1?"opacity-50 cursor-not-allowed":""),children:(0,s.jsx)(n.default,{size:16})}),(0,s.jsx)("button",{type:"button",onClick:()=>v(a),className:"p-1 text-red-500 hover:text-red-700",children:(0,s.jsx)(i.default,{size:16})})]})]},a))}),!c&&(0,s.jsxs)("div",{className:"mt-4 border rounded-md p-4 bg-gray-50",children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Add Watch Provider"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:"Quick Add:"}),(0,s.jsxs)("select",{value:f,onChange:e=>{let s=e.target.value;if(!s)return;if(y(""),t.find(e=>e.name===s)){b("".concat(s," is already added"));return}let l=d.find(e=>e.name===s);l&&a([...t,{...l,order:t.length}])},className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:[(0,s.jsx)("option",{value:"",children:"Select a common provider..."}),d.map(e=>(0,s.jsx)("option",{value:e.name,disabled:t.some(t=>t.name===e.name),children:e.name},e.name))]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Provider information will be automatically added"})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Or add custom provider:"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"text",name:"name",placeholder:"Provider name (e.g., Netflix, Disney+)",value:o.name,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})}),(0,s.jsx)("div",{children:(0,s.jsxs)("select",{name:"type",value:o.type,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,s.jsx)("option",{value:"subscription",children:"Subscription"}),(0,s.jsx)("option",{value:"rental",children:"Rental"}),(0,s.jsx)("option",{value:"purchase",children:"Purchase"}),(0,s.jsx)("option",{value:"free",children:"Free"})]})}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"text",name:"price",placeholder:"Price (e.g., $9.99/month, $3.99)",value:o.price,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"text",name:"url",placeholder:"Link URL (e.g., https://netflix.com/title/123)",value:o.url,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:"Provider Color:"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("input",{type:"color",name:"color",value:o.color,onChange:j,className:"h-10 w-12 p-0 border-0"}),(0,s.jsx)("input",{type:"text",name:"color",value:o.color,onChange:j,placeholder:"#6366F1",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"Quality (e.g., HD, 4K)",value:h,onChange:e=>p(e.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-md"}),(0,s.jsx)("button",{type:"button",onClick:()=>{h.trim()&&(o.quality.includes(h.trim())||m(e=>({...e,quality:[...e.quality,h.trim()]})),p(""))},className:"bg-gray-200 text-gray-700 px-3 py-2 rounded-md hover:bg-gray-300",children:"Add"})]}),o.quality.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:o.quality.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center bg-gray-100 px-2 py-1 rounded text-sm",children:[e,(0,s.jsx)("button",{type:"button",onClick:()=>N(t),className:"ml-1 text-gray-500 hover:text-red-500",children:(0,s.jsx)(i.default,{size:12})})]},t))})]}),g&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"button",onClick:()=>{if(""===o.name.trim()){b("제공자 이름을 입력해주세요.");return}let e="";e=o.name.toLowerCase().includes("netflix")?"https://upload.wikimedia.org/wikipedia/commons/7/7a/Logonetflix.png":o.name.toLowerCase().includes("disney")?"https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney%2B_logo.svg":o.name.toLowerCase().includes("tving")?"https://upload.wikimedia.org/wikipedia/commons/9/95/TVING_logo.png":o.name.toLowerCase().includes("wavve")?"https://upload.wikimedia.org/wikipedia/commons/8/8c/Wavve_logo.png":o.name.toLowerCase().includes("watcha")?"https://upload.wikimedia.org/wikipedia/commons/thumb/7/79/Watcha_logo.png/800px-Watcha_logo.png":o.name.toLowerCase().includes("apple")?"https://upload.wikimedia.org/wikipedia/commons/3/39/Apple_TV.svg":"https://www.google.com/s2/favicons?domain=".concat(encodeURIComponent(o.url),"&sz=128"),a([...t,{...o,logo:e,order:t.length}]),m({name:"",logo:"",color:"#6366F1",textColor:"#FFFFFF",type:"subscription",price:"",quality:[],url:""}),x(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Provider"})})]})]})]})]})}}}]);