(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9603],{92774:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return s(46099)}])},81073:function(e,t,s){"use strict";s.r(t);var a=s(85893);s(67294),t.default=()=>(0,a.jsxs)("div",{className:"flex justify-center items-center py-10",children:[(0,a.jsxs)("div",{className:"relative w-20 h-20",children:[(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-pink-500 via-purple-500 to-pink-500 animate-pulse opacity-70"}),(0,a.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-pink-500 border-r-purple-500 animate-spin-slow"}),(0,a.jsx)("div",{className:"absolute inset-2 rounded-full border-[3px] border-transparent border-b-pink-400 border-l-purple-400 animate-reverse-spin"}),(0,a.jsx)("div",{className:"absolute inset-4 rounded-full bg-white flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-pink-500 to-purple-500 animate-bounce"})}),(0,a.jsx)("div",{className:"absolute top-1 right-2 w-1.5 h-1.5 rounded-full bg-pink-300 animate-float-1"}),(0,a.jsx)("div",{className:"absolute bottom-3 left-1 w-1 h-1 rounded-full bg-purple-300 animate-float-2"}),(0,a.jsx)("div",{className:"absolute top-4 left-2 w-1 h-1 rounded-full bg-pink-400 animate-float-3"})]}),(0,a.jsxs)("div",{className:"relative ml-3 overflow-hidden",children:[(0,a.jsxs)("div",{className:"animate-text-reveal",children:[(0,a.jsx)("span",{className:"inline-block font-medium text-lg bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent",children:"Loading"}),(0,a.jsx)("span",{className:"inline-block mx-[1px] animate-dot-1",children:"."}),(0,a.jsx)("span",{className:"inline-block mx-[1px] animate-dot-2",children:"."}),(0,a.jsx)("span",{className:"inline-block mx-[1px] animate-dot-3",children:"."})]}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 h-[2px] w-full bg-gradient-to-r from-pink-500 to-purple-500 opacity-70 animate-expand-line"})]})]})},46099:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return z}});var a=s(85893),r=s(67294),l=s(11163),n=s(9008),i=s.n(n),c=s(32363),o=s(19402),d=s(36127),m=s(62190),x=s(81073),u=s(25675),h=s.n(u),p=s(41664),f=s.n(p),g=s(2553),j=s(73479),y=s(94086),b=s(8267),N=s(50039),v=s(4307),w=s(15928),k=s(86076),S=e=>{let{results:t,viewMode:s,type:r,searchQuery:l}=e;if(!t||0===t.length)return null;let n=(e,t)=>{let s=e._type||e.type||t,r=e.matchInfo&&"cast"===e.matchInfo.type;switch(s){case"news":return{icon:(0,a.jsx)(g.default,{size:14,className:"mr-1 text-pink-500"}),path:"/news/".concat(e.slug||e._id)};case"dramas":return{icon:(0,a.jsx)(j.default,{size:14,className:"mr-1 ".concat(r?"text-yellow-500":"text-blue-500")}),path:"/drama/".concat(e.slug||e._id),isCastMatch:r};case"movies":return{icon:(0,a.jsx)(y.default,{size:14,className:"mr-1 ".concat(r?"text-yellow-500":"text-purple-500")}),path:"/tvfilm/".concat(e.slug||e._id),isCastMatch:r};case"actors":return{icon:(0,a.jsx)(b.default,{size:14,className:"mr-1 text-green-500"}),path:"/celeb/".concat(e.slug||e._id)};default:return{icon:(0,a.jsx)(g.default,{size:14,className:"mr-1 text-gray-500"}),path:"/".concat(s,"/").concat(e.slug||e._id)}}},i=e=>{if(!e)return"Unknown date";try{return(0,k.default)(new Date(e),{addSuffix:!0})}catch(e){return"Invalid date"}},c=(e,t)=>{if(!e||!t)return e;try{let s=t.split(/\s+/).filter(e=>e.length>1),a=RegExp("(".concat(s.join("|"),")"),"gi");return e.replace(a,'<span class="bg-yellow-100 font-medium">$1</span>')}catch(t){return e}},o=e=>{let{text:t,searchQuery:s,className:r=""}=e;if(!t||!s)return(0,a.jsx)("span",{className:r,children:t});let l=c(t,s);return(0,a.jsx)("span",{className:r,dangerouslySetInnerHTML:{__html:l}})};return(0,a.jsx)("div",{className:"grid"===s?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-6",children:t.map("grid"===s?e=>{let{icon:t,path:s,isCastMatch:i}=n(e,r),c=e.title||e.name||"Untitled",d=(e.content||e.summary||e.description||e.biography||"").replace(/<[^>]*>/g,""),m=e.coverImage||e.profileImage||"/images/placeholder.jpg",x=e.createdAt||e.updatedAt;e.viewCount;let u=e.matchInfo&&"cast"===e.matchInfo.type||l&&e.cast&&Array.isArray(e.cast)&&e.cast.some(e=>{let t=e.name||"";return RegExp(l,"i").test(t)}),h=[];return e.matchInfo&&"cast"===e.matchInfo.type&&e.matchInfo.matches?h=e.matchInfo.matches:u&&e.cast&&(h=e.cast.filter(e=>RegExp(l,"i").test(e.name||""))),(0,a.jsx)(f(),{href:s,children:(0,a.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden transition-all duration-300 group relative cursor-pointer",children:[(0,a.jsxs)("div",{className:"h-56 overflow-hidden relative",children:[(0,a.jsx)("img",{src:m,alt:c,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105 rounded-xl",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder.jpg"}}),(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-[#8e44ad] via-[#9b59b6] to-[#d35400] opacity-80 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsx)("div",{className:"absolute top-2 left-2 md:top-3 md:left-3 z-20",children:(0,a.jsx)("span",{className:"px-2 py-1 md:px-3 md:py-1.5 text-white text-xs font-medium rounded-full backdrop-blur-sm shadow-md",style:{background:"linear-gradient(to right, #9333ea, #ec4899)"},children:e.category||"K-POP"})}),u&&(0,a.jsx)("div",{className:"absolute top-2 right-2 bg-pink-500/80 text-white text-xs px-2 py-1 rounded-full backdrop-blur-sm",children:"Cast Match"})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-800 text-lg mb-2 line-clamp-2 min-h-[3.5rem] group-hover:text-[#8e44ad] transition-colors",children:(0,a.jsx)(o,{text:c,searchQuery:l})}),(0,a.jsx)("p",{className:"text-gray-600 text-xs line-clamp-2 mb-3",children:(0,a.jsx)(o,{text:d,searchQuery:l})}),h.length>0&&(0,a.jsxs)("div",{className:"mb-3 pt-2 border-t border-gray-100",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Cast:"}),h.slice(0,2).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center text-sm mb-1",children:[(0,a.jsx)("span",{className:"font-medium text-pink-600",children:(0,a.jsx)(o,{text:e.name,searchQuery:l})}),e.role&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["as ",e.role]})]},t)),h.length>2&&(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["+",h.length-2," more"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-end",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-500 text-xs",children:[(0,a.jsx)(N.default,{size:12,className:"mr-1 text-[#9b59b6]"}),(0,a.jsx)("span",{children:x?new Date(x).toLocaleDateString():"Unknown date"})]}),(0,a.jsxs)("span",{className:"inline-flex items-center text-transparent bg-clip-text bg-gradient-to-r from-purple-600 via-pink-500 to-rose-500 text-xs font-medium hover:underline cursor-pointer group",children:["Read more ",(0,a.jsx)(v.default,{size:14,className:"ml-1 group-hover:animate-pulse"})]})]})]})]})},e._id)}:e=>{let{icon:t,path:s,isCastMatch:c}=n(e,r),d=e.title||e.name||"Untitled",m=(e.content||e.summary||e.description||e.biography||"").replace(/<[^>]*>/g,""),x=e.coverImage||e.profileImage||"/images/placeholder.jpg",u=i(e.createdAt||e.updatedAt),p=e.viewCount||0,g=e.matchInfo&&"cast"===e.matchInfo.type||l&&e.cast&&Array.isArray(e.cast)&&e.cast.some(e=>RegExp(l,"i").test(e.name||"")),j=[];return e.matchInfo&&"cast"===e.matchInfo.type&&e.matchInfo.matches?j=e.matchInfo.matches:g&&e.cast&&(j=e.cast.filter(e=>RegExp(l,"i").test(e.name||""))),(0,a.jsx)(f(),{href:s,children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,a.jsxs)("div",{className:"md:w-1/4 relative",children:[(0,a.jsx)(h(),{src:x,alt:d,width:300,height:200,className:"w-full h-48 md:h-full object-cover"}),(0,a.jsxs)("div",{className:"absolute top-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full backdrop-blur-sm flex items-center",children:[t,(0,a.jsx)("span",{children:e.category||r})]}),g&&(0,a.jsx)("div",{className:"absolute top-2 right-2 bg-pink-500/80 text-white text-xs px-2 py-1 rounded-full backdrop-blur-sm",children:"Cast Match"})]}),(0,a.jsxs)("div",{className:"flex-1 p-4",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:(0,a.jsx)(o,{text:d,searchQuery:l})}),(0,a.jsx)("p",{className:"text-gray-500 text-sm line-clamp-3 mb-3",children:(0,a.jsx)(o,{text:m,searchQuery:l})}),j.length>0&&(0,a.jsxs)("div",{className:"mb-3 pt-2 border-t border-gray-100",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Cast:"}),j.slice(0,3).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center text-sm mb-1",children:[(0,a.jsx)("span",{className:"font-medium text-pink-600",children:(0,a.jsx)(o,{text:e.name,searchQuery:l})}),e.role&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["as ",e.role]})]},t)),j.length>3&&(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["+",j.length-3," more"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(N.default,{size:14,className:"mr-1"}),(0,a.jsx)("span",{children:u})]}),p>0&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(w.default,{size:14,className:"mr-1"}),(0,a.jsxs)("span",{children:[p.toLocaleString()," views"]})]})]})]})]})})},e._id)})})},_=s(90437),I=e=>{let{searchTerm:t,onSelect:s,onClearRecent:l,className:n=""}=e,[i,c]=(0,r.useState)([]),[o,d]=(0,r.useState)([]),[m,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("recentSearches");e&&d(JSON.parse(e))},[]),(0,r.useEffect)(()=>{let e=setTimeout(async()=>{if(!t||t.length<2){c([]);return}x(!0);try{let e=await fetch("/api/search/suggestions?q=".concat(encodeURIComponent(t)));if(!e.ok)throw Error("Failed to fetch suggestions");let s=await e.json();c(s.suggestions)}catch(e){c([])}finally{x(!1)}},300);return()=>clearTimeout(e)},[t]);let u=e=>{s(e.title);let t=[e.title,...o.filter(t=>t!==e.title)].slice(0,5);d(t),localStorage.setItem("recentSearches",JSON.stringify(t))};return t||0!==o.length?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden ".concat(n),children:[!t&&o.length>0&&(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Recent Searches"}),(0,a.jsx)("button",{onClick:()=>{d([]),localStorage.removeItem("recentSearches"),null==l||l()},className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all"})]}),(0,a.jsx)("div",{className:"space-y-2",children:o.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>u({title:e}),className:"flex items-center w-full p-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg",children:[(0,a.jsx)(N.default,{size:16,className:"mr-2 text-gray-400"}),(0,a.jsx)("span",{className:"flex-1 text-left",children:e})]},t))})]}),t&&(0,a.jsx)("div",{className:"p-4",children:m?(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-[#ff3e8e] mx-auto"})}):i.length>0?(0,a.jsx)("div",{className:"space-y-2",children:i.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>u(e),className:"flex items-center w-full p-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg",children:[(0,a.jsx)(_.default,{size:16,className:"mr-2 text-gray-400"}),(0,a.jsx)("span",{className:"flex-1 text-left",children:e.title}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.count.toLocaleString()," views"]})]},t))}):(0,a.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No suggestions found"})})]}):null},R=s(69251);function z(){let e=(0,l.useRouter)(),[t,s]=(0,r.useState)(""),[n,u]=(0,r.useState)("all"),[h,p]=(0,r.useState)("grid"),[f,g]=(0,r.useState)(!1),[j,y]=(0,r.useState)({news:[],dramas:[],movies:[],actors:[]}),[b,N]=(0,r.useState)({dateRange:"all",sortBy:"relevance",category:"all"}),[v,w]=(0,r.useState)(!1),[k,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e.isReady&&e.query.q&&(s(e.query.q),z(e.query.q))},[e.isReady,e.query.q]);let z=async e=>{g(!0);try{let t=new URLSearchParams({q:e,type:n,page:1,limit:50,sortBy:b.sortBy,dateRange:b.dateRange}),s=await fetch("/api/news?".concat(t));if(!s.ok)throw Error("Failed to fetch search results");let a=await s.json();"all"===n?a.success&&a.data&&a.data.news?y({news:a.data.news,dramas:[],movies:[],actors:[]}):y(a.results||{news:[],dramas:[],movies:[],actors:[]}):y(e=>({...e,[n]:a.results||[]}))}catch(e){y({news:[],dramas:[],movies:[],actors:[]})}finally{g(!1)}},E=()=>Object.values(j).reduce((e,t)=>e+t.length,0),q=()=>"all"===n?Object.values(j).flat():j[n]||[];return(0,a.jsxs)("div",{className:"min-h-screen bg-white flex flex-col",children:[(0,a.jsxs)(i(),{children:[(0,a.jsxs)("title",{children:[t?'"'.concat(t,'" Search Results'):"Search"," - KstarPick"]}),(0,a.jsx)("meta",{name:"description",content:t?'Search results for "'.concat(t,'". Find K-Pop news, Korean dramas, movies, and celebrity information.'):"Search K-Pop news, Korean dramas, movies, and celebrity information. Find the latest Korean entertainment news quickly."}),(0,a.jsx)("meta",{name:"robots",content:"noindex, follow"}),t&&E()>0&&(0,a.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify((0,R.generateSearchResultsJsonLd)(t,q().slice(0,10).map(e=>({title:e.title,url:"news"===e.type?"/news/".concat(e._id):"drama"===e.type?"/drama/".concat(e._id):"/tvfilm/".concat(e._id),description:e.description||e.summary}))))}})]}),(0,a.jsx)(c.default,{}),(0,a.jsxs)("main",{className:"flex-1 container mx-auto px-4 pt-8 pb-24",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("form",{onSubmit:s=>{s.preventDefault(),t.trim()&&(e.push({pathname:"/search",query:{q:t}}),_(!1))},className:"max-w-3xl mx-auto relative",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:t,onChange:e=>{s(e.target.value),_(!0)},onFocus:()=>_(!0),placeholder:"Search K-POP news, dramas, movies, actors...",className:"w-full px-4 py-3 pl-12 bg-white border border-gray-200 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#ff3e8e]/50 focus:border-[#ff3e8e]"}),(0,a.jsx)(d.default,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),t&&(0,a.jsx)("button",{type:"button",onClick:()=>{s(""),_(!0)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(m.default,{size:20})})]}),k&&(0,a.jsx)("div",{className:"absolute w-full mt-2 z-50",children:(0,a.jsx)(I,{searchTerm:t,onSelect:t=>{s(t),e.push({pathname:"/search",query:{q:t}}),_(!1)},className:"max-h-[400px] overflow-y-auto"})})]})}),t&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:['Search Results for "',t,'"']}),(0,a.jsx)("p",{className:"mt-1 text-gray-500",children:!f&&"".concat(E()," results found")})]})})}),f?(0,a.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,a.jsx)(x.default,{})}):t?(0,a.jsx)("div",{children:E()>0?(0,a.jsx)("div",{className:"mb-24",children:(0,a.jsx)(S,{results:q(),viewMode:h,type:"all"===n?"news":n,searchQuery:t})}):(0,a.jsxs)("div",{className:"text-center py-16 mb-24",children:[(0,a.jsx)("div",{className:"mx-auto w-24 h-24 flex items-center justify-center text-gray-300 mb-4",children:(0,a.jsx)(d.default,{size:48})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No results found"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"Try adjusting your search to find what you're looking for."})]})}):(0,a.jsxs)("div",{className:"text-center py-16 mb-24",children:[(0,a.jsx)("div",{className:"mx-auto w-24 h-24 flex items-center justify-center text-gray-300 mb-4",children:(0,a.jsx)(d.default,{size:48})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Start your search"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"Enter a search term to find K-POP news, dramas, movies, and more."})]})]}),(0,a.jsx)(o.default,{})]})}}},function(e){e.O(0,[1664,5089,6841,1066,2537,9251,2888,9774,179],function(){return e(e.s=92774)}),_N_E=e.O()}]);