(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2300],{46863:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/login",function(){return r(20316)}])},63759:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s},toKebabCase:function(){return i}});var n=r(67294),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=(e,t)=>{let r=(0,n.forwardRef)((r,s)=>{let{color:l="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,children:u,...m}=r;return(0,n.createElement)("svg",{ref:s,...a,width:o,height:o,stroke:l,strokeWidth:d?24*Number(c)/Number(o):c,className:"lucide lucide-".concat(i(e)),...m},[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...(Array.isArray(u)?u:[u])||[]])});return r.displayName="".concat(e),r}},43765:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return n}});let n=(0,r(63759).default)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},82126:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return n}});let n=(0,r(63759).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},86691:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return n}});let n=(0,r(63759).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},20316:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return p},default:function(){return g}});var n=r(85893),a=r(67294),i=r(33299),s=r(11163),l=r(41664),o=r.n(l),c=r(9008),d=r.n(c),u=r(43765),m=r(86691),f=r(82126),h=r(31955),x=r(87066),p=!0;function g(){let[e,t]=(0,a.useState)(""),[r,l]=(0,a.useState)(""),[c,p]=(0,a.useState)(""),[g,b]=(0,a.useState)(!1),v=(0,s.useRouter)(),{data:y,status:w}=(0,i.useSession)();(0,a.useEffect)(()=>{var e;"authenticated"===w&&(null==y?void 0:null===(e=y.user)||void 0===e?void 0:e.role)==="admin"&&v.push("/admin")},[y,w,v]);let j=async t=>{if(t.preventDefault(),!e||!r){p("Please enter both email and password.");return}try{if(b(!0),p(""),(await (0,i.signIn)("credentials",{redirect:!1,email:e,password:r})).error)try{let t=await x.default.post("/api/auth/login",{email:e,password:r});if(t.data.success&&t.data.token){let e=t.data.token;h.default.set("token",e,{expires:7}),localStorage.setItem("token",e),localStorage.setItem("adminToken",e),(await x.default.get("/api/auth/check-admin",{headers:{Authorization:"Bearer ".concat(e)}})).data.isAdmin?v.push("/admin"):(h.default.remove("token"),localStorage.removeItem("adminToken"),p("You do not have admin privileges."),b(!1))}else p("Invalid credentials. Please try again."),b(!1)}catch(e){p("Invalid credentials. Please try again."),b(!1)}else{let e=await fetch("/api/auth/check-admin");(await e.json()).isAdmin?v.push("/admin"):(await (0,i.signIn)("credentials",{redirect:!1,email:"",password:""}),p("You do not have admin privileges."),b(!1))}}catch(e){p("An error occurred during login. Please try again."),b(!1)}};return"loading"===w?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d(),{children:[(0,n.jsx)("title",{children:"Admin Login | K-POP News Portal"}),(0,n.jsx)("meta",{name:"description",content:"Admin login page for K-POP News Portal"})]}),(0,n.jsx)("div",{className:"min-h-screen flex flex-col justify-center items-center bg-gray-100 px-4",children:(0,n.jsxs)("div",{className:"w-full max-w-md",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,n.jsxs)("div",{className:"px-6 py-8",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Admin Portal"}),(0,n.jsx)("p",{className:"text-gray-600 mt-2",children:"Sign in to your admin account"})]}),c&&(0,n.jsxs)("div",{className:"mb-6 flex items-center p-4 border-l-4 border-red-500 bg-red-50 text-red-700 rounded",children:[(0,n.jsx)(u.default,{className:"mr-2 h-5 w-5"}),(0,n.jsx)("p",{children:c})]}),(0,n.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,n.jsx)(m.default,{className:"h-5 w-5 text-gray-400"})}),(0,n.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-black",placeholder:"admin@example.com",value:e,onChange:e=>t(e.target.value)})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,n.jsx)(f.default,{className:"h-5 w-5 text-gray-400"})}),(0,n.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-black",placeholder:"••••••••",value:r,onChange:e=>l(e.target.value)})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",disabled:g,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 text-sm font-medium ".concat(g?"opacity-70 cursor-not-allowed":""),children:g?"Signing in...":"Sign in to Admin"})})]})]}),(0,n.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:(0,n.jsxs)("p",{className:"text-sm text-center text-gray-600",children:["Need an admin account? ",(0,n.jsx)(o(),{href:"/admin/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Register here"})]})})]}),(0,n.jsx)("div",{className:"text-center mt-6",children:(0,n.jsx)(o(),{href:"/",className:"text-sm text-gray-600 hover:text-gray-900",children:"← Back to homepage"})})]})})]})}},31955:function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.r(t),r.d(t,{default:function(){return a}});var a=function e(t,r){function a(e,a,i){if("undefined"!=typeof document){"number"==typeof(i=n({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var l in i)i[l]&&(s+="; "+l,!0!==i[l]&&(s+="="+i[l].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+s}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},a=0;a<r.length;a++){var i=r[a].split("="),s=i.slice(1).join("=");try{var l=decodeURIComponent(i[0]);if(n[l]=t.read(s,l),e===l)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){a(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[1664,1876,7066,2888,9774,179],function(){return e(e.s=46863)}),_N_E=e.O()}]);