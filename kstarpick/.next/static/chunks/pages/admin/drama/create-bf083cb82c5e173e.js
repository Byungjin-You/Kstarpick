(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7991],{79894:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/drama/create",function(){return a(83629)}])},83629:function(e,t,a){"use strict";a.r(t);var r=a(85893),s=a(67294),l=a(2575),n=a(11163),i=a(87066),o=a(5152),d=a.n(o);a(25675);var c=a(82606),m=a(43832),g=a(15928),u=a(70088),x=a(62190),h=a(43283),b=a(71707),p=a(33299),y=a(31955),v=a(74128),f=a(62076),j=a(65972),N=a(79731);a(31304),d()(()=>Promise.all([a.e(9414),a.e(4966)]).then(a.bind(a,14966)),{loadableGenerated:{webpack:()=>[14966]},ssr:!1}),t.default=function(){let e=(0,n.useRouter)(),{data:t,status:a}=(0,p.useSession)(),[o,d]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!1),[C,I]=(0,s.useState)(!1),[D,S]=(0,s.useState)(""),[R,T]=(0,s.useState)(""),[F,A]=(0,s.useState)("basic"),[P,U]=(0,s.useState)({title:"",originalTitle:"",category:"k-drama",coverImage:null,bannerImage:null,summary:"",network:"",status:"ongoing",releaseDate:"",rating:"",runtime:"",ageRating:"",director:"",country:"",tags:[],trailerUrl:"",cast:[],watchProviders:[],videos:[],genres:[],productionCountry:"",content:"",reviews:[],reviewRating:0,reviewCount:0,ratingDistribution:[0,0,0,0,0,0,0,0,0,0]}),[E,L]=(0,s.useState)({}),[O,M]=(0,s.useState)(!1),[_,z]=(0,s.useState)(!1),[B,J]=(0,s.useState)(""),[V,W]=(0,s.useState)(null),[q,G]=(0,s.useState)(null),[K,X]=(0,s.useState)(""),[H,Z]=(0,s.useState)(""),[Q,Y]=(0,s.useState)(""),[$,ee]=(0,s.useState)(""),[et,ea]=(0,s.useState)(!1),[er,es]=(0,s.useState)(""),el=(0,s.useRef)(null),en=(0,s.useRef)(null);(0,s.useRef)(null),(0,s.useEffect)(()=>{(async()=>{try{var r;if("loading"===a)return;if((null==t?void 0:null===(r=t.user)||void 0===r?void 0:r.role)==="admin"){ea(!0);return}let s=y.default.get("token")||localStorage.getItem("token");if(!s){e.push("/admin/login");return}try{(await i.default.get("/api/auth/check-admin",{headers:{Authorization:"Bearer ".concat(s)},withCredentials:!0})).data.isAdmin?(y.default.get("token")||y.default.set("token",s,{expires:7}),ea(!0)):(y.default.remove("token"),localStorage.removeItem("token"),e.push("/admin/login"))}catch(t){y.default.remove("token"),localStorage.removeItem("token"),e.push("/admin/login")}}catch(t){e.push("/admin/login")}})()},[e,t,a]),(0,s.useEffect)(()=>{U({title:"",originalTitle:"",category:"k-drama",coverImage:null,bannerImage:null,summary:"",network:"",status:"ongoing",releaseDate:"",rating:"",runtime:"",ageRating:"",director:"",country:"",tags:[],trailerUrl:"",cast:[],watchProviders:[],videos:[],genres:[],productionCountry:"",content:"",reviews:[],reviewRating:0,reviewCount:0,ratingDistribution:[0,0,0,0,0,0,0,0,0,0]}),L({}),X(""),Z(""),Y(""),ee(""),I(!1)},[e.pathname]),(0,s.useEffect)(()=>{if("true"===e.query.fromCrawler)try{let e=localStorage.getItem("registerDramaData");if(e){let t=JSON.parse(e),a="";if(t.releaseDate)try{let e=new Date(t.releaseDate);if(isNaN(e)){let e=t.releaseDate.match(/([A-Za-z]+)\s+(\d+),\s+(\d{4})/);if(e){let t={January:"01",February:"02",March:"03",April:"04",May:"05",June:"06",July:"07",August:"08",September:"09",October:"10",November:"11",December:"12"}[e[1]]||"01",r=e[2].padStart(2,"0"),s=e[3];a="".concat(s,"-").concat(t,"-").concat(r)}}else a=e.toISOString().split("T")[0]}catch(e){a=""}U(e=>({...e,title:t.title||e.title,originalTitle:t.originalTitle||e.originalTitle,summary:t.summary||e.summary,network:t.network||e.network,status:t.status||e.status,releaseDate:a||e.releaseDate,rating:t.rating||e.rating,runtime:t.runtime||e.runtime,ageRating:t.ageRating||e.ageRating,director:t.director||e.director,country:t.country||e.country,genres:Array.isArray(t.genres)?t.genres:[],category:t.category||e.category})),t.coverImage&&(X(t.coverImage),W(t.coverImage),U(e=>({...e,coverImage:t.coverImage}))),localStorage.removeItem("registerDramaData"),alert("크롤링된 드라마 정보를 불러왔습니다. 정보를 확인하고 필요시 수정 후 등록하세요.")}}catch(e){alert("크롤링된 데이터를 불러오는 중 오류가 발생했습니다.")}},[e.query.fromCrawler]);let ei=e=>{if(e)try{return W(e),U(t=>({...t,coverImage:e})),!0}catch(e){return!1}},eo=e=>{let{name:t,value:a}=e.target;U(e=>({...e,[t]:"rating"===t?parseFloat(a)||"":a})),E[t]&&L(e=>({...e,[t]:null}))},ed=async()=>{if(K)try{if(Y(""),!/^(https?:\/\/)/i.test(K)){Y("Please enter a valid URL starting with http:// or https://");return}if(ei(K));else{let e="/api/proxy?url=".concat(encodeURIComponent(K));W(e),U(e=>({...e,coverImage:K}))}X("")}catch(e){Y("Failed to load image from URL")}},ec=e=>{if(e){if(e.type.startsWith("image/")){if(e.size>5242880){Y("Image file size must be less than 5MB");return}U({...P,coverImage:e}),Y("");let t=new FileReader;t.onloadend=()=>{W(t.result)},t.readAsDataURL(e)}else Y("Please upload an image file")}},em=e=>{if(e){if(e.type.startsWith("image/")){if(e.size>5242880){ee("Image file size must be less than 5MB");return}U({...P,bannerImage:e}),ee("");let t=new FileReader;t.onloadend=()=>{G(t.result)},t.readAsDataURL(e)}else ee("Please upload an image file")}},eg=async t=>{t.preventDefault(),M(!0);try{let t=["title","summary"].filter(e=>!P[e]);if(t.length>0){let e={};t.forEach(t=>{e[t]="".concat(t.charAt(0).toUpperCase()+t.slice(1)," is required")}),L(e),M(!1);return}let a=[];try{Array.isArray(P.cast)?a=P.cast:"string"==typeof P.cast&&(a=JSON.parse(P.cast||"[]"))}catch(e){a=[]}let r=[];try{Array.isArray(P.watchProviders)?r=P.watchProviders:"string"==typeof P.watchProviders&&(r=JSON.parse(P.watchProviders||"[]"))}catch(e){r=[]}let s={title:P.title,originalTitle:P.originalTitle,slug:P.slug,summary:P.summary,content:P.content||P.summary||"",category:"k-drama",status:P.status,releaseDate:P.releaseDate,network:P.network,director:P.director,runtime:P.runtime,country:P.country,ageRating:P.ageRating,trailerUrl:P.trailerUrl,coverImage:P.coverImage||"/images/defaults/drama-cover.jpg",bannerImage:P.bannerImage||"/images/defaults/drama-banner.jpg",cast:a,genres:P.genres,watchProviders:r,reviews:P.reviews||[],reviewRating:P.reviewRating||0,reviewCount:P.reviewCount||0,ratingDistribution:P.ratingDistribution||[0,0,0,0,0,0,0,0,0,0]},l={title:P.title,originalTitle:P.originalTitle,summary:P.summary,status:P.status,releaseDate:P.releaseDate,network:P.network,director:P.director,runtime:P.runtime,country:P.country,ageRating:P.ageRating,rating:P.rating,genre:P.genres,coverImage:P.coverImage||"/images/defaults/drama-cover.jpg",bannerImage:P.bannerImage||"/images/defaults/drama-banner.jpg",trailerUrl:P.trailerUrl,category:"k-drama"};if(!Array.isArray(l.genre)){if("string"==typeof l.genre)try{l.genre.startsWith("[")&&l.genre.endsWith("]")?l.genre=JSON.parse(l.genre):l.genre=[l.genre]}catch(e){l.genre=l.genre?[l.genre]:[]}else l.genre?l.genre=[String(l.genre)]:l.genre=[]}let n=y.default.get("token")||localStorage.getItem("token");try{let[t,a]=await Promise.all([i.default.post("/api/tvfilm",s,{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}),i.default.post("/api/dramas",l,{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}})]);if(t.data.success&&a.data.success)es("TV/Film이 성공적으로 생성되어 드라마 목록에도 표시됩니다"),setTimeout(()=>{e.push("/admin/drama")},2e3);else if(t.data.success)es("TV/Film만 성공적으로 생성되었습니다. 드라마 목록에는 추가되지 않았습니다."),setTimeout(()=>{e.push("/admin/drama")},2e3);else throw Error("데이터 저장에 실패했습니다.")}catch(e){throw e.response,e}}catch(e){e.response&&400===e.response.status&&e.response.data.message?L({general:"제출 오류: ".concat(e.response.data.message)}):L({general:"서버 오류가 발생했습니다. 다시 시도해주세요."})}finally{M(!1)}},eu=e=>{U(t=>({...t,genres:t.genres.filter((t,a)=>a!==e)}))};return"loading"!==a&&et?_?(0,r.jsx)(l.default,{children:(0,r.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[(0,r.jsx)(c.default,{className:"animate-spin mr-2"}),(0,r.jsx)("span",{children:"제출 중..."})]})}):(0,r.jsx)(l.default,{children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Create New TV/Film"}),(0,r.jsx)("div",{className:"flex space-x-2",children:(0,r.jsx)("button",{type:"button",onClick:()=>{I(!C)},className:"flex items-center px-4 py-2 rounded-md transition ".concat(C?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:C?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.default,{className:"w-4 h-4 mr-1"}),"Edit Mode"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.default,{className:"w-4 h-4 mr-1"}),"Preview"]})})})]}),er&&(0,r.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:er}),E.general&&(0,r.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6",role:"alert",children:(0,r.jsx)("p",{children:E.general})}),(0,r.jsxs)("form",{onSubmit:eg,className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("div",{className:"mb-6 border-b border-gray-200 pb-1 overflow-x-auto hide-scrollbar",children:(0,r.jsxs)("nav",{className:"-mb-px flex space-x-6",children:[(0,r.jsx)("button",{type:"button",onClick:()=>A("basic"),className:"pb-3 px-1 font-medium text-sm ".concat("basic"===F?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"),children:"기본 정보"}),(0,r.jsx)("button",{type:"button",onClick:()=>A("media"),className:"pb-3 px-1 font-medium text-sm ".concat("media"===F?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"),children:"이미지"}),(0,r.jsx)("button",{type:"button",onClick:()=>A("cast"),className:"pb-3 px-1 font-medium text-sm ".concat("cast"===F?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"),children:"출연진"}),(0,r.jsx)("button",{type:"button",onClick:()=>A("providers"),className:"pb-3 px-1 font-medium text-sm ".concat("providers"===F?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"),children:"시청 정보"}),(0,r.jsx)("button",{type:"button",onClick:()=>A("videos"),className:"pb-3 px-1 font-medium text-sm ".concat("videos"===F?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"),children:"트레일러 및 비디오"}),(0,r.jsx)("button",{type:"button",onClick:()=>A("info"),className:"pb-3 px-1 font-medium text-sm ".concat("info"===F?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"),children:"정보"}),(0,r.jsx)("button",{type:"button",onClick:()=>A("reviews"),className:"pb-3 px-1 font-medium text-sm ".concat("reviews"===F?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"),children:"리뷰"})]})}),"basic"===F&&(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"title",children:["Title ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",id:"title",name:"title",value:P.title,onChange:eo,className:"w-full px-3 py-2 border rounded-md ".concat(E.title?"border-red-500":"border-gray-300"),placeholder:"Enter TV/Film title",disabled:C}),E.title&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:E.title})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"rating",children:["드라마 평점 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"드라마의 전체적인 평점을 입력하세요 (0-10점)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{let t=2*e;U(e=>({...e,rating:t}))},className:"focus:outline-none",children:(0,r.jsx)(u.default,{className:"w-6 h-6 ".concat(e<=(P.rating?Math.ceil(P.rating/2):0)?"text-yellow-400 fill-yellow-400":"text-gray-300")})},e))}),(0,r.jsx)("input",{type:"number",id:"rating",name:"rating",value:P.rating,onChange:eo,min:"0",max:"10",step:"0.1",className:"w-24 px-3 py-2 border rounded-md ".concat(E.rating?"border-red-500":"border-gray-300"),placeholder:"0-10",disabled:C})]}),E.rating&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:E.rating})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"category",children:["Category ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{id:"category",name:"category",value:P.category,onChange:eo,className:"w-full px-3 py-2 border rounded-md ".concat(E.category?"border-red-500":"border-gray-300"),disabled:C,children:[(0,r.jsx)("option",{value:"",children:"Select a category"}),(0,r.jsx)("option",{value:"drama",children:"K-Drama"}),(0,r.jsx)("option",{value:"movie",children:"Movie"}),(0,r.jsx)("option",{value:"documentary",children:"Documentary"}),(0,r.jsx)("option",{value:"variety",children:"Variety Show"}),(0,r.jsx)("option",{value:"other",children:"Other"})]}),E.category&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:E.category})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"genres",children:"Genres"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:P.genres.length>0?P.genres.map((e,t)=>(0,r.jsxs)("div",{className:"bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full flex items-center text-sm",children:[(0,r.jsx)("span",{children:e}),(0,r.jsx)("button",{type:"button",onClick:()=>eu(t),className:"ml-2 text-indigo-500 hover:text-indigo-700",children:(0,r.jsx)(x.default,{className:"w-3 h-3"})})]},t)):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"No genres selected"})}),!C&&(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:["Romance","Thriller","Comedy","Action","Fantasy","Historical","Medical","Crime","Melodrama","Mystery"].map(e=>(0,r.jsx)("button",{type:"button",className:"px-3 py-2 text-sm rounded-md transition-colors ".concat(P.genres.includes(e)?"bg-indigo-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>{let t=[...P.genres];if(t.includes(e)){let a=t.indexOf(e);t.splice(a,1)}else t.push(e);U(e=>({...e,genres:t}))},children:e},e))})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"originalTitle",children:"Original Title"}),(0,r.jsx)("input",{type:"text",id:"originalTitle",name:"originalTitle",value:P.originalTitle,onChange:eo,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Enter original title (if different from main title)",disabled:C})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"summary",children:["Summary ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("textarea",{id:"summary",name:"summary",value:P.summary,onChange:eo,rows:"3",className:"w-full px-3 py-2 border rounded-md ".concat(E.summary?"border-red-500":"border-gray-300"),placeholder:"Enter a brief summary",disabled:C}),E.summary&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:E.summary})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"status",children:"Status"}),(0,r.jsxs)("select",{id:"status",name:"status",value:P.status,onChange:eo,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:C,children:[(0,r.jsx)("option",{value:"ongoing",children:"방영 중"}),(0,r.jsx)("option",{value:"completed",children:"방영 종료"}),(0,r.jsx)("option",{value:"upcoming",children:"방영 예정"}),(0,r.jsx)("option",{value:"canceled",children:"취소됨"})]})]})]}),"media"===F&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:["Cover Image ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"border-dashed border-2 border-gray-300 p-6 rounded-md mb-3 bg-gray-50 text-center",children:[V?(0,r.jsxs)("div",{className:"relative mb-4",children:[(0,r.jsx)("img",{src:V,alt:"Cover Preview",className:"max-h-48 mx-auto object-contain",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder-tvfilm.svg"}}),!C&&(0,r.jsx)("button",{type:"button",onClick:()=>{U(e=>({...e,coverImage:null})),W(null)},className:"absolute top-0 right-0 bg-red-500 rounded-full p-1 text-white hover:bg-red-600",children:(0,r.jsx)(x.default,{className:"w-4 h-4"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex justify-center items-center mb-3",children:(0,r.jsx)(h.default,{className:"w-12 h-12 text-gray-300"})}),(0,r.jsx)("p",{className:"text-gray-500 mb-3",children:"Drag and drop your cover image here, or click to browse"})]}),!C&&(0,r.jsxs)("div",{className:"flex justify-center ".concat(V?"mt-3":""),onDragOver:e=>{e.preventDefault(),d(!0)},onDragLeave:e=>{e.preventDefault(),d(!1)},onDrop:e=>{e.preventDefault(),d(!1),ec(e.dataTransfer.files[0])},children:[(0,r.jsx)("label",{htmlFor:"coverImage",className:"cursor-pointer bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600",children:V?"Change Cover Image":"Select Image"}),(0,r.jsx)("input",{id:"coverImage",type:"file",accept:"image/*",onChange:e=>{ec(e.target.files[0])},className:"hidden",ref:el})]})]}),!C&&(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Or enter image URL:"}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("input",{type:"text",value:K,onChange:e=>{X(e.target.value),Y("")},placeholder:"https://example.com/image.jpg",className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{type:"button",onClick:ed,className:"bg-blue-500 text-white px-4 py-2 rounded-r-md hover:bg-blue-600",children:"Use URL"})]})]}),E.coverImage&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:E.coverImage}),Q&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:Q}),(0,r.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"This image will be used as the thumbnail in listings and on the detail page. Recommended ratio: 2:3, min size: 500x750px"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Banner Image (메인 배경 이미지)"}),(0,r.jsxs)("div",{className:"border-dashed border-2 border-gray-300 p-6 rounded-md mb-3 bg-gray-50 text-center",children:[q?(0,r.jsxs)("div",{className:"relative mb-4",children:[(0,r.jsx)("img",{src:q,alt:"Banner Preview",className:"max-h-48 w-full mx-auto object-cover",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder-banner.svg"}}),!C&&(0,r.jsx)("button",{type:"button",onClick:()=>{U(e=>({...e,bannerImage:null})),G(null)},className:"absolute top-0 right-0 bg-red-500 rounded-full p-1 text-white hover:bg-red-600",children:(0,r.jsx)(x.default,{className:"w-4 h-4"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex justify-center items-center mb-3",children:(0,r.jsx)(h.default,{className:"w-12 h-12 text-gray-300"})}),(0,r.jsx)("p",{className:"text-gray-500 mb-3",children:"Drag and drop your banner image here, or click to browse"})]}),!C&&(0,r.jsxs)("div",{className:"flex justify-center ".concat(q?"mt-3":""),onDragOver:e=>{e.preventDefault(),k(!0)},onDragLeave:e=>{e.preventDefault(),k(!1)},onDrop:e=>{e.preventDefault(),k(!1),em(e.dataTransfer.files[0])},children:[(0,r.jsx)("label",{htmlFor:"bannerImage",className:"cursor-pointer bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600",children:q?"Change Banner Image":"Select Image"}),(0,r.jsx)("input",{id:"bannerImage",type:"file",accept:"image/*",onChange:e=>{em(e.target.files[0])},className:"hidden",ref:en})]})]}),!C&&(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Or enter image URL:"}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("input",{type:"text",value:H,onChange:e=>Z(e.target.value),placeholder:"https://example.com/banner.jpg",className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{type:"button",onClick:()=>{if(H)try{if(!/^(https?:\/\/)/i.test(H)){ee("Please enter a valid URL starting with http:// or https://");return}let e="/api/proxy?url=".concat(encodeURIComponent(H));U(e=>({...e,bannerImage:H})),G(e),Z(""),ee("")}catch(e){ee("Failed to load image from URL")}},className:"bg-blue-500 text-white px-4 py-2 rounded-r-md hover:bg-blue-600",children:"Use URL"})]})]}),$&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:$}),(0,r.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"This image will be used as the background banner on the detail page. Recommended ratio: 16:9, min size: 1920x1080px"})]})]}),"cast"===F&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Cast"}),(0,r.jsx)(v.default,{value:P.cast,onChange:e=>U(t=>({...t,cast:e})),disabled:C})]})}),"providers"===F&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Watch Providers"}),(0,r.jsx)(f.default,{value:P.watchProviders,onChange:e=>U(t=>({...t,watchProviders:e})),disabled:C})]})}),"videos"===F&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Videos"}),(0,r.jsx)(j.default,{videos:P.videos,onChange:e=>U(t=>({...t,videos:e}))})]})}),"info"===F&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Director"}),(0,r.jsx)("input",{type:"text",name:"director",value:P.director,onChange:eo,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Director's name",disabled:C})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Runtime"}),(0,r.jsx)("input",{type:"text",name:"runtime",value:P.runtime,onChange:eo,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 2시간 30분",disabled:C})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Release Date"}),(0,r.jsx)("input",{type:"date",name:"releaseDate",value:P.releaseDate,onChange:eo,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:C})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Rating"}),(0,r.jsx)("input",{type:"number",name:"rating",value:P.rating,onChange:eo,min:"0",max:"10",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0-10",disabled:C})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Country"}),(0,r.jsx)("input",{type:"text",name:"country",value:P.country,onChange:eo,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., South Korea",disabled:C})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Age Rating"}),(0,r.jsxs)("select",{name:"ageRating",value:P.ageRating,onChange:eo,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:C,children:[(0,r.jsx)("option",{value:"",children:"Select age rating"}),(0,r.jsx)("option",{value:"ALL",children:"ALL"}),(0,r.jsx)("option",{value:"12",children:"12"}),(0,r.jsx)("option",{value:"15",children:"15"}),(0,r.jsx)("option",{value:"18",children:"18"}),(0,r.jsx)("option",{value:"R",children:"R"})]})]})]})]}),"reviews"===F&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"이 콘텐츠에 대한 가상의 사용자 리뷰를 추가할 수 있습니다. 추가된 리뷰는 콘텐츠 상세 페이지에 표시됩니다."}),(0,r.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(b.default,{className:"h-5 w-5 text-yellow-400"})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm text-yellow-700",children:"추가한 리뷰는 콘텐츠가 등록된 이후에 API를 통해 관리할 수 있습니다."})})]})}),(0,r.jsx)(N.default,{reviews:P.reviews,onChange:e=>{if(!Array.isArray(e))return;let t=0,a=[0,0,0,0,0,0,0,0,0,0];e.forEach(e=>{let r=parseInt(e.rating,10);!isNaN(r)&&r>=1&&r<=10&&(t+=r,a[Math.min(Math.max(Math.floor(r)-1,0),9)]++)});let r=e.length>0?t/e.length:0;U(t=>({...t,reviews:e,reviewRating:parseFloat(r.toFixed(1)),reviewCount:e.length,ratingDistribution:a}))},tvfilmId:"temp_id"})]})}),(0,r.jsxs)("div",{className:"flex justify-end mt-8 pt-4 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:()=>e.push("/admin/drama"),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md mr-2 hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:O||C,className:"px-6 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 transition-colors flex items-center ".concat(O||C?"opacity-50 cursor-not-allowed":""),children:O?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.default,{className:"animate-spin w-4 h-4 mr-2"}),"Creating..."]}):"Create TV/Film"})]})]})]})}):(0,r.jsx)(l.default,{children:(0,r.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[(0,r.jsx)(c.default,{className:"animate-spin mr-2"}),(0,r.jsx)("span",{children:"인증 확인 중..."})]})})}}},function(e){e.O(0,[1664,5089,1876,7066,8766,7232,9222,2888,9774,179],function(){return e(e.s=79894)}),_N_E=e.O()}]);