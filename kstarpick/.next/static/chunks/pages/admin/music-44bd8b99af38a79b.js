(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5077],{7321:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/music",function(){return s(47816)}])},2575:function(e,t,s){"use strict";s.r(t);var a=s(85893),l=s(67294),i=s(41664),r=s.n(i),n=s(11163),c=s(33299),d=s(43765),o=s(38361),u=s(2553),m=s(63594),x=s(2287),h=s(89176),p=s(55264),f=s(70095),y=s(77362),g=s(94086),b=s(70088),j=s(70775);t.default=e=>{let{children:t}=e,s=(0,n.useRouter)(),{data:i,status:v}=(0,c.useSession)(),[w,N]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{("unauthenticated"===v||i&&"admin"!==i.user.role)&&s.push("/admin/login")},[i,v,s]),"loading"===v)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,a.jsx)("div",{className:"p-8 bg-white rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-t-[#ff3e8e] rounded-full animate-spin"}),(0,a.jsx)("p",{className:"text-xl font-medium",children:"Loading admin panel..."})]})})}):"unauthenticated"===v||i&&"admin"!==i.user.role?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,a.jsx)("div",{className:"p-8 bg-white rounded-lg shadow-md max-w-md",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4 text-center",children:[(0,a.jsx)(d.default,{size:48,className:"text-red-500"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Unauthorized Access"}),(0,a.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access the admin area."}),(0,a.jsx)(r(),{href:"/",className:"px-4 py-2 mt-4 text-white bg-[#ff3e8e] rounded-md hover:bg-[#e02e7c]",children:"Go to Homepage"})]})})}):(o.default,u.default,m.default,x.default,h.default,p.default,(0,a.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"w-64 min-h-screen bg-white shadow-md",children:[(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"관리자 패널"})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("ul",{className:"space-y-2",children:[(0,a.jsx)("li",{children:(0,a.jsxs)(r(),{href:"/admin",className:"flex items-center px-4 py-2 rounded-lg ".concat("/admin"===s.pathname?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"),children:[(0,a.jsx)(o.default,{className:"mr-3 h-5 w-5"}),"대시보드"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)(r(),{href:"/admin/content",className:"flex items-center px-4 py-2 rounded-lg ".concat(s.pathname.startsWith("/admin/content")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"),children:[(0,a.jsx)(f.default,{className:"mr-3 h-5 w-5"}),"콘텐츠 관리"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)(r(),{href:"/admin/news",className:"flex items-center px-4 py-2 rounded-lg ".concat(s.pathname.startsWith("/admin/news")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"),children:[(0,a.jsx)(y.default,{className:"mr-3 h-5 w-5"}),"뉴스 관리"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)(r(),{href:"/admin/drama",className:"flex items-center px-4 py-2 rounded-lg ".concat(s.pathname.startsWith("/admin/drama")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"),children:[(0,a.jsx)(g.default,{className:"mr-3 h-5 w-5"}),"드라마 관리"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)(r(),{href:"/admin/music",className:"flex items-center px-4 py-2 rounded-lg ".concat(s.pathname.startsWith("/admin/music")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"),children:[(0,a.jsx)(x.default,{className:"mr-3 h-5 w-5"}),"음악 차트 관리"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)(r(),{href:"/admin/celeb",className:"flex items-center px-4 py-2 rounded-lg ".concat(s.pathname.startsWith("/admin/celeb")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"),children:[(0,a.jsx)(b.default,{className:"mr-3 h-5 w-5"}),"셀럽 관리"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)(r(),{href:"/admin/users",className:"flex items-center px-4 py-2 rounded-lg ".concat(s.pathname.startsWith("/admin/users")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"),children:[(0,a.jsx)(h.default,{className:"mr-3 h-5 w-5"}),"사용자 관리"]})})]}),(0,a.jsx)("div",{className:"border-t mt-4 pt-4",children:(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("adminToken"),sessionStorage.removeItem("adminToken"),(0,c.signOut)({callbackUrl:"/"})},className:"flex items-center w-full px-4 py-2 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[(0,a.jsx)(j.default,{className:"mr-3 h-5 w-5"}),"로그아웃"]})})]})]}),(0,a.jsx)("div",{className:"flex-1",children:t})]})}))}},63759:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r},toKebabCase:function(){return i}});var a=s(67294),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{color:n="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:o,children:u,...m}=s;return(0,a.createElement)("svg",{ref:r,...l,width:c,height:c,stroke:n,strokeWidth:o?24*Number(d)/Number(c):d,className:"lucide lucide-".concat(i(e)),...m},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...(Array.isArray(u)?u:[u])||[]])});return s.displayName="".concat(e),s}},43765:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},62634:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},12895:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},61258:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},4307:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},71707:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]])},15928:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2553:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},94086:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Film",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"2.18",ry:"2.18",key:"vury4c"}],["line",{x1:"7",x2:"7",y1:"2",y2:"22",key:"t1e4qh"}],["line",{x1:"17",x2:"17",y1:"2",y2:"22",key:"1tliql"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"2",x2:"7",y1:"7",y2:"7",key:"1wdzzh"}],["line",{x1:"2",x2:"7",y1:"17",y2:"17",key:"2fufxq"}],["line",{x1:"17",x2:"22",y1:"17",y2:"17",key:"1xg577"}],["line",{x1:"17",x2:"22",y1:"7",y2:"7",key:"acrv2l"}]])},38361:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},70095:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]])},60641:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},70775:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},2287:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]])},77362:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]])},96815:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},4270:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},36127:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},55264:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},70088:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},37864:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},89176:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},63594:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]])},62190:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},10857:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});let a=(0,s(63759).default)("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]])},47816:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return z}});var a=s(85893),l=s(67294),i=s(9008),r=s.n(i),n=s(41664),c=s.n(n),d=s(11163),o=s(2575),u=s(4270),m=s(15928),x=s(12895),h=s(2287),p=s(10857),f=s(36127),y=s(62634),g=s(96815),b=s(37864),j=s(61258),v=s(4307),w=s(43765),N=s(62190),k=s(60641);let C=(0,s(63759).default)("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var S=s(71707);function z(){(0,d.useRouter)();let[e,t]=(0,l.useState)([]),[s,i]=(0,l.useState)(!0),[n,z]=(0,l.useState)(null),[T,M]=(0,l.useState)(""),[P,L]=(0,l.useState)(1),[E,_]=(0,l.useState)(1),[V,I]=(0,l.useState)(!1),[U,A]=(0,l.useState)(null),[O]=(0,l.useState)(10),[q,D]=(0,l.useState)([]),[H,F]=(0,l.useState)(!1),[R,W]=(0,l.useState)([]),[J,Z]=(0,l.useState)(!1),[K,Y]=(0,l.useState)(null),[X,B]=(0,l.useState)([]),[G,$]=(0,l.useState)(!1),[Q,ee]=(0,l.useState)({success:0,failed:0}),[et,es]=(0,l.useState)(!1),[ea,el]=(0,l.useState)([]),[ei,er]=(0,l.useState)(!1),[en,ec]=(0,l.useState)(null),[ed,eo]=(0,l.useState)([]),[eu,em]=(0,l.useState)("https://www.youtube.com/playlist?list=OLNY56MxFrczc5CoAvnTCDO_3bAdOLExkJQ"),ex=async()=>{i(!0),z(null);try{let e=await fetch("/api/music?limit=".concat(O,"&page=").concat(P,"&sort=position"),{headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to fetch music data");let s=await e.json();if(s.success){if(!s.musics||0===s.musics.length){t([]),_(1),i(!1);return}let e=s.musics.map(e=>{let t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("number"==typeof e)return e;let s=parseInt(e);return isNaN(s)?t:s},s=t(e.dailyViews||e.dailyview||e.dailyView,Math.round(.02*t(e.views))),a=t(e.position,99),l=t(e.previousPosition,a);return{...e,dailyViews:s,position:a,previousPosition:l,totalViews:t(e.totalViews||e.views)}});t(e),_(Math.ceil(s.totalItems/O)||1)}else throw Error(s.message||"Failed to fetch music data")}catch(s){z("음악 데이터를 가져오는 중 오류가 발생했습니다.");let e=ep();t(e),_(Math.ceil(e.length/O))}finally{i(!1)}};(0,l.useEffect)(()=>{ex()},[P]);let eh=e=>{L(e)},ep=()=>Array(10).fill(0).map((e,t)=>({_id:"dummy-".concat(t+1),title:"K-POP Song ".concat(t+1),artist:"Artist ".concat(t+1),position:t+1,previousPosition:t+2,youtubeUrl:"https://www.youtube.com/watch?v=example",thumbnailUrl:"https://i.ytimg.com/vi/example/default.jpg",dailyViews:"".concat(Math.floor(1e5*Math.random())),totalViews:"".concat(Math.floor(1e7*Math.random())),releaseDate:new Date(Date.now()-1e10*Math.random()).toISOString()})),ef=async e=>{try{if(!(await fetch("/api/music/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw Error("음악 삭제에 실패했습니다.");t(t=>t.filter(t=>t._id!==e)),I(!1),A(null)}catch(e){z("음악 삭제 중 오류가 발생했습니다.")}},ey=async(t,s)=>{try{let a=e.find(e=>e._id===t);if(!a)return;if(!(await fetch("/api/music/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,position:s,previousPosition:a.position})})).ok)throw Error("포지션 업데이트에 실패했습니다.");ex()}catch(e){z("포지션 업데이트 중 오류가 발생했습니다.")}},eg=(t,s)=>{let a=e.findIndex(e=>e._id===t);-1!==a&&(e[a],"up"===s&&a>0?ey(t,e[a-1].position):"down"===s&&a<e.length-1&&ey(t,e[a+1].position))},eb=e=>{if(!e)return"";let t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"})},ej=async()=>{i(!0),z(null);try{let e=await fetch("/api/music/fix-positions",{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();if(!e.ok)throw Error(t.message||"position 필드 수정에 실패했습니다.");setTimeout(()=>{ex()},3e3),alert("".concat(t.updates.length,"개의 음악 레코드가 일일 조회수 기준으로 정렬되었습니다. 3초 후 최신 데이터로 갱신됩니다."))}catch(e){z("음악 순위 데이터 업데이트 중 오류가 발생했습니다."),i(!1)}},ev=async()=>{if(0!==e.length){i(!0),z(null);try{let s=[...e].sort((e,t)=>{let s=e.dailyViews||0;return(t.dailyViews||0)-s}).map((e,t)=>{let s=t+1;return{...e,position:s,previousPosition:e.position||s}});t(s);let a=s.map(e=>fetch("/api/music/".concat(e._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({position:e.position,previousPosition:e.previousPosition})})),l=await Promise.allSettled(a),i=l.filter(e=>"fulfilled"===e.status).length,r=l.filter(e=>"rejected"===e.status).length;r>0&&z("".concat(i,"개 항목 저장 성공, ").concat(r,"개 항목 저장 실패")),alert("".concat(i,"개 항목 순위 정렬 완료 및 저장됨").concat(r>0?", ".concat(r,"개 항목 저장 실패"):"")),setTimeout(()=>{ex()},1e3)}catch(e){z("순위 정렬 중 오류가 발생했습니다.")}finally{i(!1)}}},ew=async()=>{i(!0),z(null);try{var e;let t=localStorage.getItem("adminToken")||localStorage.getItem("token")||sessionStorage.getItem("adminToken"),s=await fetch("/api/music/update-views",{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}),a=await s.json();if(!s.ok)throw Error(a.message||"조회수 업데이트에 실패했습니다.");let l=[...a.updates.map(e=>e.id),...(null===(e=a.positionUpdates)||void 0===e?void 0:e.map(e=>e.id))||[]];D([...new Set(l)]),setTimeout(()=>{ex()},1e3),setTimeout(()=>{D([])},5e3),alert(a.message||"".concat(a.updates.length,"개 음악의 조회수와 순위가 업데이트되었습니다."))}catch(e){z("조회수 업데이트 중 오류가 발생했습니다.")}finally{i(!1)}},eN=async()=>{Z(!0),Y(null);try{let e=await fetch("/api/youtube/trending-music",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!e.ok)throw await e.text(),Error("서버 오류 (".concat(e.status,"): ").concat(e.statusText));let t=await e.json();if(t.success)W(t.data);else throw Error(t.message||"데이터를 가져오는데 실패했습니다")}catch(e){Y("오류 발생: ".concat(e.message))}finally{Z(!1)}},ek=e=>{B(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},eC=async()=>{er(!0),ec(null);try{let e=await fetch("/api/youtube/weekly-videos",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({playlistUrl:eu})});if(!e.ok)throw await e.text(),Error("서버 오류 (".concat(e.status,"): ").concat(e.statusText));let t=await e.json();if(t.success)el(t.data);else throw Error(t.message||"데이터를 가져오는데 실패했습니다")}catch(e){ec("오류 발생: ".concat(e.message))}finally{er(!1)}},eS=e=>{eo(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ez=async()=>{if(0===ed.length)return;$(!0);let e=0,t=0;try{for(let s of ed){let a=ea.find(e=>e.videoId===s);if(!a)continue;let l={title:a.title,artist:a.channelTitle,releaseDate:a.publishedAt,youtubeUrl:a.youtubeUrl,coverImage:a.thumbnailUrl,totalViews:a.viewCount,dailyViews:Math.round(.01*a.viewCount),likes:a.likeCount,genre:["kpop"],position:999,previousPosition:999};(await fetch("/api/music",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok?e++:t++}ee({success:e,failed:t}),e>0&&await ex(),eo([])}catch(e){ec(e.message)}finally{$(!1)}},eT=async()=>{if(0===X.length)return;$(!0);let e=0,t=0;try{for(let s of X){let a=R.find(e=>e.videoId===s);if(!a)continue;let l={title:a.title,artist:a.channelTitle,releaseDate:a.publishedAt,youtubeUrl:a.youtubeUrl,coverImage:a.thumbnailUrl,totalViews:a.viewCount,dailyViews:Math.round(.01*a.viewCount),likes:a.likeCount,genre:["kpop"],position:999,previousPosition:999};(await fetch("/api/music",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok?e++:t++}ee({success:e,failed:t}),e>0&&await ex(),B([])}catch(e){Y(e.message)}finally{$(!1)}};return(0,a.jsxs)(o.default,{children:[(0,a.jsx)(r(),{children:(0,a.jsx)("title",{children:"음악 차트 관리 | 관리자"})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"음악 차트 관리"}),(0,a.jsx)("p",{className:"text-gray-500",children:"K-POP 차트에 표시될 음악을 관리합니다"}),n&&(0,a.jsx)("p",{className:"text-red-500 mt-2",children:n})]}),(0,a.jsxs)("div",{className:"mt-4 md:mt-0 flex flex-wrap gap-2",children:[(0,a.jsxs)(c(),{href:"/admin/music/new",className:"inline-flex items-center px-4 py-2 bg-[#ff3e8e] text-white rounded-lg hover:bg-[#e02e7c] transition-colors",children:[(0,a.jsx)(u.default,{size:18,className:"mr-2"}),"새 음악 등록"]}),(0,a.jsxs)("button",{onClick:ej,className:"inline-flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[(0,a.jsx)(m.default,{size:18,className:"mr-2"}),"순위 데이터 수정"]}),(0,a.jsxs)("button",{onClick:ev,className:"inline-flex items-center px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[(0,a.jsx)(x.default,{size:18,className:"mr-2"}),"강제 순위 정렬"]}),(0,a.jsxs)("button",{onClick:ew,className:"inline-flex items-center px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[(0,a.jsx)(h.default,{size:18,className:"mr-2"}),"조회수 및 순위 업데이트"]}),(0,a.jsxs)("button",{onClick:()=>{F(!0),eN()},className:"inline-flex items-center px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:[(0,a.jsx)(p.default,{size:18,className:"mr-2"}),"유튜브 인기 급상승"]}),(0,a.jsxs)("button",{onClick:()=>{es(!0),eC()},className:"inline-flex items-center px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:[(0,a.jsx)(p.default,{size:18,className:"mr-2"}),"이번주 유튜브 인기 영상"]})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm mb-6 p-4",children:(0,a.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),!T.trim()){ex();return}t(e.filter(e=>e.title.toLowerCase().includes(T.toLowerCase())||e.artist.toLowerCase().includes(T.toLowerCase())))},className:"flex w-full md:w-auto",children:[(0,a.jsxs)("div",{className:"relative flex-grow md:w-64",children:[(0,a.jsx)("input",{type:"text",placeholder:"노래 제목 또는 아티스트 검색",value:T,onChange:e=>M(e.target.value),className:"w-full bg-gray-50 border border-gray-200 rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#ff3e8e]/50 focus:border-[#ff3e8e]"}),(0,a.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:(0,a.jsx)(f.default,{size:18})})]}),(0,a.jsx)("button",{type:"submit",className:"ml-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"검색"}),(0,a.jsx)("button",{type:"button",onClick:()=>{M(""),ex()},className:"ml-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"초기화"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm mb-6 w-full",children:(0,a.jsx)("div",{className:"overflow-x-auto w-full",children:(0,a.jsxs)("table",{className:"w-full divide-y divide-gray-200 table-fixed",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"순위"}),(0,a.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"음악 정보"}),(0,a.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell w-32",children:"일일 조회수"}),(0,a.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell w-32",children:"총 조회수"}),(0,a.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell w-32",children:"발매일"}),(0,a.jsx)("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-44",children:"관리"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"6",className:"px-4 py-4 text-center",children:(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-500"})})})}):n?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"6",className:"px-4 py-4 text-center text-red-500",children:n})}):e.length>0?e.map(t=>{var s,l,i;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-800",children:"number"==typeof t.position?t.position:"?"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"number"==typeof t.previousPosition&&"number"==typeof t.position&&t.previousPosition!==t.position?t.previousPosition>t.position?(0,a.jsxs)("span",{className:"text-green-500 flex items-center justify-center",children:[(0,a.jsx)(x.default,{size:12,className:"mr-1"}),t.previousPosition-t.position]}):(0,a.jsxs)("span",{className:"text-red-500 flex items-center justify-center",children:[(0,a.jsx)(y.default,{size:12,className:"mr-1"}),t.position-t.previousPosition]}):(0,a.jsx)("span",{className:"text-gray-400",children:"-"})})]}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gray-200 overflow-hidden flex-shrink-0",children:t.coverImage?(0,a.jsx)("img",{src:t.coverImage,alt:t.title,className:"h-12 w-12 object-cover",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder.jpg"}}):(0,a.jsx)("div",{className:"h-12 w-12 flex items-center justify-center bg-gray-200 text-gray-400",children:(0,a.jsx)(h.default,{size:20})})}),(0,a.jsxs)("div",{className:"ml-4 max-w-[280px]",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:t.title}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:t.artist})]})]})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 hidden md:table-cell",children:(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("span",{className:"transition-all duration-500 ".concat(q.includes(t._id)?"text-purple-600 font-bold animate-pulse":"hover:text-purple-600 hover:font-medium"),children:(null===(s=t.dailyViews)||void 0===s?void 0:s.toLocaleString())||"0"})})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 hidden md:table-cell",children:(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("span",{className:"transition-all duration-500 ".concat(q.includes(t._id)?"text-purple-600 font-bold animate-pulse":"hover:text-purple-600 hover:font-medium"),children:(null===(l=t.totalViews)||void 0===l?void 0:l.toLocaleString())||(null===(i=t.views)||void 0===i?void 0:i.toLocaleString())||"0"})})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 hidden md:table-cell",children:eb(t.releaseDate)}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>eg(t._id,"up"),className:"text-blue-500 hover:text-blue-700 p-1",disabled:1===t.position,children:(0,a.jsx)(x.default,{size:18,className:1===t.position?"text-gray-300":""})}),(0,a.jsx)("button",{onClick:()=>eg(t._id,"down"),className:"text-blue-500 hover:text-blue-700 p-1",disabled:t.position===e.length,children:(0,a.jsx)(y.default,{size:18,className:t.position===e.length?"text-gray-300":""})}),(0,a.jsx)("a",{href:t.youtubeUrl,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-gray-700 p-1",children:(0,a.jsx)(m.default,{size:18})}),(0,a.jsx)(c(),{href:"/admin/music/edit/".concat(t._id),className:"text-blue-500 hover:text-blue-700 p-1",children:(0,a.jsx)(g.default,{size:18})}),(0,a.jsx)("button",{onClick:()=>{A(t._id),I(!0)},className:"text-red-500 hover:text-red-700 p-1",children:(0,a.jsx)(b.default,{size:18})})]})})]},t._id)}):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"6",className:"px-4 py-4 text-center",children:"등록된 음악이 없습니다."})})})]})})}),(0,a.jsxs)("div",{className:"mt-4 flex justify-center items-center",children:[(0,a.jsx)("button",{onClick:()=>eh(P-1),disabled:1===P,className:"px-3 py-1 rounded-md mr-2 ".concat(1===P?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"),children:(0,a.jsx)(j.default,{size:18})}),(0,a.jsx)("div",{className:"flex space-x-1",children:Array.from({length:Math.min(5,E)},(e,t)=>{let s=P<=3?t+1:P+t-2>E?E-4+t:P-2+t;return s>0&&s<=E?(0,a.jsx)("button",{onClick:()=>eh(s),className:"px-3 py-1 rounded-md ".concat(P===s?"bg-blue-500 text-white font-bold":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:s},s):null})}),(0,a.jsx)("button",{onClick:()=>eh(P+1),disabled:P===E,className:"px-3 py-1 rounded-md ml-2 ".concat(P===E?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"),children:(0,a.jsx)(v.default,{size:18})}),(0,a.jsx)("span",{className:"ml-4 text-sm text-gray-500",children:E>0?"".concat(P," / ").concat(E," 페이지"):"데이터 없음"})]})]}),V&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,a.jsx)("div",{className:"fixed inset-0 transition-opacity",onClick:()=>I(!1),children:(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,a.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,a.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,a.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,a.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:(0,a.jsx)(w.default,{size:24,className:"text-red-600"})}),(0,a.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"음악 삭제"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"이 음악을 정말 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."})})]})]})}),(0,a.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,a.jsx)("button",{type:"button",onClick:()=>ef(U),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"삭제"}),(0,a.jsx)("button",{type:"button",onClick:()=>I(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"취소"})]})]})]})}),H&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,a.jsx)("div",{className:"fixed inset-0 transition-opacity",onClick:()=>F(!1),children:(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,a.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[(0,a.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[(0,a.jsx)(p.default,{size:20,className:"mr-2 text-red-500"}),"유튜브 인기 급상승 음악"]}),(0,a.jsx)("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-gray-500 transition-colors",children:(0,a.jsx)(N.default,{size:24})})]}),K&&(0,a.jsx)("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4",children:K}),J?(0,a.jsxs)("div",{className:"flex justify-center py-8",children:[(0,a.jsx)(k.default,{size:32,className:"animate-spin text-red-500"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"인기 급상승 음악을 가져오는 중..."})]}):0===R.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"인기 급상승 음악을 찾을 수 없습니다"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["총 ",R.length,"개의 인기 급상승 음악을 찾았습니다"]})}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:eT,disabled:0===X.length||G,className:"inline-flex items-center px-4 py-2 rounded-lg ".concat(0===X.length||G?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"," transition-colors"),children:G?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.default,{size:18,className:"mr-2 animate-spin"}),"임포트 중..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C,{size:18,className:"mr-2"}),"선택한 ",X.length,"개 임포트"]})})})]}),Q.success>0&&(0,a.jsxs)("div",{className:"mb-4 bg-green-50 text-green-600 p-3 rounded-lg",children:[Q.success,"개 음악이 성공적으로 임포트되었습니다.",Q.failed>0&&" (".concat(Q.failed,"개 실패)")]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 max-h-[600px] overflow-y-auto p-2",children:R.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden cursor-pointer transition-all ".concat(X.includes(e.videoId)?"border-green-400 bg-green-50 transform scale-[1.02] shadow-md":"border-gray-200 hover:border-gray-300 hover:shadow"),onClick:()=>ek(e.videoId),children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e.thumbnailUrl,alt:e.title,className:"w-full aspect-video object-cover",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder.jpg"}}),(0,a.jsxs)("div",{className:"absolute bottom-0 right-0 bg-black/70 text-white text-xs px-2 py-1 m-2 rounded",children:[e.viewCount.toLocaleString()," 조회"]}),X.includes(e.videoId)&&(0,a.jsx)("div",{className:"absolute top-2 right-2 bg-green-500 text-white rounded-full p-1",children:(0,a.jsx)(C,{size:18})})]}),(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800 line-clamp-2 mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.channelTitle}),(0,a.jsxs)("div",{className:"mt-2 flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.publishedAt).toLocaleDateString()}),(0,a.jsx)("a",{href:e.youtubeUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"text-red-500 hover:text-red-600",children:(0,a.jsx)(p.default,{size:16})})]})]})]},e.videoId))})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:(0,a.jsx)("button",{type:"button",onClick:()=>F(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"닫기"})})]})]})}),et&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,a.jsx)("div",{className:"fixed inset-0 transition-opacity",onClick:()=>es(!1),children:(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,a.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full",children:[(0,a.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"이번주 유튜브 인기 영상"}),(0,a.jsx)("button",{onClick:()=>es(!1),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(N.default,{size:24})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"플레이리스트 URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:eu,onChange:e=>em(e.target.value),placeholder:"YouTube 플레이리스트 URL을 입력하세요",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm"}),(0,a.jsx)("button",{onClick:eC,disabled:ei,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50",children:ei?"로딩...":"가져오기"})]})]}),en&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:en}),ei?(0,a.jsxs)("div",{className:"flex justify-center items-center h-32",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"}),(0,a.jsx)("span",{className:"ml-2",children:"플레이리스트 영상을 가져오는 중..."})]}):ea.length>0?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["총 ",ea.length,"개의 영상이 있습니다. 임포트할 영상을 선택하세요."]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>eo(ea.map(e=>e.videoId)),className:"px-3 py-1 text-xs bg-gray-500 text-white rounded hover:bg-gray-600",children:"전체 선택"}),(0,a.jsx)("button",{onClick:()=>eo([]),className:"px-3 py-1 text-xs bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"선택 해제"})]})]}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded",children:ea.map(e=>{var t,s;return(0,a.jsxs)("div",{className:"flex items-center p-3 border-b border-gray-100 hover:bg-gray-50",children:[(0,a.jsx)("input",{type:"checkbox",checked:ed.includes(e.videoId),onChange:()=>eS(e.videoId),className:"mr-3"}),(0,a.jsx)("img",{src:e.thumbnailUrl,alt:e.title,className:"w-20 h-14 object-cover rounded mr-3"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.channelTitle}),(0,a.jsxs)("div",{className:"flex gap-4 text-xs text-gray-400 mt-1",children:[(0,a.jsxs)("span",{children:["조회수: ",null===(t=e.viewCount)||void 0===t?void 0:t.toLocaleString()]}),(0,a.jsxs)("span",{children:["좋아요: ",null===(s=e.likeCount)||void 0===s?void 0:s.toLocaleString()]})]})]}),(0,a.jsx)("a",{href:e.youtubeUrl,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-500 hover:text-blue-700",children:(0,a.jsx)(S.default,{size:16})})]},e.videoId)})})]}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"플레이리스트 URL을 입력하고 '가져오기' 버튼을 클릭하세요."})]}),(0,a.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[ed.length>0&&(0,a.jsx)("button",{onClick:ez,disabled:G,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-orange-500 text-base font-medium text-white hover:bg-orange-600 disabled:opacity-50 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm",children:G?"임포트 중...":"선택된 ".concat(ed.length,"개 임포트")}),(0,a.jsx)("button",{type:"button",onClick:()=>es(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"닫기"})]})]})]})})]})}}},function(e){e.O(0,[1664,2888,9774,179],function(){return e(e.s=7321)}),_N_E=e.O()}]);