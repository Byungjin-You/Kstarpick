(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8298],{59197:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/tvfilm/create",function(){return a(16347)}])},16347:function(e,t,a){"use strict";a.r(t);var r=a(85893),s=a(67294),l=a(2575),n=a(11163),i=a(87066),o=a(5152),d=a.n(o);a(25675);var c=a(82606),m=a(43832),u=a(15928),g=a(62190),x=a(43283),b=a(71707),h=a(33299),p=a(31955),v=a(74128),y=a(62076),f=a(65972),j=a(79731),N=a(31304),w=a.n(N);d()(()=>Promise.all([a.e(9414),a.e(4966)]).then(a.bind(a,14966)),{loadableGenerated:{webpack:()=>[14966]},ssr:!1}),t.default=function(){let e=(0,n.useRouter)(),{data:t,status:a}=(0,h.useSession)(),[o,d]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1),[C,I]=(0,s.useState)(!1),[S,D]=(0,s.useState)(""),[R,T]=(0,s.useState)(""),[F,U]=(0,s.useState)("basic"),[P,E]=(0,s.useState)({title:"",originalTitle:"",category:"drama",coverImage:null,bannerImage:null,summary:"",network:"",status:"ongoing",releaseDate:new Date().toISOString().split("T")[0],rating:"",runtime:"",ageRating:"",director:"",country:"",tags:[],trailerUrl:"",cast:[],watchProviders:[],videos:[],genres:[],productionCountry:"",content:"",reviews:[],reviewRating:0,reviewCount:0,ratingDistribution:[0,0,0,0,0,0,0,0,0,0]}),[L,A]=(0,s.useState)({}),[O,_]=(0,s.useState)(!1),[M,z]=(0,s.useState)(!1),[B,W]=(0,s.useState)(""),[V,G]=(0,s.useState)(null),[K,X]=(0,s.useState)(null),[q,H]=(0,s.useState)(""),[J,Q]=(0,s.useState)(""),[Y,Z]=(0,s.useState)(""),[$,ee]=(0,s.useState)(""),[et,ea]=(0,s.useState)(!1),[er,es]=(0,s.useState)(""),el=(0,s.useRef)(null),en=(0,s.useRef)(null);(0,s.useRef)(null),(0,s.useEffect)(()=>{(async()=>{try{var r;if("loading"===a)return;if((null==t?void 0:null===(r=t.user)||void 0===r?void 0:r.role)==="admin"){ea(!0);return}let s=p.default.get("token")||localStorage.getItem("token");if(!s){e.push("/admin/login");return}try{(await i.default.get("/api/auth/check-admin",{headers:{Authorization:"Bearer ".concat(s)},withCredentials:!0})).data.isAdmin?(p.default.get("token")||p.default.set("token",s,{expires:7}),ea(!0)):(p.default.remove("token"),localStorage.removeItem("token"),e.push("/admin/login"))}catch(t){p.default.remove("token"),localStorage.removeItem("token"),e.push("/admin/login")}}catch(t){e.push("/admin/login")}})()},[e,t,a]),(0,s.useEffect)(()=>{E({title:"",originalTitle:"",category:"drama",coverImage:null,bannerImage:null,summary:"",network:"",status:"ongoing",releaseDate:new Date().toISOString().split("T")[0],rating:"",runtime:"",ageRating:"",director:"",country:"",tags:[],trailerUrl:"",cast:[],watchProviders:[],videos:[],genres:[],productionCountry:"",content:"",reviews:[],reviewRating:0,reviewCount:0,ratingDistribution:[0,0,0,0,0,0,0,0,0,0]}),A({}),H(""),Q(""),Z(""),ee(""),I(!1)},[e.pathname]);let ei=e=>{let{name:t,value:a}=e.target;"category"===t&&"movie"===a?E(e=>({...e,[t]:a,status:"completed"})):E(e=>({...e,[t]:a})),L[t]&&A(e=>({...e,[t]:null}))},eo=async()=>{if(q)try{if(Z(""),!/^(https?:\/\/)/i.test(q)){Z("Please enter a valid URL starting with http:// or https://");return}let e="/api/proxy?url=".concat(encodeURIComponent(q));G(e),E(e=>({...e,coverImage:q})),H("")}catch(e){Z("Failed to load image from URL")}},ed=e=>{if(e){if(e.type.startsWith("image/")){if(e.size>5242880){Z("Image file size must be less than 5MB");return}E({...P,coverImage:e}),Z("");let t=new FileReader;t.onloadend=()=>{G(t.result)},t.readAsDataURL(e)}else Z("Please upload an image file")}},ec=e=>{if(e){if(e.type.startsWith("image/")){if(e.size>5242880){ee("Image file size must be less than 5MB");return}E({...P,bannerImage:e}),ee("");let t=new FileReader;t.onloadend=()=>{X(t.result)},t.readAsDataURL(e)}else ee("Please upload an image file")}},em=async a=>{a.preventDefault(),_(!0),A({});let r={};if(P.title||(r.title="제목을 입력해주세요."),P.category||(r.category="카테고리를 선택해주세요."),P.summary||(r.summary="요약을 입력해주세요."),P.coverImage||V||(r.coverImage="커버 이미지를 업로드해주세요."),Object.keys(r).length>0){A(r),_(!1),A({submit:"필수 필드를 모두 입력해주세요."});return}A({}),es(""),z(!0);try{var s;let a;let r=p.default.get("token")||localStorage.getItem("token");if(!r)throw Error("인증 토큰이 없습니다. 관리자 계정으로 로그인해주세요.");let l=null;if(null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.id)l=t.user.id;else try{let e=function(e){if(!e)return null;try{let t;let a=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return t=decodeURIComponent(window.atob(a).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join("")),JSON.parse(t)}catch(e){return null}}(r);(null==e?void 0:e.id)?l=e.id:(null==e?void 0:e.userId)?l=e.userId:(null==e?void 0:e.sub)&&(l=e.sub)}catch(e){}l||(l="6405c9f09a99517bc4d03be2");try{if(!(a=w()(P.title,{lower:!0,strict:!0,locale:"ko"}))||""===a.trim()){let e=Math.random().toString(36).substring(2,10);a="tvfilm-".concat(e)}}catch(t){let e=new Date().getTime();a="tvfilm-".concat(e)}let n=P.coverImage;"string"!=typeof n||n.startsWith("/")||n.startsWith("http")||(n="/images/placeholder-tvfilm.svg");let o={title:P.title,originalTitle:P.originalTitle||"",slug:a,category:P.category,summary:P.summary,content:P.summary,status:"movie"===P.category?"completed":P.status||"ongoing",releaseDate:P.releaseDate||new Date().toISOString().split("T")[0],country:P.country||"",runtime:P.runtime||"",ageRating:P.ageRating||"",director:P.director||"",trailerUrl:P.trailerUrl||"",tags:P.tags||[],genres:P.genres||[],cast:P.cast||[],watchProviders:P.watchProviders||[],videos:P.videos||[],reviews:P.reviews||[],reviewRating:P.reviewRating||0,reviewCount:P.reviewCount||0,ratingDistribution:P.ratingDistribution||[0,0,0,0,0,0,0,0,0,0],author:l,lang:"ko",featured:!1,views:0,likes:0};if(P.coverImage instanceof File){let e=new FormData;e.append("file",P.coverImage);try{let t=await i.default.post("/api/upload",e,{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"}});if(t.data.success)o.coverImage=t.data.fileUrl;else throw Error("Cover image upload failed")}catch(e){o.coverImage="/images/placeholder-tvfilm.svg"}}else"string"==typeof P.coverImage&&P.coverImage?o.coverImage=P.coverImage:V?o.coverImage=V.startsWith("data:")?"/images/placeholder-tvfilm.svg":V:o.coverImage="/images/placeholder-tvfilm.svg";if(P.bannerImage instanceof File){let e=new FormData;e.append("file",P.bannerImage);try{let t=await i.default.post("/api/upload",e,{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"}});t.data.success&&(o.bannerImage=t.data.fileUrl)}catch(e){}}else"string"==typeof P.bannerImage&&P.bannerImage?o.bannerImage=P.bannerImage:K&&(o.bannerImage=K.startsWith("data:")?"/images/placeholder-banner.jpg":K);try{let t=await i.default.post("/api/tvfilm",o,{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});if(t.data.success)es('TV/Film "'.concat(t.data.data.title,'"이(가) 성공적으로 생성되었습니다')),setTimeout(()=>{e.push("/admin/tvfilm")},2e3);else throw Error(t.data.message||"Unknown error occurred")}catch(e){e.response?400===e.response.status?A({submit:"입력 데이터 오류: ".concat(e.response.data.message||"입력 데이터를 확인해주세요")}):401===e.response.status?A({submit:"인증이 필요합니다. 다시 로그인해주세요."}):403===e.response.status?A({submit:"이 작업을 수행할 권한이 없습니다."}):A({submit:"서버 오류 (".concat(e.response.status,"): ").concat(e.response.data.message||"알 수 없는 오류가 발생했습니다")}):e.request?A({submit:"서버로부터 응답이 없습니다. 네트워크 연결을 확인해주세요."}):A({submit:"요청 오류: ".concat(e.message)})}finally{_(!1),z(!1)}}catch(e){A({submit:e.message||"폼 제출 중 오류가 발생했습니다."}),_(!1),z(!1)}},eu=e=>{E(t=>({...t,genres:t.genres.filter((t,a)=>a!==e)}))};return"loading"!==a&&et?M?(0,r.jsx)(l.default,{children:(0,r.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[(0,r.jsx)(c.default,{className:"animate-spin mr-2"}),(0,r.jsx)("span",{children:"제출 중..."})]})}):(0,r.jsx)(l.default,{children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Create New TV/Film"}),(0,r.jsx)("div",{className:"flex space-x-2",children:(0,r.jsx)("button",{type:"button",onClick:()=>{I(!C)},className:"flex items-center px-4 py-2 rounded-md transition ".concat(C?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:C?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.default,{className:"w-4 h-4 mr-1"}),"Edit Mode"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.default,{className:"w-4 h-4 mr-1"}),"Preview"]})})})]}),er&&(0,r.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:er}),L.general&&(0,r.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6",role:"alert",children:(0,r.jsx)("p",{children:L.general})}),(0,r.jsxs)("form",{onSubmit:e=>{em(e)},className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("div",{className:"mb-6 border-b border-gray-200 pb-1 overflow-x-auto hide-scrollbar",children:(0,r.jsxs)("nav",{className:"-mb-px flex space-x-6",children:[(0,r.jsx)("button",{type:"button",onClick:()=>U("basic"),className:"pb-3 px-1 font-medium text-sm ".concat("basic"===F?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"),children:"기본 정보"}),(0,r.jsx)("button",{type:"button",onClick:()=>U("media"),className:"pb-3 px-1 font-medium text-sm ".concat("media"===F?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"),children:"이미지"}),(0,r.jsx)("button",{type:"button",onClick:()=>U("cast"),className:"pb-3 px-1 font-medium text-sm ".concat("cast"===F?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"),children:"출연진"}),(0,r.jsx)("button",{type:"button",onClick:()=>U("providers"),className:"pb-3 px-1 font-medium text-sm ".concat("providers"===F?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"),children:"시청 정보"}),(0,r.jsx)("button",{type:"button",onClick:()=>U("videos"),className:"pb-3 px-1 font-medium text-sm ".concat("videos"===F?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"),children:"트레일러 및 비디오"}),(0,r.jsx)("button",{type:"button",onClick:()=>U("info"),className:"pb-3 px-1 font-medium text-sm ".concat("info"===F?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"),children:"정보"}),(0,r.jsx)("button",{type:"button",onClick:()=>U("reviews"),className:"pb-3 px-1 font-medium text-sm ".concat("reviews"===F?"border-b-2 border-pink-500 text-pink-600":"text-gray-500 hover:text-gray-700 hover:border-b-2 hover:border-gray-300"),children:"리뷰"})]})}),"basic"===F&&(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"title",children:["Title ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",id:"title",name:"title",value:P.title,onChange:ei,className:"w-full px-3 py-2 border rounded-md ".concat(L.title?"border-red-500":"border-gray-300"),placeholder:"Enter TV/Film title",disabled:C}),L.title&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:L.title})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"category",children:["Category ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{id:"category",name:"category",value:P.category,onChange:ei,className:"w-full px-3 py-2 border rounded-md ".concat(L.category?"border-red-500":"border-gray-300"),disabled:C,children:[(0,r.jsx)("option",{value:"",children:"Select a category"}),(0,r.jsx)("option",{value:"drama",children:"K-Drama"}),(0,r.jsx)("option",{value:"movie",children:"Movie"}),(0,r.jsx)("option",{value:"documentary",children:"Documentary"}),(0,r.jsx)("option",{value:"variety",children:"Variety Show"}),(0,r.jsx)("option",{value:"other",children:"Other"})]}),L.category&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:L.category})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"genres",children:"Genres"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:P.genres.length>0?P.genres.map((e,t)=>(0,r.jsxs)("div",{className:"bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full flex items-center text-sm",children:[(0,r.jsx)("span",{children:e}),(0,r.jsx)("button",{type:"button",onClick:()=>eu(t),className:"ml-2 text-indigo-500 hover:text-indigo-700",children:(0,r.jsx)(g.default,{className:"w-3 h-3"})})]},t)):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"No genres selected"})}),!C&&(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2",children:["Romance","Thriller","Comedy","Action","Fantasy","Historical","Medical","Crime","Melodrama","Mystery"].map(e=>(0,r.jsx)("button",{type:"button",className:"px-3 py-2 text-sm rounded-md transition-colors ".concat(P.genres.includes(e)?"bg-indigo-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>{let t=[...P.genres];if(t.includes(e)){let a=t.indexOf(e);t.splice(a,1)}else t.push(e);E(e=>({...e,genres:t}))},children:e},e))})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"originalTitle",children:"Original Title"}),(0,r.jsx)("input",{type:"text",id:"originalTitle",name:"originalTitle",value:P.originalTitle,onChange:ei,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Enter original title (if different from main title)",disabled:C})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"summary",children:["Summary ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("textarea",{id:"summary",name:"summary",value:P.summary,onChange:ei,rows:"3",className:"w-full px-3 py-2 border rounded-md ".concat(L.summary?"border-red-500":"border-gray-300"),placeholder:"Enter a brief summary",disabled:C}),L.summary&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:L.summary})]}),"movie"!==P.category&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"status",children:"Status"}),(0,r.jsxs)("select",{id:"status",name:"status",value:P.status,onChange:ei,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:C,children:[(0,r.jsx)("option",{value:"ongoing",children:"방영 중"}),(0,r.jsx)("option",{value:"completed",children:"방영 종료"}),(0,r.jsx)("option",{value:"upcoming",children:"방영 예정"}),(0,r.jsx)("option",{value:"canceled",children:"취소됨"})]})]})]}),"media"===F&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:["Cover Image ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"border-dashed border-2 border-gray-300 p-6 rounded-md mb-3 bg-gray-50 text-center",children:[V?(0,r.jsxs)("div",{className:"relative mb-4",children:[(0,r.jsx)("img",{src:V,alt:"Cover Preview",className:"max-h-48 mx-auto object-contain",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder-tvfilm.svg"}}),!C&&(0,r.jsx)("button",{type:"button",onClick:()=>{E(e=>({...e,coverImage:null})),G(null)},className:"absolute top-0 right-0 bg-red-500 rounded-full p-1 text-white hover:bg-red-600",children:(0,r.jsx)(g.default,{className:"w-4 h-4"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex justify-center items-center mb-3",children:(0,r.jsx)(x.default,{className:"w-12 h-12 text-gray-300"})}),(0,r.jsx)("p",{className:"text-gray-500 mb-3",children:"Drag and drop your cover image here, or click to browse"})]}),!C&&(0,r.jsxs)("div",{className:"flex justify-center ".concat(V?"mt-3":""),onDragOver:e=>{e.preventDefault(),d(!0)},onDragLeave:e=>{e.preventDefault(),d(!1)},onDrop:e=>{e.preventDefault(),d(!1),ed(e.dataTransfer.files[0])},children:[(0,r.jsx)("label",{htmlFor:"coverImage",className:"cursor-pointer bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600",children:V?"Change Cover Image":"Select Image"}),(0,r.jsx)("input",{id:"coverImage",type:"file",accept:"image/*",onChange:e=>{ed(e.target.files[0])},className:"hidden",ref:el})]})]}),!C&&(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Or enter image URL:"}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("input",{type:"text",value:q,onChange:e=>{H(e.target.value),Z("")},placeholder:"https://example.com/image.jpg",className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{type:"button",onClick:eo,className:"bg-blue-500 text-white px-4 py-2 rounded-r-md hover:bg-blue-600",children:"Use URL"})]})]}),L.coverImage&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:L.coverImage}),Y&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:Y}),(0,r.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"This image will be used as the thumbnail in listings and on the detail page. Recommended ratio: 2:3, min size: 500x750px"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Banner Image (메인 배경 이미지)"}),(0,r.jsxs)("div",{className:"border-dashed border-2 border-gray-300 p-6 rounded-md mb-3 bg-gray-50 text-center",children:[K?(0,r.jsxs)("div",{className:"relative mb-4",children:[(0,r.jsx)("img",{src:K,alt:"Banner Preview",className:"max-h-48 w-full mx-auto object-cover",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder-banner.svg"}}),!C&&(0,r.jsx)("button",{type:"button",onClick:()=>{E(e=>({...e,bannerImage:null})),X(null)},className:"absolute top-0 right-0 bg-red-500 rounded-full p-1 text-white hover:bg-red-600",children:(0,r.jsx)(g.default,{className:"w-4 h-4"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex justify-center items-center mb-3",children:(0,r.jsx)(x.default,{className:"w-12 h-12 text-gray-300"})}),(0,r.jsx)("p",{className:"text-gray-500 mb-3",children:"Drag and drop your banner image here, or click to browse"})]}),!C&&(0,r.jsxs)("div",{className:"flex justify-center ".concat(K?"mt-3":""),onDragOver:e=>{e.preventDefault(),k(!0)},onDragLeave:e=>{e.preventDefault(),k(!1)},onDrop:e=>{e.preventDefault(),k(!1),ec(e.dataTransfer.files[0])},children:[(0,r.jsx)("label",{htmlFor:"bannerImage",className:"cursor-pointer bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600",children:K?"Change Banner Image":"Select Image"}),(0,r.jsx)("input",{id:"bannerImage",type:"file",accept:"image/*",onChange:e=>{ec(e.target.files[0])},className:"hidden",ref:en})]})]}),!C&&(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Or enter image URL:"}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("input",{type:"text",value:J,onChange:e=>Q(e.target.value),placeholder:"https://example.com/banner.jpg",className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{type:"button",onClick:()=>{if(J)try{if(!/^(https?:\/\/)/i.test(J)){ee("Please enter a valid URL starting with http:// or https://");return}let e="/api/proxy?url=".concat(encodeURIComponent(J));E(e=>({...e,bannerImage:J})),X(e),Q(""),ee("")}catch(e){ee("Failed to load image from URL")}},className:"bg-blue-500 text-white px-4 py-2 rounded-r-md hover:bg-blue-600",children:"Use URL"})]})]}),$&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:$}),(0,r.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"This image will be used as the background banner on the detail page. Recommended ratio: 16:9, min size: 1920x1080px"})]})]}),"cast"===F&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Cast"}),(0,r.jsx)(v.default,{value:P.cast,onChange:e=>E(t=>({...t,cast:e})),disabled:C})]})}),"providers"===F&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Watch Providers"}),(0,r.jsx)(y.default,{value:P.watchProviders,onChange:e=>E(t=>({...t,watchProviders:e})),disabled:C})]})}),"videos"===F&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Videos"}),(0,r.jsx)(f.default,{videos:P.videos,onChange:e=>E(t=>({...t,videos:e}))})]})}),"info"===F&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Director"}),(0,r.jsx)("input",{type:"text",name:"director",value:P.director,onChange:ei,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Director's name",disabled:C})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Runtime"}),(0,r.jsx)("input",{type:"text",name:"runtime",value:P.runtime,onChange:ei,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 2시간 30분",disabled:C})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Release Date"}),(0,r.jsx)("input",{type:"date",name:"releaseDate",value:P.releaseDate,onChange:ei,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:C})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Rating"}),(0,r.jsx)("input",{type:"number",name:"rating",value:P.rating,onChange:ei,min:"0",max:"10",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0-10",disabled:C})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Country"}),(0,r.jsx)("input",{type:"text",name:"country",value:P.country,onChange:ei,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., South Korea",disabled:C})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Age Rating"}),(0,r.jsxs)("select",{name:"ageRating",value:P.ageRating,onChange:ei,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:C,children:[(0,r.jsx)("option",{value:"",children:"Select age rating"}),(0,r.jsx)("option",{value:"ALL",children:"ALL"}),(0,r.jsx)("option",{value:"12",children:"12"}),(0,r.jsx)("option",{value:"15",children:"15"}),(0,r.jsx)("option",{value:"18",children:"18"}),(0,r.jsx)("option",{value:"R",children:"R"})]})]})]})]}),"reviews"===F&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"이 콘텐츠에 대한 가상의 사용자 리뷰를 추가할 수 있습니다. 추가된 리뷰는 콘텐츠 상세 페이지에 표시됩니다."}),(0,r.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(b.default,{className:"h-5 w-5 text-yellow-400"})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm text-yellow-700",children:"추가한 리뷰는 콘텐츠가 등록된 이후에 API를 통해 관리할 수 있습니다."})})]})}),(0,r.jsx)(j.default,{reviews:P.reviews,onChange:e=>{if(!Array.isArray(e))return;let t=0,a=[0,0,0,0,0,0,0,0,0,0];e.forEach(e=>{let r=parseInt(e.rating,10);!isNaN(r)&&r>=1&&r<=10&&(t+=r,a[Math.min(Math.max(Math.floor(r)-1,0),9)]++)});let r=e.length>0?t/e.length:0;E(t=>({...t,reviews:e,reviewRating:parseFloat(r.toFixed(1)),reviewCount:e.length,ratingDistribution:a}))},tvfilmId:"temp_id"})]})}),L.submit&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:L.submit}),(0,r.jsxs)("div",{className:"flex justify-end mt-8 pt-4 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:()=>e.push("/admin/tvfilm"),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md mr-2 hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:O||C,className:"px-6 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 transition-colors flex items-center ".concat(O||C?"opacity-50 cursor-not-allowed":""),onClick:e=>{},children:O?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.default,{className:"animate-spin w-4 h-4 mr-2"}),"Creating..."]}):"Create TV/Film"})]})]})]})}):(0,r.jsx)(l.default,{children:(0,r.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[(0,r.jsx)(c.default,{className:"animate-spin mr-2"}),(0,r.jsx)("span",{children:"인증 확인 중..."})]})})}}},function(e){e.O(0,[1664,5089,1876,7066,8766,2576,9222,2888,9774,179],function(){return e(e.s=59197)}),_N_E=e.O()}]);