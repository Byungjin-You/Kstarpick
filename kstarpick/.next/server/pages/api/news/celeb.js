"use strict";(()=>{var e={};e.id=8530,e.ids=[8530],e.modules={38013:e=>{e.exports=require("mongodb")},20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},56249:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"hoist",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},12087:(e,t,n)=>{n.r(t),n.d(t,{config:()=>l,default:()=>u,routeModule:()=>d});var o={};n.r(o),n.d(o,{default:()=>c});var i=n(71802),r=n(47153),a=n(56249),s=n(38013);async function c(e,t){let n;if("GET"!==e.method)return t.status(405).json({message:"Method not allowed"});try{n=new s.MongoClient("mongodb://kstarpick:zpdltmxkvlr0%212@kstarpick-mongodb-production.cluster-cjquemysifmm.ap-northeast-2.docdb.amazonaws.com:27017/kstarpick?retryWrites=false&authSource=admin&authMechanism=SCRAM-SHA-1",{retryWrites:!1,connectTimeoutMS:3e4,socketTimeoutMS:45e3,serverSelectionTimeoutMS:3e4,authSource:"admin",authMechanism:"SCRAM-SHA-1"}),await n.connect();let o=n.db("kstarpick"),{page:i=1,limit:r=12}=e.query,a=parseInt(i,10),c=parseInt(r,10),u=(a-1)*c,l={$and:[{category:{$regex:"^(celeb|variety)$",$options:"i"}},{$or:[{title:{$exists:!0,$ne:"",$ne:null}},{title:{$exists:!1}}]},{$or:[{content:{$exists:!1}},{content:{$ne:"<p>상세 기사를 가져오는 중 오류가 발생했습니다. 원본 페이지를 방문해 주세요.</p>"}},{content:{$not:{$regex:"^<p>상세 기사를 가져오는 중 오류가 발생했습니다"}}}]}]},d=await o.collection("news").countDocuments(l),p=await o.collection("news").find(l).sort({createdAt:-1}).skip(u).limit(c).toArray(),m=p.findIndex(e=>e.title&&e.title.includes("OH MY GIRL Members Renew Contracts"));return -1!==m&&p.slice(m+1).length,t.status(200).json({success:!0,data:p,pagination:{total:d,page:a,limit:c,totalPages:Math.ceil(d/c)}})}catch(e){return t.status(500).json({success:!1,message:e.message})}finally{n&&await n.close()}}let u=(0,a.hoist)(o,"default"),l=(0,a.hoist)(o,"config"),d=new i.PagesAPIRouteModule({definition:{kind:r.RouteKind.PAGES_API,page:"/api/news/celeb",pathname:"/api/news/celeb",bundlePath:"",filename:""},userland:o})},47153:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouteKind",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))},71802:(e,t,n)=>{e.exports=n(20145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var n=t(t.s=12087);module.exports=n})();