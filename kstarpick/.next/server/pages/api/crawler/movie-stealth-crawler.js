"use strict";(()=>{var t={};t.id=5583,t.ids=[5583],t.modules={25142:t=>{t.exports=require("dotenv")},38013:t=>{t.exports=require("mongodb")},60614:t=>{t.exports=require("next-auth/jwt")},41649:t=>{t.exports=require("next-auth/react")},20145:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},19828:t=>{t.exports=require("puppeteer-extra")},43199:t=>{t.exports=require("puppeteer-extra-plugin-stealth")},92048:t=>{t.exports=require("fs")},55315:t=>{t.exports=require("path")},20295:t=>{t.exports=import("cheerio")},56249:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"hoist",{enumerable:!0,get:function(){return function t(e,i){return i in e?e[i]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,i)):"function"==typeof e&&"default"===i?e:void 0}}})},28890:(t,e,i)=>{i.a(t,async(t,r)=>{try{i.r(e),i.d(e,{config:()=>m,default:()=>d,routeModule:()=>c});var a=i(71802),l=i(47153),n=i(56249),o=i(89683),s=t([o]);o=(s.then?(await s)():s)[0];let d=(0,n.hoist)(o,"default"),m=(0,n.hoist)(o,"config"),c=new a.PagesAPIRouteModule({definition:{kind:l.RouteKind.PAGES_API,page:"/api/crawler/movie-stealth-crawler",pathname:"/api/crawler/movie-stealth-crawler",bundlePath:"",filename:""},userland:o});r()}catch(t){r(t)}})},89683:(t,e,i)=>{i.a(t,async(t,r)=>{try{let p;i.r(e),i.d(e,{default:()=>m}),i(41649);var a=i(19828),l=i.n(a),n=i(43199),o=i.n(n),s=i(20295);i(35968),i(60614);var d=t([s]);s=(d.then?(await d)():d)[0],l().use(o()());let f=t=>new Promise(e=>setTimeout(e,t)),g=()=>{let t=Math.floor(1500*Math.random())+500;return new Promise(e=>setTimeout(e,t))};async function m(t,e){if("POST"!==t.method)return e.status(405).json({message:"허용되지 않는 요청 방식입니다."});try{let{url:i,mode:r}=t.body;if(!i)return e.status(400).json({message:"URL이 필요합니다."});if("list"===r){let t=await c(i);return e.status(200).json({message:"영화 목록 크롤링 성공",data:t})}if("detail"!==r)return e.status(400).json({message:"유효한 모드가 아닙니다: list 또는 detail을 지정하세요."});{let t=await h(i);return e.status(200).json({message:"영화 상세 정보 크롤링 성공",data:t})}}catch(t){return e.status(500).json({message:"서버 오류가 발생했습니다.",error:t.message})}}async function c(t){try{p=await l().launch({headless:"new",args:["--no-sandbox","--disable-setuid-sandbox","--disable-infobars","--window-position=0,0","--ignore-certificate-errors","--ignore-certificate-errors-spki-list","--disable-dev-shm-usage"],ignoreHTTPSErrors:!0,defaultViewport:{width:1920,height:1080}});let e=await p.newPage();await e.evaluateOnNewDocument(()=>{Object.defineProperty(navigator,"webdriver",{get:()=>!1}),window.navigator.chrome={runtime:{}},Object.defineProperty(navigator,"plugins",{get:()=>[{0:{type:"application/x-google-chrome-pdf",suffixes:"pdf",description:"Portable Document Format",enabledPlugin:Plugin},description:"Portable Document Format",filename:"internal-pdf-viewer",length:1,name:"Chrome PDF Plugin"},{0:{type:"application/pdf",suffixes:"pdf",description:"",enabledPlugin:Plugin},description:"",filename:"mhjfbmdgcfjbbpaeojofohoefgiehjai",length:1,name:"Chrome PDF Viewer"}]})}),await e.goto(t,{waitUntil:"domcontentloaded",timeout:6e4}),await g(),await e.evaluate(async()=>{let t=document.body.scrollHeight,e=window.innerHeight,i=0;for(;i<t;){let t=Math.floor(300*Math.random())+100;if(i+=t,window.scrollTo(0,i),await new Promise(t=>setTimeout(t,Math.floor(300*Math.random())+300)),Math.random()>.8&&i>e){let t=Math.floor(100*Math.random())+50;i-=t,window.scrollTo(0,i),await new Promise(t=>setTimeout(t,Math.floor(200*Math.random())+100))}}});let i=await e.content();if(!i||i.length<1e3)throw Error("HTML이 비어있거나 너무 짧습니다. 크롤링에 실패했습니다.");let r=s.load(i),a=r('div[id^="mdl-"]'),n=[],o=null;a.each((t,e)=>{let i=r(e).attr("id").replace("mdl-",""),a=r(e).find("h6.text-primary.title a");if(!a.length)return;let l=a.text().trim(),o="https://mydramalist.com"+a.attr("href"),s=r(e).find("span.text-muted"),d=(s.length?s.text().trim():"").split(" - "),m=null;if(d[1]){let t=d[1].match(/(\d{4})/);t&&(m=parseInt(t[1],10))}let c=r(e).find("img.img-responsive"),h=c.length?c.attr("src"):null,u=r(e).find("span.score"),p=null;if(u.length){let t=u.text().trim();t&&!isNaN(parseFloat(t))&&(p=parseFloat(t))}n.push({id:i,title:l,url:o,image:h,category:"movie",year:m,rating:p})});let d=r("ul.pagination li.next:not(.disabled) a");if(d.length){let t=d.attr("href");t&&(o="https://mydramalist.com"+t)}return{movies:n,nextPage:o}}catch(t){return{success:!1,message:"영화 목록 크롤링 중 오류가 발생했습니다.",error:t.message}}finally{p&&await p.close()}}async function h(t){try{p=await l().launch({headless:"new",args:["--no-sandbox","--disable-setuid-sandbox","--disable-infobars","--window-position=0,0","--ignore-certificate-errors","--ignore-certificate-errors-spki-list","--disable-dev-shm-usage"],ignoreHTTPSErrors:!0,defaultViewport:{width:1920,height:1080}});let e=await p.newPage();await e.evaluateOnNewDocument(()=>{Object.defineProperty(navigator,"webdriver",{get:()=>!1}),window.navigator.chrome={runtime:{}},Object.defineProperty(navigator,"plugins",{get:()=>[{0:{type:"application/x-google-chrome-pdf",suffixes:"pdf",description:"Portable Document Format",enabledPlugin:Plugin},description:"Portable Document Format",filename:"internal-pdf-viewer",length:1,name:"Chrome PDF Plugin"},{0:{type:"application/pdf",suffixes:"pdf",description:"",enabledPlugin:Plugin},description:"",filename:"mhjfbmdgcfjbbpaeojofohoefgiehjai",length:1,name:"Chrome PDF Viewer"}]})}),await e.goto(t,{waitUntil:"domcontentloaded",timeout:6e4}),await g(),await e.evaluate(async()=>{let t=document.body.scrollHeight,e=window.innerHeight,i=0;for(;i<t;){let t=Math.floor(300*Math.random())+100;if(i+=t,window.scrollTo(0,i),await new Promise(t=>setTimeout(t,Math.floor(300*Math.random())+300)),Math.random()>.8&&i>e){let t=Math.floor(100*Math.random())+50;i-=t,window.scrollTo(0,i),await new Promise(t=>setTimeout(t,Math.floor(200*Math.random())+100))}}});let i=await e.content();if(!i||i.length<1e3)throw Error("HTML이 비어있거나 너무 짧습니다. 크롤링에 실패했습니다.");let r=s.load(i),a=r("h1.film-title").text().trim(),n={};n.title=a,n.category="movie";let o=r('.show-detailsxss li.list-item:contains("Native Title:")');if(o.length){let t=o.find("a").text().trim();n.originalTitle=t||null}else{let t=r("p.mdl-aka span.mdl-md-not-hidden");n.originalTitle=t.length?t.text().trim():null}let d=r('.show-detailsxss li.list-item:contains("Also Known As:")');if(d.length){let t=[];d.find("a").each((e,i)=>{let a=r(i).text().trim();a&&t.push(a)}),n.alternativeTitles=t}let m=t=>{if(!t)return!1;let e=/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(t),i=/[a-zA-Z]/.test(t);return!e&&i};if(m(n.title))n.englishTitle=n.title;else if(n.alternativeTitles&&n.alternativeTitles.length>0){let t=n.alternativeTitles.find(t=>m(t));t&&(n.englishTitle=t)}if(!n.englishTitle){let t=n.title.match(/\(([^)]+)\)/);t&&t[1]&&m(t[1])&&(n.englishTitle=t[1].trim())}let c=r('.show-detailsxss li.list-item:contains("Director:")');if(c.length){let t=[];c.find("a.text-primary").each((e,i)=>{let a=r(i).text().trim();a&&t.push(a)});let e=t.join(", ");n.director=e||null}let h=r(".show-detailsxss li.list-item.show-genres");if(h.length){let t=[];h.find("a.text-primary").each((e,i)=>{let a=r(i).text().trim();a&&t.push(a)}),n.genres=t}let w=r(".show-detailsxss li.list-item.show-tags");if(w.length){let t=[];w.find("a.text-primary").each((e,i)=>{let a=r(i).text().trim();a&&t.push(a)}),n.tags=t}r(".show-detailsxss ul.list li.list-item").each((t,e)=>{let i=r(e).find("b.inline");if(!i.length)return;let a=i.text().trim().replace(":",""),l=r(e).text().replace(i.text(),"").trim();if("Country"===a)n.country=l.replace(/\s*\i[^\i]*$/,"").trim();else if("Release Date"===a){n.releaseDate=l;let t=l.match(/(\d{4})/);t&&(n.year=parseInt(t[1],10))}else"Duration"===a?(n.duration=l,n.runtime=l):"Content Rating"===a&&(n.contentRating=l,n.ageRating=l)});let x=r(".show-synopsis p");if(x.length){let t=x.find("span").first().text().trim().replace(/\s*\(Source:.*?\)$/,"").trim();n.synopsis=t||null,n.summary=t||null}let b=r(".col-film-rating .box");if(b.length){let t=b.text().trim();n.rating=parseFloat(t)||0}let y=r('.hfs:contains("# of Watchers:")');if(y.length){let t=y.find("b").text().trim();n.watchers=parseInt(t.replace(/,/g,""),10)||0}let v=r('.hfs:contains("Reviews:")');if(v.length){let t=v.find("a").text().trim(),e=parseInt(t.replace(/[^0-9]/g,""),10)||0;n.reviewCount=e}let P=r("div.film-cover img.img-responsive");if(P.length)n.poster=P.attr("src")||null;else{let t=r("div.box-body img.img-responsive");n.poster=t.length?t.attr("src"):null}try{let t=r(".film-detail").attr("style");if(t){let e=t.match(/background-image:url\(['"]?([^'"]+)['"]?\)/i);e&&e[1]&&(n.bannerImage=e[1])}if(!n.bannerImage){let t=r(".film-banner img");t.length&&(n.bannerImage=t.attr("src"))}if(!n.bannerImage){let t=r(".film-cover img.img-responsive");t.length&&(n.bannerImage=t.attr("src"))}if(!n.bannerImage){let t=r(".film-header-image, .film-cover");if(t.length){let e=t.css("background-image")||t.attr("style")?.match(/background-image:url\(['"]?([^'"]+)['"]?\)/i)?.[1];e&&(n.bannerImage=e.replace(/^url\(['"]?|['"]?\)$/g,""))}}!n.bannerImage&&n.poster&&(n.bannerImage=n.poster)}catch(t){}n.cast={mainRoles:[],supportRoles:[]},r("div.box-body ul.list li").each((t,e)=>{let i=r(e).find("a.text-primary");if(!i.length)return;let a=i.text().trim(),l="https://mydramalist.com"+i.attr("href"),o=r(e).find("div.text-muted small"),s=o.length?o.text().trim():"",d=r(e).find("img.img-responsive"),m=d.length?d.attr("src"):null,c=r(e).find("small.text-muted"),h="Main Role";if(c.length){let t=c.text().trim();"Support Role"===t&&(h="Support Role")}let u={name:a,role:s,url:l,image:m,roleType:h};"Main Role"===h?n.cast.mainRoles.push(u):n.cast.supportRoles.push(u)});let M=`${t}/cast`;await e.goto(M,{waitUntil:"domcontentloaded",timeout:6e4}),await g(),await e.evaluate(async()=>{let t=document.body.scrollHeight,e=window.innerHeight,i=0;for(;i<t;){let t=Math.floor(200*Math.random())+100;if(i+=t,window.scrollTo(0,i),await new Promise(t=>setTimeout(t,Math.floor(300*Math.random())+300)),Math.random()>.8&&i>e){let t=Math.floor(100*Math.random())+50;i-=t,window.scrollTo(0,i),await new Promise(t=>setTimeout(t,Math.floor(200*Math.random())+100))}Math.random()>.9&&await new Promise(t=>setTimeout(t,Math.floor(500*Math.random())+500))}await new Promise(t=>setTimeout(t,Math.floor(300*Math.random())+500)),window.scrollTo(0,t-(Math.floor(200*Math.random())+100))}),await f(Math.floor(500*Math.random())+500);let T=await e.content();if(T&&T.length>1e3){let t=s.load(T),e={directors:[],producers:[],writers:[],mainCast:[],supportCast:[],guestCast:[],others:[]};t('div.box-body h3.header:contains("Director")').each((i,r)=>{t(r).nextAll("ul.list").first().find("li.list-item").each((i,r)=>{let a=t(r).find("a.text-primary");if(!a.length)return;let l=a.find("b").text().trim();if(!l)return;let n="https://mydramalist.com"+a.attr("href"),o=t(r).find("img.img-responsive"),s=o.length?o.attr("src"):null;e.directors.push({name:l,role:"Director",url:n,image:s})})}),0===e.directors.length&&t('div.box div.box-header:contains("Directors")').closest("div.box").find("table.cast-table tbody tr").each((i,r)=>{let a=t(r).find("td.cast-profile a");if(!a.length)return;let l=a.find("b").text().trim();if(!l)return;let n="https://mydramalist.com"+a.attr("href"),o=t(r).find("img.img-responsive"),s=o.length?o.attr("src"):null;e.directors.push({name:l,role:"Director",url:n,image:s})}),t('div.box-body h3.header:contains("Main Role")').each((i,r)=>{t(r).nextAll("ul.list").first().find("li.list-item").each((i,r)=>{let a=t(r).find("a.text-primary");if(!a.length)return;let l=a.find("b").text().trim();if(!l)return;let n="https://mydramalist.com"+a.attr("href"),o=t(r).find("img.img-responsive"),s=o.length?o.attr("src"):null,d=t(r).find("small[title]"),m=d.length?d.text().trim():"",c=t(r).find("small.text-muted"),h=c.length?c.text().trim():"Main Role";e.mainCast.push({name:l,role:m,roleType:h,url:n,image:s})})}),0===e.mainCast.length&&t('div.box[id="main-content"] div.col-lg-8 div.box-body table.cast-table tbody tr').each((i,r)=>{let a=t(r).find("td.cast-profile a");if(!a.length)return;let l=a.find("b").text().trim();if(!l)return;let n="https://mydramalist.com"+a.attr("href"),o=t(r).find("img.img-responsive"),s=o.length?o.attr("src"):null,d=t(r).find("td.cast-role a"),m=d.length?d.text().trim():"",c=t(r).find("span.badge").text().trim();e.mainCast.push({name:l,role:m,roleType:c,url:n,image:s})}),t('div.box-body h3.header:contains("Support Role")').each((i,r)=>{let a=t(r).next(),l=!0;for(;l&&a.length;)a.is("ul.list")?(a.find("li.list-item").each((i,r)=>{let a=t(r).find("a.text-primary");if(!a.length)return;let l=a.find("b").text().trim();if(!l)return;let n="https://mydramalist.com"+a.attr("href"),o=t(r).find("img.img-responsive"),s=o.length?o.attr("src"):null,d=t(r).find("small[title]"),m=d.length?d.text().trim():"",c=t(r).find("small.text-muted"),h=c.length?c.text().trim():"Support Role";e.supportCast.push({name:l,role:m,roleType:h,url:n,image:s})}),a=a.next()):a.is("h3.header")?l=!1:a=a.next()}),(0===e.supportCast.length||e.supportCast.length<7)&&t("li.list-item").each((i,r)=>{let a=e.mainCast.map(t=>t.name).concat(e.supportCast.map(t=>t.name)),l=t(r).find("small.text-muted");if(l.length&&"Support Role"===l.text().trim()){let i=t(r).find("a.text-primary");if(!i.length)return;let l=i.find("b").text().trim();if(!l||a.includes(l))return;let n="https://mydramalist.com"+i.attr("href"),o=t(r).find("img.img-responsive"),s=o.length?o.attr("src"):null,d=t(r).find("small[title]"),m=d.length?d.text().trim():"";e.supportCast.push({name:l,role:m,roleType:"Support Role",url:n,image:s})}}),0===e.supportCast.length&&t('div.box[id="supporting-content"] div.col-lg-8 div.box-body table.cast-table tbody tr').each((i,r)=>{let a=t(r).find("td.cast-profile a");if(!a.length)return;let l=a.find("b").text().trim();if(!l)return;let n="https://mydramalist.com"+a.attr("href"),o=t(r).find("img.img-responsive"),s=o.length?o.attr("src"):null,d=t(r).find("td.cast-role a"),m=d.length?d.text().trim():"",c=t(r).find("span.badge").text().trim();e.supportCast.push({name:l,role:m,roleType:c,url:n,image:s})}),t('div.box-body h3.header:contains("Bit part"), div.box-body h3.header:contains("Guest")').each((i,r)=>{t(r).nextAll("ul.list").first().find("li.list-item").each((i,r)=>{let a=t(r).find("a.text-primary");if(!a.length)return;let l=a.find("b").text().trim();if(!l)return;let n="https://mydramalist.com"+a.attr("href"),o=t(r).find("img.img-responsive"),s=o.length?o.attr("src"):null,d=t(r).find("small[title]"),m=d.length?d.text().trim():"",c=t(r).find("small.text-muted"),h=c.length?c.text().trim():"Bit part";e.guestCast.push({name:l,role:m,roleType:h,url:n,image:s})})}),t('div.box-body h3.header:contains("Screenwriter"), div.box-body h3.header:contains("Writer")').each((i,r)=>{t(r).nextAll("ul.list").first().find("li.list-item").each((i,r)=>{let a=t(r).find("a.text-primary");if(!a.length)return;let l=a.find("b").text().trim();if(!l)return;let n="https://mydramalist.com"+a.attr("href"),o=t(r).find("img.img-responsive"),s=o.length?o.attr("src"):null;e.writers.push({name:l,role:"Screenwriter",url:n,image:s})})}),0===e.writers.length&&t('div.box div.box-header:contains("Screenwriters")').closest("div.box").find("table.cast-table tbody tr").each((i,r)=>{let a=t(r).find("td.cast-profile a");if(!a.length)return;let l=a.find("b").text().trim();if(!l)return;let n="https://mydramalist.com"+a.attr("href"),o=t(r).find("img.img-responsive"),s=o.length?o.attr("src"):null;e.writers.push({name:l,role:"Screenwriter",url:n,image:s})}),t('div.box-body h3.header:contains("Producer")').each((i,r)=>{t(r).nextAll("ul.list").first().find("li.list-item").each((i,r)=>{let a=t(r).find("a.text-primary");if(!a.length)return;let l=a.find("b").text().trim();if(!l)return;let n="https://mydramalist.com"+a.attr("href"),o=t(r).find("img.img-responsive"),s=o.length?o.attr("src"):null;e.producers.push({name:l,role:"Producer",url:n,image:s})})}),0===e.producers.length&&t('div.box div.box-header:contains("Producers")').closest("div.box").find("table.cast-table tbody tr").each((i,r)=>{let a=t(r).find("td.cast-profile a");if(!a.length)return;let l=a.find("b").text().trim();if(!l)return;let n="https://mydramalist.com"+a.attr("href"),o=t(r).find("img.img-responsive"),s=o.length?o.attr("src"):null;e.producers.push({name:l,role:"Producer",url:n,image:s})}),n.credits=e,n.cast.mainRoles=e.mainCast.length>0?e.mainCast:n.cast.mainRoles,n.cast.supportRoles=e.supportCast.length>0?e.supportCast:n.cast.supportRoles,n.cast={mainRoles:n.cast.mainRoles,supportRoles:n.cast.supportRoles},n.director=e.directors.map(t=>t.name).join(", "),n.writers=e.writers.map(t=>t.name).join(", "),n.producers=e.producers.map(t=>t.name).join(", ")}let C=[];r("div.box-body dl.dl-horizontal dt").each((t,e)=>{r(e).text().trim().toLowerCase().includes("director")&&r(e).next("dd").find("a").each((t,e)=>{let i=r(e).text().trim();i&&C.push(i)})});let j=[];r("div.box-body dl.dl-horizontal dt").each((t,e)=>{let i=r(e).text().trim();(i.toLowerCase().includes("screenwriter")||i.toLowerCase().includes("writer"))&&r(e).next("dd").find("a").each((t,e)=>{let i=r(e).text().trim();i&&j.push(i)})}),n.mainDirector=C.length>0?C[0]:"",n.directorsFromMain=C.join(", "),n.writersFromMain=j.join(", "),n.credits?(C.length>0&&0===n.credits.directors.length?C.forEach(t=>{n.credits.directors.push({name:t,role:"Director",url:"",image:""})}):0===C.length&&n.credits.directors.length>0?n.director=n.credits.directors.map(t=>t.name).join(", "):C.length>0&&n.credits.directors.length>0&&(n.director=n.credits.directors.map(t=>t.name).join(", ")),j.length>0&&0===n.credits.writers.length?j.forEach(t=>{n.credits.writers.push({name:t,role:"Screenwriter",url:"",image:""})}):0===j.length&&n.credits.writers.length>0?n.writers=n.credits.writers.map(t=>t.name).join(", "):j.length>0&&n.credits.writers.length>0&&(n.writers=n.credits.writers.map(t=>t.name).join(", "))):(n.director=C.join(", "),n.writers=j.join(", "),n.credits={directors:C.map(t=>({name:t,role:"Director"})),writers:j.map(t=>({name:t,role:"Screenwriter"})),producers:[],mainCast:n.cast.mainRoles||[],supportCast:n.cast.supportRoles||[],guestCast:[],others:[]});try{let t=n.originalTitle?`${n.originalTitle} 영화`:`${n.title} 영화`,e=`http://43.202.38.79:13001/api/youtube/search-videos?title=${encodeURIComponent(t)}&maxResults=5`,i=await fetch(e);if(!i.ok)throw Error(`YouTube API 요청 실패: ${i.status}`);let r=await i.json();if(r.success&&r.data&&r.data.length>0){let t=r.data.map(t=>({title:t.title,type:t.title.toLowerCase().includes("trailer")?"trailer":t.title.toLowerCase().includes("teaser")?"teaser":"other",url:t.url,viewCount:t.viewCount,publishedAt:t.publishedAt}));n.videos=t}else n.videos=[]}catch(t){n.videos=[]}try{let e=await u(i,t);e&&e.length>0?(n.streamingServices=e,n.whereToWatch=e.map(t=>({name:t.name,link:t.url,imageUrl:t.logo,type:t.type})),n.credits.watchProviders=e):(n.streamingServices=[],n.whereToWatch=[])}catch(t){n.streamingServices=[],n.whereToWatch=[]}return n}catch(t){throw t}finally{p&&await p.close()}}async function u(t,e){try{let e=s.load(t),i=[],r=e(".box-body.wts");if(!r.length)return[];return r.find(".row .col-xs-12.col-lg-4.m-b-sm").each((t,r)=>{try{let t=e(r),a=t.find('a[rel="external nofollow"]').first();if(!a.length)return;let l=a.attr("href")||"",n="";if(l.includes("/redirect?q=")){let t=l.match(/\/redirect\?q=([^&]+)/);t&&t[1]&&(n=decodeURIComponent(t[1]))}else n=l;let o=t.find("a.text-primary b").text().trim(),s=t.find(".p-l div:nth-child(2)").text().trim(),d=t.find("img.img-responsive"),m=d.length?d.attr("src"):"";if("wavve"===o.toLowerCase()?m="https://i.mydramalist.com/pgAd8_3m.jpg":"viki"===o.toLowerCase()&&(m="https://i.mydramalist.com/kEBdrm.jpg"),o&&n){let t=m?.startsWith("http")?m:`https://i.mydramalist.com${m?.startsWith("/")?"":"/"}${m}`,e={name:o,url:n,type:s,logo:t};switch(o.toLowerCase()){case"netflix":e.providerKey="netflix";break;case"apple tv+":case"apple tv":e.providerKey="apple";break;case"disney+":e.providerKey="disney";break;case"viki":e.providerKey="viki",e.logo="https://i.mydramalist.com/kEBdrm.jpg";break;case"wavve":e.providerKey="wavve",e.logo="https://i.mydramalist.com/pgAd8_3m.jpg";break;default:e.providerKey=o.toLowerCase().replace(/\s+/g,"_")}i.push(e)}}catch(t){}}),i}catch(t){return[]}}r()}catch(t){r(t)}})},35968:(t,e,i)=>{let r;i.r(e),i.d(e,{connectToDatabase:()=>d,dbConnect:()=>m,default:()=>c});var a=i(38013),l=i(92048),n=i.n(l),o=i(55315),s=i.n(o);{let t=i(25142),e=s().resolve(process.cwd(),".env.production");n().existsSync(e)&&t.config({path:e}).error}async function d(){try{let t=await r,e=t.db("kstarpick");return{client:t,db:e}}catch(t){throw t}}r=new a.MongoClient("mongodb://kstarpick:zpdltmxkvlr0%212@kstarpick-mongodb-production.cluster-cjquemysifmm.ap-northeast-2.docdb.amazonaws.com:27017/kstarpick?retryWrites=false&authSource=admin&authMechanism=SCRAM-SHA-1",{tls:!1,tlsAllowInvalidCertificates:!0,tlsAllowInvalidHostnames:!0,retryWrites:!1,maxPoolSize:50,serverSelectionTimeoutMS:5e3,socketTimeoutMS:45e3,connectTimeoutMS:1e4,heartbeatFrequencyMS:1e4,maxIdleTimeMS:3e4}).connect();let m=d,c=r},47153:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"RouteKind",{enumerable:!0,get:function(){return i}}),function(t){t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE"}(i||(i={}))},71802:(t,e,i)=>{t.exports=i(20145)}};var e=require("../../../webpack-api-runtime.js");e.C(t);var i=e(e.s=28890);module.exports=i})();