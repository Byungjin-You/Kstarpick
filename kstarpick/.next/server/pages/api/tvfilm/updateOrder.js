"use strict";(()=>{var e={};e.id=8854,e.ids=[8854],e.modules={84802:e=>{e.exports=require("cookie")},25142:e=>{e.exports=require("dotenv")},99344:e=>{e.exports=require("jsonwebtoken")},38013:e=>{e.exports=require("mongodb")},11185:e=>{e.exports=require("mongoose")},60614:e=>{e.exports=require("next-auth/jwt")},41649:e=>{e.exports=require("next-auth/react")},20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},12200:(e,t,r)=>{r.r(t),r.d(t,{config:()=>p,default:()=>m,routeModule:()=>f});var s={};r.r(s),r.d(s,{default:()=>c});var a=r(71802),i=r(47153),o=r(56249),u=r(44756),d=r(74053),n=r(41649),l=r(12277);async function c(e,t){let{method:r}=e;if("POST"!==r)return t.setHeader("Allow",["POST"]),t.status(405).json({success:!1,message:`Method ${r} Not Allowed`});await (0,u.default)();try{let r=await (0,l.validateToken)(e),s=await (0,n.getSession)({req:e});if((!r||"admin"!==r.role)&&(!s||"admin"!==s.user.role))return t.status(401).json({success:!1,message:"Unauthorized. Admin access required"});let{items:a}=e.body;if(!Array.isArray(a)||0===a.length)return t.status(400).json({success:!1,message:"Invalid request format. Expected array of items with id and order."});let i=a.map(async e=>{if(!e.id)throw Error("Missing id in item");let t={featured:!0===e.featured,orderNumber:e.order||0};t.updatedAt=new Date;let r=await d.default.findByIdAndUpdate(e.id,{$set:t},{new:!0,runValidators:!0});if(!r)throw Error(`Item with id ${e.id} not found`);return r});try{return await Promise.all(i),t.status(200).json({success:!0,message:"Order updated successfully"})}catch(e){return t.status(404).json({success:!1,message:e.message})}}catch(e){return t.status(500).json({success:!1,message:e.message})}}let m=(0,o.hoist)(s,"default"),p=(0,o.hoist)(s,"config"),f=new a.PagesAPIRouteModule({definition:{kind:i.RouteKind.PAGES_API,page:"/api/tvfilm/updateOrder",pathname:"/api/tvfilm/updateOrder",bundlePath:"",filename:""},userland:s})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9778],()=>r(12200));module.exports=s})();