"use strict";(()=>{var e={};e.id=9777,e.ids=[9777],e.modules={20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},99648:e=>{e.exports=import("axios")},56249:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"hoist",{enumerable:!0,get:function(){return function e(t,i){return i in t?t[i]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,i)):"function"==typeof t&&"default"===i?t:void 0}}})},81115:(e,t,i)=>{i.a(e,async(e,s)=>{try{i.r(t),i.d(t,{config:()=>c,default:()=>d,routeModule:()=>l});var n=i(71802),o=i(47153),a=i(56249),u=i(49611),r=e([u]);u=(r.then?(await r)():r)[0];let d=(0,a.hoist)(u,"default"),c=(0,a.hoist)(u,"config"),l=new n.PagesAPIRouteModule({definition:{kind:o.RouteKind.PAGES_API,page:"/api/youtube/search-videos",pathname:"/api/youtube/search-videos",bundlePath:"",filename:""},userland:u});s()}catch(e){s(e)}})},49611:(e,t,i)=>{i.a(e,async(e,s)=>{try{i.r(t),i.d(t,{default:()=>a});var n=i(99648),o=e([n]);async function a(e,t){let{method:i,query:s}=e;if("GET"!==i)return t.status(405).json({success:!1,message:`Method ${i} Not Allowed`});let{title:o,maxResults:a=5}=s;if(!o)return t.status(400).json({success:!1,message:"검색할 드라마 제목이 필요합니다."});try{let e=process.env.YOUTUBE_API_KEY;if(!e)return t.status(500).json({success:!1,message:"YouTube API 키가 설정되지 않았습니다."});let i=`${o} official trailer teaser`,s=(await n.default.get("https://www.googleapis.com/youtube/v3/search",{params:{part:"snippet",q:i,maxResults:a,type:"video",videoEmbeddable:!0,videoSyndicated:!0,key:e}})).data.items.map(e=>({videoId:e.id.videoId,title:e.snippet.title,description:e.snippet.description,publishedAt:e.snippet.publishedAt,thumbnailUrl:e.snippet.thumbnails.high?.url||e.snippet.thumbnails.default?.url,channelTitle:e.snippet.channelTitle,url:`https://www.youtube.com/watch?v=${e.id.videoId}`})),u=s.map(e=>e.videoId).join(",");if(u){let t=await n.default.get("https://www.googleapis.com/youtube/v3/videos",{params:{part:"statistics",id:u,key:e}});if(t.data&&t.data.items){let e={};t.data.items.forEach(t=>{e[t.id]={viewCount:parseInt(t.statistics?.viewCount||"0",10),likeCount:parseInt(t.statistics?.likeCount||"0",10),commentCount:parseInt(t.statistics?.commentCount||"0",10)}}),s.forEach(t=>{let i=e[t.videoId]||{viewCount:0,likeCount:0,commentCount:0};t.viewCount=i.viewCount,t.likeCount=i.likeCount,t.commentCount=i.commentCount}),s.sort((e,t)=>t.viewCount-e.viewCount)}}return t.status(200).json({success:!0,data:s})}catch(e){return t.status(500).json({success:!1,message:"유튜브 비디오 검색 중 오류가 발생했습니다.",error:void 0})}}n=(o.then?(await o)():o)[0],s()}catch(e){s(e)}})},47153:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouteKind",{enumerable:!0,get:function(){return i}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(i||(i={}))},71802:(e,t,i)=>{e.exports=i(20145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var i=t(t.s=81115);module.exports=i})();