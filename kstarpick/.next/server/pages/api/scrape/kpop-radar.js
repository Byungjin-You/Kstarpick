"use strict";(()=>{var t={};t.id=2826,t.ids=[2826],t.modules={19993:t=>{t.exports=require("googleapis")},41649:t=>{t.exports=require("next-auth/react")},20145:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},99648:t=>{t.exports=import("axios")},65462:t=>{t.exports=import("puppeteer")},56249:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"hoist",{enumerable:!0,get:function(){return function t(e,a){return a in e?e[a]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,a)):"function"==typeof e&&"default"===a?e:void 0}}})},15:(t,e,a)=>{a.a(t,async(t,i)=>{try{a.r(e),a.d(e,{config:()=>l,default:()=>u,routeModule:()=>m});var r=a(71802),o=a(47153),s=a(56249),n=a(51340),c=t([n]);n=(c.then?(await c)():c)[0];let u=(0,s.hoist)(n,"default"),l=(0,s.hoist)(n,"config"),m=new r.PagesAPIRouteModule({definition:{kind:o.RouteKind.PAGES_API,page:"/api/scrape/kpop-radar",pathname:"/api/scrape/kpop-radar",bundlePath:"",filename:""},userland:n});i()}catch(t){i(t)}})},7438:(t,e,a)=>{a.a(t,async(t,i)=>{try{a.r(e),a.d(e,{enrichMusicVideos:()=>l,extractVideoId:()=>n,getVideoDetails:()=>c,getVideosFromUrls:()=>u});var r=a(19993),o=a(99648),s=t([o]);o=(s.then?(await s)():s)[0];let p=r.google.youtube({version:"v3",auth:process.env.YOUTUBE_API_KEY}),f=process.env.YOUTUBE_API_KEY||"AIzaSyA5e3DzKbgo-zakeQ6k2Hu8k6njFJcumH0";function n(t){if(!t)return null;try{let e=t.match(/youtube\.com\/watch\?v=([^&]+)/);if(e)return e[1];let a=t.match(/youtu\.be\/([^?&]+)/);if(a)return a[1];let i=t.match(/youtube\.com\/embed\/([^?&]+)/);if(i)return i[1];return null}catch(t){return null}}async function c(t){if(!t)throw Error("유효한 YouTube 비디오 ID가 필요합니다");try{let e=await p.videos.list({part:"snippet,statistics,contentDetails",id:t});if(!e.data||!e.data.items||0===e.data.items.length)throw Error("비디오 정보를 찾을 수 없습니다");let a=e.data.items[0],i=a.snippet||{},r=a.statistics||{},o=(a.contentDetails?.duration||"").match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/),s=o&&o[1]?parseInt(o[1]):0,n=o&&o[2]?parseInt(o[2]):0,c=o&&o[3]?parseInt(o[3]):0;return{id:t,title:i.title||"",channelTitle:i.channelTitle||"",channelId:i.channelId||"",description:i.description||"",thumbnails:i.thumbnails||{},publishedAt:i.publishedAt||null,views:parseInt(r.viewCount||"0"),likes:parseInt(r.likeCount||"0"),comments:parseInt(r.commentCount||"0"),duration:{hours:s,minutes:n,seconds:c,totalSeconds:3600*s+60*n+c}}}catch(t){throw Error(`YouTube 비디오 정보를 가져오는 중 오류 발생: ${t.message}`)}}async function u(t){if(!t||!Array.isArray(t)||0===t.length)return[];try{let e;if(e=t[0].includes("youtube.com")||t[0].includes("youtu.be")?t.map(t=>n(t)).filter(Boolean):t,0===e.length||!process.env.YOUTUBE_API_KEY)return[];let a=await p.videos.list({part:"snippet,statistics,contentDetails",id:e.join(",")});if(!a.data||!a.data.items)return[];let i=a.data.items.map(t=>{let e=t.snippet||{},a=t.statistics||{};return{id:t.id,title:e.title||"",channelTitle:e.channelTitle||"",publishedAt:e.publishedAt||null,views:parseInt(a.viewCount||"0"),likes:parseInt(a.likeCount||"0"),thumbnails:e.thumbnails||{}}});return i.length,i}catch(t){return[]}}async function l(t){if(!t||0===t.length)return[];try{let e=[];for(let a of t)try{if(!a.url&&!a.youtubeUrl){e.push(a);continue}let t=a.url||a.youtubeUrl,i=n(t);if(!i){e.push(a);continue}let r=await m(i);r?e.push({...a,...r}):e.push(a)}catch(t){e.push(a)}return e}catch(e){return t}}async function m(t,e=1){try{let e=(await o.default.get("https://www.googleapis.com/youtube/v3/videos",{params:{part:"snippet,statistics",id:t,key:f}})).data.items;if(!e||0===e.length)return null;let a=e[0];return{title:a.snippet.title,thumbnail:a.snippet.thumbnails.high?.url||a.snippet.thumbnails.default?.url,publishedAt:a.snippet.publishedAt,viewCount:parseInt(a.statistics.viewCount,10)||0,likeCount:parseInt(a.statistics.likeCount,10)||0,commentCount:parseInt(a.statistics.commentCount,10)||0}}catch(a){if((a.response&&403===a.response.status&&(a.response.data.error.errors.some(t=>"quotaExceeded"===t.reason)||a.response.data.error.errors.some(t=>"dailyLimitExceeded"===t.reason))||a.message&&a.message.includes("quota"))&&e<3){let a=2e3*Math.pow(2,e-1);return new Promise(i=>{setTimeout(()=>{i(m(t,e+1))},a)})}return null}}i()}catch(t){i(t)}})},51340:(t,e,a)=>{a.a(t,async(t,i)=>{try{a.r(e),a.d(e,{default:()=>n}),a(41649);var r=a(65462),o=a(7438),s=t([r,o]);async function n(t,e){if("GET"!==t.method)return e.status(405).json({success:!1,error:"허용되지 않는 메소드입니다."});try{let t=null;try{t=await r.default.launch({headless:"new",args:["--no-sandbox","--disable-setuid-sandbox"]});let i=await t.newPage();await i.setUserAgent("Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36"),await i.goto("https://www.kpop-radar.com/artistList",{waitUntil:"networkidle2",timeout:6e4}),await i.evaluate(()=>new Promise(t=>{setTimeout(t,5e3)}));let s=await i.evaluate(()=>{let t=(()=>{let t=[];if(Array.from(document.querySelectorAll("span.category.category_0.title, h2.section-title, .recommended-artists-title")).find(t=>t.textContent.includes("추천")||t.textContent.includes("인기")||t.textContent.toLowerCase().includes("popular"))){let e=Array.from(document.querySelectorAll('span.category.category_0 a[href^="/"], .artist-card a[href^="/"], .artist-list a[href^="/"]'));e.length>0&&(t=e)}if(0===t.length){let e=Array.from(document.querySelectorAll(".artist-card, .artist-item, .artist-link"));e.length>0&&(t=e.map(t=>t.querySelector('a[href^="/"]')).filter(Boolean))}if(0===t.length){let e=Array.from(document.querySelectorAll('a[href^="/"]')).filter(t=>{let e=t.getAttribute("href");return e.startsWith("/")&&!e.substring(1).includes("/")&&e.length>1&&!e.includes("search")&&!e.includes("about")});e.length>0&&(t=e)}return t})();return 0===t.length?[]:t.map(t=>{let e=t.getAttribute("href"),a=e.substring(1),i=t.textContent.trim(),r=a;return"방탄소년단"===i?r="BTS":"블랙핑크"===i?r="BLACKPINK":"아이유"===i?r="IU":"뉴진스"===i?r="NewJeans":"위너"===i?r="WINNER":"갓세븐"===i?r="GOT7":"피프티 피프티"===i?r="FIFTY FIFTY":"트와이스"===i?r="TWICE":"엑소"===i?r="EXO":"세븐틴"===i?r="SEVENTEEN":"넥스지"===i&&(r="NEXZ"),{id:a,name:i,engName:r,href:e}}).filter(t=>!t.id.includes("faq")&&!t.id.includes("#")&&!t.id.includes("about")&&!t.id.includes("search"))}),n=[];if(s&&s.length>0)for(let t=0;t<Math.min(s.length,10);t++){let e=s[t];try{var a;let t=`https://www.kpop-radar.com${e.href}`;await i.goto(t,{waitUntil:"networkidle2",timeout:6e4});let r=await i.evaluate(()=>{let t=document.querySelector("#artistImg");if(t&&t.src)return t.src;let e=document.querySelector(".artist-profile-image img, .artist-info img, .artist-profile img, .artist-header img, .profile-card img");return e&&e.src?e.src:null});await i.content();let s={},c={},u=await i.evaluate(()=>{let t={},e=["youtube","instagram","twitter","spotify","tiktok","fancafe"];return e.forEach(e=>{let a=document.querySelector(`#${e}_today`);if(!a)return;let i=a.querySelector(".link");if(!i)return;let r=i.getAttribute("onclick");if(!r)return;let o=r.match(/window\.open\(['"]([^'"]*)['"]\)/);o&&o[1]&&(t[e]=o[1])}),e.forEach(e=>{let a=document.querySelector(`#${e}_today`);if(!a)return;let i=a.querySelector(".total");i&&i.textContent.trim()&&(t[`${e}_followers`]=i.textContent.trim())}),t}),l=[];try{(l=await i.evaluate(()=>{let t=Array.from(document.querySelectorAll("#viewcount_list .flex-cell"));return 0===t.length?[]:t.map(t=>{try{let e=t.querySelector(".text-wrap strong")?.innerText.trim()||"",a=Array.from(t.querySelectorAll(".text-wrap .no_artist_board")).map(t=>t.innerText.trim()),i=t.querySelector(".view_yt")?.getAttribute("data-url")||"";if(!i)return null;return{title:e,artists:a,youtubeUrl:i}}catch(t){return null}}).filter(Boolean)}))&&l.length>0&&(l=l.slice(0,5))}catch(t){l=[]}let m=[];try{m=await (0,o.enrichMusicVideos)(l)}catch(t){t.message&&(t.message.includes("quota")||t.message.includes("Quota")||t.message.includes("limit exceeded")),m=l}u.youtube&&(c.youtube=u.youtube),u.instagram&&(c.instagram=u.instagram),u.twitter&&(c.twitter=u.twitter),u.spotify&&(c.spotify=u.spotify),u.tiktok&&(c.tiktok=u.tiktok),u.fancafe&&(c.fancafe=u.fancafe),u.youtube_followers&&(s.youtube=u.youtube_followers),u.instagram_followers&&(s.instagram=u.instagram_followers),u.twitter_followers&&(s.twitter=u.twitter_followers),u.spotify_followers&&(s.spotify=u.spotify_followers),u.tiktok_followers&&(s.tiktok=u.tiktok_followers),u.fancafe_followers&&(s.fancafe=u.fancafe_followers);let p=await i.evaluate(()=>{let t=t=>{if(!t||""===t.trim())return!1;let e=new Date(t);return!isNaN(e.getTime())},e="",a=document.querySelector(".date, .debut-date");if(a){let i=a.textContent.trim().match(/(\d{4})[./-](\d{1,2})[./-](\d{1,2})/);if(i){let[a,r,o,s]=i,n=`${r}-${o.padStart(2,"0")}-${s.padStart(2,"0")}`;t(n)&&(e=n)}}return{agency:document.querySelector(".agency, .artist-agency")?.textContent.trim()||"",debutDate:e,groupType:document.querySelector(".artist-name span, .artist-type")?.textContent.toLowerCase().includes("solo")?"solo":"group",followers:document.querySelector(".totalnum, .followers-count")?.textContent.trim()||"0"}}),f=r;if(!f){let t={BTS:"b2fb3b91-ebe6-4ecb-8671-7a05fd659668",BLACKPINK:"b16deeae-3e5a-4d3f-9a40-288c98cf31d8",NCT:"e12f3b73-45bc-4d58-a1eb-8f681574eaaa",IU:"48b8ef9f-ed9a-4f9b-9c40-c0c2085acda0",NEWJEANS:"a2ead358-3030-40c6-82e6-c5bf90e3aaa4",WINNER:"a29f7653-c4bb-4e22-90b5-d3e2b482c061",GOT7:"c8e7d1f5-128a-4f67-a5a1-667c7d06c167",FIFTYFIFTY:"f8d46f6c-a1b6-4ce0-b5f4-95af2b9e3d10",EXO:"6cd6e087-c22d-4054-8a63-2a9495bc3779",SEVENTEEN:"7a7e3d6c-44b8-475c-abe1-fcf42fd6c23a",TWICE:"8c3e257f-bf15-4785-b8ec-1aa6c6e7d781"}[e.id];f=t?`https://storage.kpop-radar.com/artist/images/${t}.jpg`:`https://storage.kpop-radar.com/artist/images/${e.id}.jpg`}let d={id:e.id,name:e.name,engName:e.engName||e.id,image:f,thumbnail:f,followers:p.followers,agency:p.agency||({BTS:"HYBE",NCT:"SM Entertainment",WINNER:"YG Entertainment",GOT7:"Warner Music Korea","FIFTY FIFTY":"ATTRAKT",BLACKPINK:"YG Entertainment",IU:"EDAM Entertainment",NewJeans:"ADOR"})[e.engName||e.id]||"",groupType:p.groupType||(a=e.engName||e.id,["IU"].includes(a)?"solo":"group"),debutDate:p.debutDate||({BTS:"2013-06-13",NCT:"2016-04-09",WINNER:"2014-08-17",GOT7:"2014-01-16","FIFTY FIFTY":"2022-11-18",BLACKPINK:"2016-08-08",IU:"2008-09-18",NewJeans:"2022-07-22"})[e.engName||e.id]||"",socialMedia:c,socialMediaStats:s,todayStats:s,musicVideos:m};u&&Object.keys(u).forEach(t=>{if(t.includes("_followers")){let e=t.replace("_followers","");d.socialMediaStats||(d.socialMediaStats={}),d.socialMediaStats[e]=u[t]}else d.socialMedia||(d.socialMedia={}),d.socialMedia[t]=u[t]}),n.push(d)}catch(t){}}else{let t=c();n.push(...t)}return t&&await t.close(),e.status(200).json({success:!0,message:"데이터 수집 완료",data:n})}catch(i){if(t&&await t.close(),i.message&&(i.message.includes("quota")||i.message.includes("Quota")||i.message.includes("limit exceeded")))return e.status(429).json({success:!1,error:"YouTube API 쿼터 한도 초과",message:"일일 API 요청 한도를 초과했습니다. 잠시 후 다시 시도하세요."});let a=c();return e.status(200).json({success:!0,message:"오류 발생으로 대체 데이터 제공",error:i.message,data:a})}}catch(t){if(t.message&&(t.message.includes("quota")||t.message.includes("Quota")||t.message.includes("limit exceeded")))return e.status(429).json({success:!1,error:"YouTube API 쿼터 한도 초과",message:"일일 API 요청 한도를 초과했습니다. 잠시 후 다시 시도하세요."});return e.status(500).json({success:!1,error:"서버 오류",message:t.message})}}function c(){return[{id:"418",name:"방탄소년단",engName:"BTS",image:"https://i.imgur.com/WkCX0Em.jpg",thumbnail:"https://storage.kpop-radar.com/artist/images/b2fb3b91-ebe6-4ecb-8671-7a05fd659668.jpg",followers:"70.5M",agency:"HYBE",groupType:"group",debutDate:"2013-06-13",socialMedia:{youtube:"https://www.youtube.com/channel/UCLkAepWjdylmXSltofFvsYQ",instagram:"https://www.instagram.com/bts.bighitofficial",twitter:"https://twitter.com/BTS_twt",spotify:"https://open.spotify.com/artist/3Nrfpe0tUJi4K4DXYWgMUX",fancafe:"https://cafe.daum.net/BANGTAN",tiktok:"https://www.tiktok.com/@bts_official_bighit"},todayStats:{youtube:"70.9M",instagram:"78.4M",twitter:"50.2M",spotify:"42.7M"}},{id:"523",name:"NCT",engName:"NCT",image:"https://i.imgur.com/JR7nmVm.jpg",thumbnail:"https://storage.kpop-radar.com/artist/images/e12f3b73-45bc-4d58-a1eb-8f681574eaaa.jpg",followers:"21.3M",agency:"SM Entertainment",groupType:"group",debutDate:"2016-04-09",socialMedia:{youtube:"https://www.youtube.com/channel/UCwgtORdDtUKhpjE1VBv6lOQ",instagram:"https://www.instagram.com/nct",twitter:"https://twitter.com/NCTsmtown",spotify:"https://open.spotify.com/artist/7f4ignuCJhLXfZ9giKT7rH",fancafe:"https://cafe.daum.net/NCT",tiktok:"https://www.tiktok.com/@official_nct"},todayStats:{youtube:"13.8M",instagram:"17.5M",twitter:"9.7M",spotify:"12.4M"}},{id:"325",name:"위너",engName:"WINNER",image:"https://i.imgur.com/0DbMvYP.jpg",thumbnail:"https://storage.kpop-radar.com/artist/images/a29f7653-c4bb-4e22-90b5-d3e2b482c061.jpg",followers:"15.8M",agency:"YG Entertainment",groupType:"group",debutDate:"2014-08-17",socialMedia:{youtube:"https://www.youtube.com/channel/UCayQxFAoFCvGariuQCtHRGQ",instagram:"https://www.instagram.com/winnercity",twitter:"https://twitter.com/yginnercircle",spotify:"https://open.spotify.com/artist/5RmQ8k4l3HZ8JoPb4mNsML",fancafe:"https://cafe.daum.net/WINNER",tiktok:"https://www.tiktok.com/@winnerofficial"},todayStats:{youtube:"3.4M",instagram:"7.2M",twitter:"4.1M",spotify:"2.8M"}},{id:"224",name:"갓세븐",engName:"GOT7",image:"https://i.imgur.com/p4KDF3S.jpg",thumbnail:"https://storage.kpop-radar.com/artist/images/c8e7d1f5-128a-4f67-a5a1-667c7d06c167.jpg",followers:"26.7M",agency:"Warner Music Korea",groupType:"group",debutDate:"2014-01-16",socialMedia:{youtube:"https://www.youtube.com/channel/UCNtZPzvkLqXWyWWmb1hKCZA",instagram:"https://www.instagram.com/got7official",twitter:"https://twitter.com/GOT7Official",spotify:"https://open.spotify.com/artist/6nfDaffa50mKtEDDEDeWDG",fancafe:"https://cafe.daum.net/GOT7Official",tiktok:"https://www.tiktok.com/@got7"},todayStats:{youtube:"9.5M",instagram:"11.8M",twitter:"8.7M",spotify:"6.3M"}},{id:"1352",name:"피프티 피프티",engName:"FIFTY FIFTY",image:"https://i.imgur.com/jvqJRV9.jpg",thumbnail:"https://storage.kpop-radar.com/artist/images/f8d46f6c-a1b6-4ce0-b5f4-95af2b9e3d10.jpg",followers:"11.2M",agency:"ATTRAKT",groupType:"group",debutDate:"2022-11-18",socialMedia:{youtube:"https://www.youtube.com/channel/UCvluSEuMJ2vrdOSvlRYVzbA",instagram:"https://www.instagram.com/fifty_fifty_official",twitter:"https://twitter.com/50_fifty_official",spotify:"https://open.spotify.com/artist/4GJ6xDCF5jaUqD6avOuQT6",tiktok:"https://www.tiktok.com/@fiftyfifty_official"},todayStats:{youtube:"2.7M",instagram:"3.5M",twitter:"1.9M",spotify:"5.2M"}},{id:"460",name:"블랙핑크",engName:"BLACKPINK",image:"https://i.imgur.com/XmDQAr9.jpg",thumbnail:"https://storage.kpop-radar.com/artist/images/b16deeae-3e5a-4d3f-9a40-288c98cf31d8.jpg",followers:"76.2M",agency:"YG Entertainment",groupType:"group",debutDate:"2016-08-08",socialMedia:{youtube:"https://www.youtube.com/channel/UCOmHUn--16B90oW2L6FRR3A",instagram:"https://www.instagram.com/blackpinkofficial",twitter:"https://twitter.com/BLACKPINK",spotify:"https://open.spotify.com/artist/41MozSoPIsD1dJM0CLPjZF",fancafe:"https://cafe.daum.net/BLACKPINK",tiktok:"https://www.tiktok.com/@blackpinkofficial"},todayStats:{youtube:"85.5M",instagram:"56.2M",twitter:"13.8M",spotify:"37.1M"}},{id:"229",name:"아이유",engName:"IU",image:"https://i.imgur.com/6hLYfuQ.jpg",thumbnail:"https://storage.kpop-radar.com/artist/images/48b8ef9f-ed9a-4f9b-9c40-c0c2085acda0.jpg",followers:"30.1M",agency:"EDAM Entertainment",groupType:"solo",debutDate:"2008-09-18",socialMedia:{youtube:"https://www.youtube.com/channel/UC3SyT4_WLHzN7JmHQwKQZww",instagram:"https://www.instagram.com/dlwlrma",twitter:"https://twitter.com/IUofficial",spotify:"https://open.spotify.com/artist/3HqSLMAZ3g3d5poNaI7GOU",fancafe:"https://cafe.daum.net/IU",tiktok:"https://www.tiktok.com/@iuofficial"},todayStats:{youtube:"15.5M",instagram:"28.6M",twitter:"4.6M",spotify:"9.8M"}},{id:"789",name:"뉴진스",engName:"NewJeans",image:"https://i.imgur.com/KHQgPBk.jpg",thumbnail:"https://storage.kpop-radar.com/artist/images/a2ead358-3030-40c6-82e6-c5bf90e3aaa4.jpg",followers:"22.3M",agency:"ADOR",groupType:"group",debutDate:"2022-07-22",socialMedia:{youtube:"https://www.youtube.com/channel/UCMki_UkHb4qSc0qyEcOHHJw",instagram:"https://www.instagram.com/newjeans_official",twitter:"https://twitter.com/NewJeans_ADOR",spotify:"https://open.spotify.com/artist/6HvZYsbFfjnjFrWF950C9d",tiktok:"https://www.tiktok.com/@newjeans_official"},todayStats:{youtube:"8.3M",instagram:"12.4M",twitter:"4.2M",spotify:"16.9M"}}]}[r,o]=s.then?(await s)():s,i()}catch(t){i(t)}})},47153:(t,e)=>{var a;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"RouteKind",{enumerable:!0,get:function(){return a}}),function(t){t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE"}(a||(a={}))},71802:(t,e,a)=>{t.exports=a(20145)}};var e=require("../../../webpack-api-runtime.js");e.C(t);var a=e(e.s=15);module.exports=a})();