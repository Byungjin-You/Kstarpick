"use strict";(()=>{var e={};e.id=3871,e.ids=[3871],e.modules={68020:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>p,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>u,getStaticProps:()=>x,reportWebVitals:()=>g,routeModule:()=>w,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>f});var r=a(87093),l=a(35244),i=a(1323),n=a(65949),d=a(81928),o=a(27715),c=e([o]);o=(c.then?(await c)():c)[0];let m=(0,i.hoist)(o,"default"),x=(0,i.hoist)(o,"getStaticProps"),u=(0,i.hoist)(o,"getStaticPaths"),h=(0,i.hoist)(o,"getServerSideProps"),p=(0,i.hoist)(o,"config"),g=(0,i.hoist)(o,"reportWebVitals"),f=(0,i.hoist)(o,"unstable_getStaticProps"),y=(0,i.hoist)(o,"unstable_getStaticPaths"),j=(0,i.hoist)(o,"unstable_getStaticParams"),b=(0,i.hoist)(o,"unstable_getServerProps"),v=(0,i.hoist)(o,"unstable_getServerSideProps"),w=new r.PagesRouteModule({definition:{kind:l.RouteKind.PAGES,page:"/admin/content",pathname:"/admin/content",bundlePath:"",filename:""},components:{App:d.default,Document:n.default},userland:o});s()}catch(e){s(e)}})},79046:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var s=a(20997),r=a(16689),l=a(41664),i=a.n(l),n=a(11163),d=a(41649),o=a(83364),c=a(93663),m=a(71952),x=a(82096),u=a(83055),h=a(47963),p=a(51565),g=a(53585),f=a(90816),y=a(41549),j=a(62691),b=a(63696);let v=({children:e})=>{let t=(0,n.useRouter)(),{data:a,status:l}=(0,d.useSession)(),[v,w]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{("unauthenticated"===l||a&&"admin"!==a.user.role)&&t.push("/admin/login")},[a,l,t]),"loading"===l)?s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:s.jsx("div",{className:"p-8 bg-white rounded-lg shadow-md",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-t-[#ff3e8e] rounded-full animate-spin"}),s.jsx("p",{className:"text-xl font-medium",children:"Loading admin panel..."})]})})}):"unauthenticated"===l||a&&"admin"!==a.user.role?s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:s.jsx("div",{className:"p-8 bg-white rounded-lg shadow-md max-w-md",children:(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4 text-center",children:[s.jsx(o.default,{size:48,className:"text-red-500"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Unauthorized Access"}),s.jsx("p",{className:"text-gray-600",children:"You don't have permission to access the admin area."}),s.jsx(i(),{href:"/",className:"px-4 py-2 mt-4 text-white bg-[#ff3e8e] rounded-md hover:bg-[#e02e7c]",children:"Go to Homepage"})]})})}):(c.default,m.default,x.default,u.default,h.default,p.default,s.jsx("div",{className:"min-h-screen bg-gray-100",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("div",{className:"w-64 min-h-screen bg-white shadow-md",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"관리자 패널"})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("ul",{className:"space-y-2",children:[s.jsx("li",{children:(0,s.jsxs)(i(),{href:"/admin",className:`flex items-center px-4 py-2 rounded-lg ${"/admin"===t.pathname?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[s.jsx(c.default,{className:"mr-3 h-5 w-5"}),"대시보드"]})}),s.jsx("li",{children:(0,s.jsxs)(i(),{href:"/admin/content",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/content")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[s.jsx(g.default,{className:"mr-3 h-5 w-5"}),"콘텐츠 관리"]})}),s.jsx("li",{children:(0,s.jsxs)(i(),{href:"/admin/news",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/news")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[s.jsx(f.default,{className:"mr-3 h-5 w-5"}),"뉴스 관리"]})}),s.jsx("li",{children:(0,s.jsxs)(i(),{href:"/admin/drama",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/drama")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[s.jsx(y.default,{className:"mr-3 h-5 w-5"}),"드라마 관리"]})}),s.jsx("li",{children:(0,s.jsxs)(i(),{href:"/admin/music",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/music")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[s.jsx(u.default,{className:"mr-3 h-5 w-5"}),"음악 차트 관리"]})}),s.jsx("li",{children:(0,s.jsxs)(i(),{href:"/admin/celeb",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/celeb")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[s.jsx(j.default,{className:"mr-3 h-5 w-5"}),"셀럽 관리"]})}),s.jsx("li",{children:(0,s.jsxs)(i(),{href:"/admin/users",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/users")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[s.jsx(h.default,{className:"mr-3 h-5 w-5"}),"사용자 관리"]})})]}),s.jsx("div",{className:"border-t mt-4 pt-4",children:(0,s.jsxs)("button",{onClick:()=>{localStorage.removeItem("adminToken"),sessionStorage.removeItem("adminToken"),(0,d.signOut)({callbackUrl:"/"})},className:"flex items-center w-full px-4 py-2 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[s.jsx(b.default,{className:"mr-3 h-5 w-5"}),"로그아웃"]})})]})]}),s.jsx("div",{className:"flex-1",children:e})]})}))}},5217:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>c});var r=a(20997),l=a(16689),i=a(11163),n=a(69915),d=a(41649),o=e([n]);n=(o.then?(await o)():o)[0];let c=e=>t=>{let a=(0,i.useRouter)(),[s,o]=(0,l.useState)(!0),{data:c,status:m}=(0,d.useSession)();(0,l.useEffect)(()=>{if("loading"===m)return;if(c&&c.user&&"admin"===c.user.role){o(!1);return}let e=n.default.get("token")||localStorage.getItem("token")||localStorage.getItem("adminToken");if(!e){a.push("/admin/login");return}x(e)},[a,c,m]);let x=async e=>{try{let t=await fetch("/api/auth/check-admin",{headers:{Authorization:`Bearer ${e}`}});(await t.json()).isAdmin?o(!1):a.push("/admin/login")}catch(e){a.push("/admin/login")}};return s?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:r.jsx("div",{className:"p-8 bg-white rounded-lg shadow-md",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-t-[#ff3e8e] rounded-full animate-spin"}),r.jsx("p",{className:"text-xl font-medium",children:"Loading admin panel..."})]})})}):r.jsx(e,{...t})};s()}catch(e){s(e)}})},84257:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});let s=(0,a(64370).default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},76090:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});let s=(0,a(64370).default)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},47553:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});let s=(0,a(64370).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},20245:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});let s=(0,a(64370).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},23552:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});let s=(0,a(64370).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},33980:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});let s=(0,a(64370).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},40377:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});let s=(0,a(64370).default)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},28886:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});let s=(0,a(64370).default)("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},84672:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});let s=(0,a(64370).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},5451:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});let s=(0,a(64370).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},27715:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>R,getServerSideProps:()=>q});var r=a(20997),l=a(16689),i=a(11163),n=a(41664),d=a.n(n);a(41649);var o=a(79046),c=a(5217),m=a(76090),x=a(23552),u=a(28886),h=a(84672),p=a(84257),g=a(62691),f=a(33980),y=a(40377),j=a(5451),b=a(47553),v=a(20245),w=a(45507),N=a(45564),k=a(25675),S=a.n(k),C=a(9290),M=a(95645),P=a(79187),T=a(29051),$=a(23579),A=a(91135),z=e([c,C,M,P,T,$,A]);async function q(e){return{props:{}}}[c,C,M,P,T,$,A]=z.then?(await z)():z;let R=(0,c.default)(function(){let e=(0,i.useRouter)(),[t,a]=(0,l.useState)([]),[s,n]=(0,l.useState)(!0),[c,k]=(0,l.useState)(null),[z,q]=(0,l.useState)({visible:!1,message:"",type:""}),[R,I]=(0,l.useState)(null),[_,D]=(0,l.useState)(""),[U,O]=(0,l.useState)(""),[E,B]=(0,l.useState)(1),[L,W]=(0,l.useState)(1),[H,V]=(0,l.useState)(0),[G,F]=(0,l.useState)("createdAt"),[J,Z]=(0,l.useState)("desc"),[K,X]=(0,l.useState)(10),Y=()=>{let e=localStorage.getItem("token")||localStorage.getItem("adminToken"),t={hasToken:!!e,tokenLength:e?e.length:0,tokenStart:e?e.substring(0,20)+"...":"None",localStorage:{token:!!localStorage.getItem("token"),adminToken:!!localStorage.getItem("adminToken")}};return I(t),t},Q=async()=>{n(!0),k(null);try{let e;let t=new URLSearchParams({page:E,limit:K,sortBy:G,sortOrder:J});_&&"all"!==_&&t.append("category",_),U&&t.append("title",U);let s=localStorage.getItem("token")||localStorage.getItem("adminToken"),r=await fetch(`/api/dramas?${t.toString()}`,{headers:{Authorization:s?`Bearer ${s}`:""}}),l=await r.json();if(!r.ok)throw Error(l.message||"콘텐츠 목록을 불러오는 중 오류가 발생했습니다.");(e={data:l.data.map(e=>({...e,contentType:e.category||_})),pagination:l.pagination}).data.length,a(e.data),W(e.pagination.pages),V(e.pagination.total)}catch(e){k(e.message),ea(e.message,"error")}finally{n(!1)}},ee=async(e,t,a)=>{if(confirm(`"${t}" 콘텐츠를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`))try{let t=a;t||(t=_||"content");let s=`/api/dramas/${e}`,r=localStorage.getItem("token")||localStorage.getItem("adminToken"),l=await fetch(s,{method:"DELETE",headers:{Authorization:r?`Bearer ${r}`:""}});if(!l.ok){let e=await l.json();throw Error(e.message||"콘텐츠 삭제 중 오류가 발생했습니다.")}await l.json(),Q(),ea("콘텐츠가 성공적으로 삭제되었습니다.","success")}catch(e){ea(e.message,"error")}},et=e=>{G===e?Z("asc"===J?"desc":"asc"):(F(e),Z("desc"))},ea=(e,t="info")=>{q({visible:!0,message:e,type:t}),setTimeout(()=>q({visible:!1,message:"",type:""}),3e3)},es=e=>({drama:"드라마",movie:"영화",variety:"예능",documentary:"다큐멘터리",other:"기타"})[e]||e,er=e=>({ongoing:"방영 중",completed:"완결",upcoming:"개봉 예정",canceled:"취소됨"})[e]||e,el=async(e,a,s)=>{try{let r;let l=t.find(t=>t._id===e);if(!l)return;let i=localStorage.getItem("token")||localStorage.getItem("adminToken");r="Movie"===l.category||"movie"===l.category||"Movie"===s||"movie"===s?`/api/tvfilm/${e}`:`/api/dramas/${e}`;let n=await fetch(r,{method:"PUT",headers:{Authorization:i?`Bearer ${i}`:"","Content-Type":"application/json"},body:JSON.stringify({...l,orderNumber:a,previousOrderNumber:l.orderNumber||a})});if(!n.ok)throw await n.text(),Error(`순위 업데이트에 실패했습니다. (${n.status})`);Q(),ea("순위가 성공적으로 업데이트되었습니다.","success")}catch(e){ea(`순위 업데이트 중 오류가 발생했습니다: ${e.message}`,"error")}},ei=async()=>{try{let e=await fetch("/api/auth/generate-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin",password:"admin123"})});if(e.ok){let t=await e.json();localStorage.setItem("adminToken",t.token),Y(),ea("토큰이 재생성되었습니다.","success")}else ea("토큰 재생성에 실패했습니다.","error")}catch(e){ea("토큰 재생성 중 오류가 발생했습니다.","error")}},en=(e,a)=>{let s;let r=t.findIndex(t=>t._id===e);if(-1===r)return;let l=t[r];"up"===a&&r>0?(s=(t[r-1].orderNumber||r)-1,el(e,Math.max(1,s),l.contentType||l.category)):"down"===a&&r<t.length-1&&(s=(t[r+1].orderNumber||r+2)+1,el(e,s,l.contentType||l.category))},ed=async()=>{if(0!==t.length)try{let e=localStorage.getItem("token")||localStorage.getItem("adminToken"),a=[...t].sort((e,t)=>new Date(t.createdAt||t.updatedAt)-new Date(e.createdAt||e.updatedAt)),s=a.map(async(t,a)=>{let s=a+1;return fetch(`/api/dramas/${t._id}`,{method:"PUT",headers:{Authorization:e?`Bearer ${e}`:"","Content-Type":"application/json"},body:JSON.stringify({orderNumber:s,previousOrderNumber:t.orderNumber||s})})});await Promise.all(s),Q(),ea(`${a.length}개 콘텐츠의 순위가 최신순으로 정렬되었습니다.`,"success")}catch(e){ea("순위 정렬 중 오류가 발생했습니다.","error")}};return(0,r.jsxs)(o.default,{children:[(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"콘텐츠 관리"}),R&&(0,r.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["토큰 상태: ",R.hasToken?"✅ 있음":"❌ 없음",R.hasToken&&`(길이: ${R.tokenLength})`,!R.hasToken&&r.jsx("button",{onClick:ei,className:"ml-2 text-blue-600 hover:text-blue-800 underline",children:"토큰 재생성"})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:ed,className:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-md flex items-center",disabled:s,children:[r.jsx(m.default,{className:"mr-2 h-5 w-5"}),"순위 정렬"]}),(0,r.jsxs)(d(),{href:"/admin/content/movie-crawler",className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md flex items-center",children:[r.jsx(x.default,{className:"mr-2 h-5 w-5"}),"영화 크롤러"]}),(0,r.jsxs)(d(),{href:"/admin/content/reviews-crawler",className:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-md flex items-center",children:[r.jsx(x.default,{size:18,className:"mr-1"}),"리뷰 크롤러"]}),(0,r.jsxs)(d(),{href:"/admin/content/crawler",className:"bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-md flex items-center",children:[r.jsx(x.default,{size:18,className:"mr-1"}),"드라마 크롤러"]}),(0,r.jsxs)(d(),{href:"/admin/content/new",className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md flex items-center",children:[r.jsx(u.default,{size:18,className:"mr-1"}),"신규 콘텐츠 등록"]})]})]}),(0,r.jsxs)(C.default,{container:!0,spacing:3,className:"mb-6",children:[r.jsx(C.default,{item:!0,xs:12,md:4,children:(0,r.jsxs)(M.default,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,r.jsxs)(P.default,{sx:{flexGrow:1},children:[r.jsx(T.default,{gutterBottom:!0,variant:"h5",component:"h2",children:"드라마 크롤러"}),r.jsx(T.default,{children:"MyDramalist에서 드라마/영화 정보와 배우 정보를 크롤링합니다."})]}),r.jsx($.default,{children:r.jsx(d(),{href:"/admin/content/crawler",passHref:!0,children:r.jsx(A.default,{size:"small",variant:"contained",color:"secondary",children:"크롤러 시작"})})})]})}),r.jsx(C.default,{item:!0,xs:12,md:4,children:(0,r.jsxs)(M.default,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,r.jsxs)(P.default,{sx:{flexGrow:1},children:[r.jsx(T.default,{gutterBottom:!0,variant:"h5",component:"h2",children:"리뷰 스텔스 크롤러"}),r.jsx(T.default,{children:"MyDramalist 드라마/영화 리뷰를 Cloudflare 보호를 우회하여 스텔스 크롤링합니다."})]}),r.jsx($.default,{children:r.jsx(d(),{href:"/admin/content/reviews-crawler",passHref:!0,children:r.jsx(A.default,{size:"small",variant:"contained",color:"success",children:"크롤러 시작"})})})]})}),r.jsx(C.default,{item:!0,xs:12,md:4,children:(0,r.jsxs)(M.default,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,r.jsxs)(P.default,{sx:{flexGrow:1},children:[r.jsx(T.default,{gutterBottom:!0,variant:"h5",component:"h2",children:"콘텐츠 신규 등록"}),r.jsx(T.default,{children:"드라마, 영화, 예능 등 새로운 콘텐츠를 직접 등록합니다."})]}),r.jsx($.default,{children:r.jsx(d(),{href:"/admin/content/new",passHref:!0,children:r.jsx(A.default,{size:"small",variant:"contained",color:"primary",children:"콘텐츠 등록"})})})]})})]}),r.jsx("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"콘텐츠 타입"}),(0,r.jsxs)("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2",value:_,onChange:t=>{let a=t.target.value;D(a),B(1);let s={...e.query};a?s.type=a:delete s.type,e.push({pathname:e.pathname,query:s},void 0,{shallow:!0})},children:[r.jsx("option",{value:"",children:"전체 타입"}),r.jsx("option",{value:"all",children:"모든 타입 보기"}),r.jsx("option",{value:"drama",children:"드라마"}),r.jsx("option",{value:"movie",children:"영화"}),r.jsx("option",{value:"variety",children:"예능"}),r.jsx("option",{value:"documentary",children:"다큐멘터리"}),r.jsx("option",{value:"other",children:"기타"})]})]}),r.jsx("div",{className:"flex-1 flex min-w-[300px]",children:(0,r.jsxs)("form",{onSubmit:t=>{t.preventDefault(),B(1);let a={...e.query};U?a.search=U:delete a.search,delete a.page,e.push({pathname:e.pathname,query:a},void 0,{shallow:!0}),Q()},className:"w-full flex",children:[r.jsx("input",{type:"text",placeholder:"제목 검색...",className:"flex-1 border border-gray-300 rounded-l-md px-3 py-2",value:U,onChange:e=>O(e.target.value)}),r.jsx("button",{type:"submit",className:"bg-gray-200 hover:bg-gray-300 px-3 py-2 rounded-r-md",children:r.jsx(h.default,{size:20})})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm",value:`${G}-${J}`,onChange:e=>{let[t,a]=e.target.value.split("-");F(t),Z(a),B(1)},children:[r.jsx("option",{value:"orderNumber-asc",children:"순위순"}),r.jsx("option",{value:"createdAt-desc",children:"최신순"}),r.jsx("option",{value:"createdAt-asc",children:"오래된순"}),r.jsx("option",{value:"title-asc",children:"제목 오름차순"}),r.jsx("option",{value:"title-desc",children:"제목 내림차순"}),r.jsx("option",{value:"reviewRating-desc",children:"평점 높은순"}),r.jsx("option",{value:"reviewCount-desc",children:"리뷰 많은순"}),r.jsx("option",{value:"views-desc",children:"조회수 높은순"})]}),(0,r.jsxs)("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm",value:K,onChange:e=>{X(Number(e.target.value)),B(1)},children:[r.jsx("option",{value:"10",children:"10개씩"}),r.jsx("option",{value:"20",children:"20개씩"}),r.jsx("option",{value:"50",children:"50개씩"})]})]})]})}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s?(0,r.jsxs)("div",{className:"p-20 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-3 text-gray-600",children:"콘텐츠를 불러오는 중..."})]}):c?(0,r.jsxs)("div",{className:"p-6 text-center text-red-600",children:[r.jsx("p",{children:c}),r.jsx("button",{onClick:Q,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"다시 시도"})]}):0===t.length?r.jsx("div",{className:"p-10 text-center text-gray-600",children:r.jsx("p",{children:"콘텐츠가 없습니다. 새 콘텐츠를 등록해보세요."})}):r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"정보"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"콘텐츠 타입"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"순위"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,r.jsxs)("button",{className:"flex items-center",onClick:()=>et("reviewRating"),children:["평점","reviewRating"===G&&r.jsx("span",{className:"ml-1",children:"asc"===J?"↑":"↓"})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,r.jsxs)("button",{className:"flex items-center",onClick:()=>et("createdAt"),children:["등록일","createdAt"===G&&r.jsx("span",{className:"ml-1",children:"asc"===J?"↑":"↓"})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-16 w-12 relative",children:e.coverImage?r.jsx(S(),{src:e.coverImage,alt:e.title,layout:"fill",objectFit:"cover",className:"rounded"}):r.jsx("div",{className:"h-full w-full bg-gray-200 rounded flex items-center justify-center",children:r.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.title}),r.jsx("div",{className:"text-sm text-gray-500",children:e.originalTitle}),e.featured&&r.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:"대표 콘텐츠"})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-indigo-100 text-indigo-800",children:es(e.category)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"방영 중"===er(e.status)?"bg-green-100 text-green-800":"완결"===er(e.status)?"bg-blue-100 text-blue-800":"개봉 예정"===er(e.status)?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:er(e.status)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["#",e.orderNumber||t.indexOf(e)+1]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-1",children:[r.jsx("button",{onClick:()=>en(e._id,"up"),className:"text-blue-500 hover:text-blue-700 p-1",disabled:0===t.indexOf(e),title:"순위 올리기",children:r.jsx(m.default,{size:14,className:0===t.indexOf(e)?"text-gray-300":""})}),r.jsx("button",{onClick:()=>en(e._id,"down"),className:"text-blue-500 hover:text-blue-700 p-1",disabled:t.indexOf(e)===t.length-1,title:"순위 내리기",children:r.jsx(p.default,{size:14,className:t.indexOf(e)===t.length-1?"text-gray-300":""})})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(g.default,{size:16,className:"text-yellow-400 mr-1"}),r.jsx("span",{className:"text-sm text-gray-900",children:e.reviewRating?e.reviewRating.toFixed(1):"-"}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(",e.reviewCount||0,")"]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,w.default)(new Date(e.createdAt),"yyyy.MM.dd",{locale:N.ko})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[r.jsx(d(),{href:`/${e.category}/${e.slug}`,className:"text-indigo-600 hover:text-indigo-900",target:"_blank",rel:"noopener noreferrer",children:r.jsx(f.default,{size:18})}),r.jsx(d(),{href:`/admin/content/edit/${e._id}`,className:"text-blue-600 hover:text-blue-900",children:r.jsx(y.default,{size:18})}),r.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:()=>{ee(e._id,e.title,e.contentType)},children:r.jsx(j.default,{size:18})})]})})]},e._id))})]})}),!s&&!c&&t.length>0&&(0,r.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:[H,"개 중 ",(E-1)*K+1,"-",Math.min(E*K,H),"개 표시"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{className:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50",onClick:()=>B(E-1),disabled:1===E,children:r.jsx(b.default,{size:18})}),Array.from({length:Math.min(5,L)},(e,t)=>{let a;return a=L<=5?t+1:E<=3?t+1:E>=L-2?L-4+t:E-2+t,r.jsx("button",{className:`px-3 py-1 rounded ${E===a?"bg-blue-600 text-white":"border border-gray-300 hover:bg-gray-100"}`,onClick:()=>B(a),children:a},a)}),r.jsx("button",{className:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50",onClick:()=>B(E+1),disabled:E===L,children:r.jsx(v.default,{size:18})})]})]})]})]}),z.visible&&r.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-md animate-fade-in",children:(0,r.jsxs)("div",{className:`flex items-center p-4 rounded-lg border ${"success"===z.type?"bg-green-50 border-green-500":"error"===z.type?"bg-red-50 border-red-500":"warning"===z.type?"bg-yellow-50 border-yellow-500":"bg-blue-50 border-blue-500"} shadow-md`,children:[r.jsx("div",{className:`flex-grow ${"success"===z.type?"text-green-800":"error"===z.type?"text-red-800":"warning"===z.type?"text-yellow-800":"text-blue-800"}`,children:z.message}),r.jsx("button",{onClick:()=>q({visible:!1,message:"",type:""}),className:"ml-4 text-gray-500 hover:text-gray-700",children:r.jsx("span",{className:"text-xl",children:"\xd7"})})]})})]})});s()}catch(e){s(e)}})},45564:e=>{e.exports=require("date-fns/locale")},41649:e=>{e.exports=require("next-auth/react")},62785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},40968:e=>{e.exports=require("next/head")},580:e=>{e.exports=require("prop-types")},16689:e=>{e.exports=require("react")},66405:e=>{e.exports=require("react-dom")},84466:e=>{e.exports=require("react-transition-group")},20997:e=>{e.exports=require("react/jsx-runtime")},99816:e=>{e.exports=require("styled-jsx/style")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},76162:e=>{e.exports=require("stream")},71568:e=>{e.exports=require("zlib")},76320:e=>{e.exports=import("@mui/system")},7214:e=>{e.exports=import("@mui/system/DefaultPropsProvider")},20543:e=>{e.exports=import("@mui/system/Grid")},98922:e=>{e.exports=import("@mui/system/colorManipulator")},9749:e=>{e.exports=import("@mui/system/createStyled")},87724:e=>{e.exports=import("@mui/system/createTheme")},69980:e=>{e.exports=import("@mui/system/cssVars")},38182:e=>{e.exports=import("@mui/system/spacing")},40387:e=>{e.exports=import("@mui/system/styleFunctionSx")},53459:e=>{e.exports=import("@mui/utils/capitalize")},4788:e=>{e.exports=import("@mui/utils/chainPropTypes")},10972:e=>{e.exports=import("@mui/utils/composeClasses")},11114:e=>{e.exports=import("@mui/utils/deepmerge")},64953:e=>{e.exports=import("@mui/utils/elementTypeAcceptingRef")},60364:e=>{e.exports=import("@mui/utils/formatMuiErrorMessage")},47243:e=>{e.exports=import("@mui/utils/generateUtilityClass")},77609:e=>{e.exports=import("@mui/utils/generateUtilityClasses")},72047:e=>{e.exports=import("@mui/utils/integerPropType")},55124:e=>{e.exports=import("@mui/utils/isFocusVisible")},21209:e=>{e.exports=import("@mui/utils/refType")},34208:e=>{e.exports=import("@mui/utils/resolveProps")},33286:e=>{e.exports=import("@mui/utils/useEventCallback")},32626:e=>{e.exports=import("@mui/utils/useForkRef")},99542:e=>{e.exports=import("@mui/utils/useId")},89036:e=>{e.exports=import("@mui/utils/useLazyRef")},99049:e=>{e.exports=import("@mui/utils/useTimeout")},16593:e=>{e.exports=import("clsx")},69915:e=>{e.exports=import("js-cookie")},95645:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>g});var r=a(16689);a(580);var l=a(16593),i=a(4788),n=a(10972),d=a(68875),o=a(72456),c=a(22307),m=a(37450),x=a(20997),u=e([l,i,n,m,d,c,o]);[l,i,n,m,d,c,o]=u.then?(await u)():u;let h=e=>{let{classes:t}=e;return(0,n.default)({root:["root"]},m.getCardUtilityClass,t)},p=(0,d.default)(c.default,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),g=r.forwardRef(function(e,t){let a=(0,o.useDefaultProps)({props:e,name:"MuiCard"}),{className:s,raised:r=!1,...i}=a,n={...a,raised:r},d=h(n);return(0,x.jsx)(p,{className:(0,l.default)(d.root,s),elevation:r?8:void 0,ref:t,ownerState:n,...i})});s()}catch(e){s(e)}})},37450:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>d,getCardUtilityClass:()=>n});var r=a(77609),l=a(47243),i=e([r,l]);function n(e){return(0,l.default)("MuiCard",e)}[r,l]=i.then?(await i)():i;let d=(0,r.default)("MuiCard",["root"]);s()}catch(e){s(e)}})},23579:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>h});var r=a(16689);a(580);var l=a(16593),i=a(10972),n=a(68875),d=a(72456),o=a(59380),c=a(20997),m=e([l,i,o,n,d]);[l,i,o,n,d]=m.then?(await m)():m;let x=e=>{let{classes:t,disableSpacing:a}=e;return(0,i.default)({root:["root",!a&&"spacing"]},o.getCardActionsUtilityClass,t)},u=(0,n.default)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,!a.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),h=r.forwardRef(function(e,t){let a=(0,d.useDefaultProps)({props:e,name:"MuiCardActions"}),{disableSpacing:s=!1,className:r,...i}=a,n={...a,disableSpacing:s},o=x(n);return(0,c.jsx)(u,{className:(0,l.default)(o.root,r),ownerState:n,ref:t,...i})});s()}catch(e){s(e)}})},59380:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>d,getCardActionsUtilityClass:()=>n});var r=a(77609),l=a(47243),i=e([r,l]);function n(e){return(0,l.default)("MuiCardActions",e)}[r,l]=i.then?(await i)():i;let d=(0,r.default)("MuiCardActions",["root","spacing"]);s()}catch(e){s(e)}})},79187:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>h});var r=a(16689);a(580);var l=a(16593),i=a(10972),n=a(68875),d=a(72456),o=a(91057),c=a(20997),m=e([l,i,o,n,d]);[l,i,o,n,d]=m.then?(await m)():m;let x=e=>{let{classes:t}=e;return(0,i.default)({root:["root"]},o.getCardContentUtilityClass,t)},u=(0,n.default)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),h=r.forwardRef(function(e,t){let a=(0,d.useDefaultProps)({props:e,name:"MuiCardContent"}),{className:s,component:r="div",...i}=a,n={...a,component:r},o=x(n);return(0,c.jsx)(u,{as:r,className:(0,l.default)(o.root,s),ownerState:n,ref:t,...i})});s()}catch(e){s(e)}})},91057:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>d,getCardContentUtilityClass:()=>n});var r=a(77609),l=a(47243),i=e([r,l]);function n(e){return(0,l.default)("MuiCardContent",e)}[r,l]=i.then?(await i)():i;let d=(0,r.default)("MuiCardContent",["root"]);s()}catch(e){s(e)}})}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[3393,1859,6859,8559,6870,1877,449,2195,8505],()=>a(68020));module.exports=s})();