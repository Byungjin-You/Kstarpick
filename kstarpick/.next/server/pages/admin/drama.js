"use strict";(()=>{var e={};e.id=7579,e.ids=[7579],e.modules={65048:(e,t,a)=>{a.r(t),a.d(t,{config:()=>E,default:()=>M,getServerSideProps:()=>I,getStaticPaths:()=>D,getStaticProps:()=>z,reportWebVitals:()=>O,routeModule:()=>B,unstable_getServerProps:()=>L,unstable_getServerSideProps:()=>V,unstable_getStaticParams:()=>W,unstable_getStaticPaths:()=>U,unstable_getStaticProps:()=>R});var r={};a.r(r),a.d(r,{default:()=>q,getServerSideProps:()=>A});var s=a(87093),l=a(35244),i=a(1323),d=a(65949),n=a(81928),c=a(20997),o=a(16689),x=a(11163),m=a(41664),h=a.n(m),u=a(41649),p=a(79046),g=a(5451),y=a(76090),f=a(23552),b=a(28886),j=a(84672),v=a(84257),N=a(62691),w=a(33980),k=a(40377),S=a(47553),_=a(20245),T=a(45507),C=a(45564),$=a(25675),P=a.n($);async function A(e){let t=await (0,u.getSession)(e);return t&&t.user?.role==="admin"?{props:{session:t}}:{redirect:{destination:"/admin/login",permanent:!1}}}let q=function(){let e=(0,x.useRouter)(),{data:t,status:a}=(0,u.useSession)(),[r,s]=(0,o.useState)([]),[l,i]=(0,o.useState)(!0),[d,n]=(0,o.useState)(null),[m,$]=(0,o.useState)({visible:!1,message:"",type:""}),A="drama",[q,M]=(0,o.useState)(""),[z,D]=(0,o.useState)(1),[I,E]=(0,o.useState)(1),[O,R]=(0,o.useState)(0),[U,W]=(0,o.useState)("orderNumber"),[L,V]=(0,o.useState)("asc"),[B,H]=(0,o.useState)(20),[J,F]=(0,o.useState)(null),[G,Z]=(0,o.useState)(null),[K,X]=(0,o.useState)([]),[Y,Q]=(0,o.useState)(!1),[ee,et]=(0,o.useState)(!1),ea=async()=>{if(t){i(!0),n(null);try{let e;let t=new URLSearchParams({page:z,limit:B,sortBy:U,sortOrder:L});A&&t.append("category",A),q&&t.append("title",q);let a=await fetch(`/api/dramas?${t.toString()}`),r=await a.json();if(!a.ok)throw Error(r.message||"콘텐츠 목록을 불러오는 중 오류가 발생했습니다.");(e={data:r.data.map(e=>({...e,contentType:e.category||A})),pagination:r.pagination}).data.length,s(e.data),E(e.pagination.pages),R(e.pagination.total)}catch(e){n(e.message),ed(e.message,"error")}finally{i(!1)}}},er=async(e,t,a)=>{if(confirm(`"${t}" 콘텐츠를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`))try{let t=a;t||(t=A||"content");let r=`/api/dramas/${e}`,s=localStorage.getItem("token")||localStorage.getItem("adminToken"),l=await fetch(r,{method:"DELETE",headers:{Authorization:s?`Bearer ${s}`:""}});if(!l.ok){let e=await l.json();throw Error(e.message||"콘텐츠 삭제 중 오류가 발생했습니다.")}ea(),ed("콘텐츠가 성공적으로 삭제되었습니다.","success")}catch(e){ed(e.message,"error")}},es=e=>{X(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},el=async()=>{if(0!==K.length)try{et(!0);let e=localStorage.getItem("token")||localStorage.getItem("adminToken"),t=K.map(t=>fetch(`/api/dramas/${t}`,{method:"DELETE",headers:{Authorization:e?`Bearer ${e}`:""}}));(await Promise.all(t)).some(e=>!e.ok)?n("일부 항목 삭제 중 오류가 발생했습니다."):(s(r.filter(e=>!K.includes(e._id))),Q(!1),X([]),ed(`${K.length}개의 드라마가 성공적으로 삭제되었습니다.`,"success"))}catch(e){n("드라마 삭제 중 오류가 발생했습니다.")}finally{et(!1)}},ei=e=>{U===e?V("asc"===L?"desc":"asc"):(W(e),V("desc"))},ed=(e,t="info")=>{$({visible:!0,message:e,type:t}),setTimeout(()=>$({visible:!1,message:"",type:""}),3e3)},en=e=>({drama:"드라마",movie:"영화",variety:"예능",documentary:"다큐멘터리",other:"기타"})[e]||e,ec=e=>({ongoing:"방영 중",completed:"완결",upcoming:"개봉 예정",canceled:"취소됨"})[e]||e,eo=async(e,t,a)=>{try{let s;let l=r.find(t=>t._id===e);if(!l)return;let i=localStorage.getItem("token")||localStorage.getItem("adminToken");s="Movie"===l.category||"movie"===l.category||"Movie"===a||"movie"===a?`/api/tvfilm/${e}`:`/api/dramas/${e}`;let d=await fetch(s,{method:"PUT",headers:{Authorization:i?`Bearer ${i}`:"","Content-Type":"application/json"},body:JSON.stringify({...l,orderNumber:t,previousOrderNumber:l.orderNumber||t})});if(!d.ok)throw await d.text(),Error(`순위 업데이트에 실패했습니다. (${d.status})`);ea(),ed("순위가 성공적으로 업데이트되었습니다.","success")}catch(e){ed(`순위 업데이트 중 오류가 발생했습니다: ${e.message}`,"error")}},ex=(e,t)=>{let a=r.findIndex(t=>t._id===e);if(-1===a)return;let s=r[a];"up"===t&&a>0?eo(e,Math.max(1,(r[a-1].orderNumber||a)-1),s.contentType||s.category):"down"===t&&a<r.length-1&&eo(e,(r[a+1].orderNumber||a+2)+1,s.contentType||s.category)},em=(e,t)=>{F(t),e.dataTransfer.effectAllowed="move",e.currentTarget.style.opacity="0.5"},eh=e=>{e.currentTarget.style.opacity="1",F(null),Z(null)},eu=(e,t)=>{e.preventDefault(),e.dataTransfer.dropEffect="move",J&&J._id!==t._id&&(J.category||J.contentType)===(t.category||t.contentType)&&Z(t)},ep=e=>{e.preventDefault(),Z(null)},eg=async(e,t)=>{if(e.preventDefault(),!J||J._id===t._id){F(null),Z(null);return}let a=J.category||J.contentType;if(a!==(t.category||t.contentType)){ed("같은 카테고리 내에서만 순위를 변경할 수 있습니다.","warning"),F(null),Z(null);return}try{let e=r.filter(e=>(e.category||e.contentType)===a),s=e.findIndex(e=>e._id===J._id),l=e.findIndex(e=>e._id===t._id);if(-1===s||-1===l)return;let i=[...e],[d]=i.splice(s,1);i.splice(l,0,d);let n=i.map(async(e,t)=>{let a=t+1,r=`/api/dramas/${e._id}`;return fetch(r,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,orderNumber:a,previousOrderNumber:e.orderNumber||a})})});await Promise.all(n),await ea(),ed("순위가 성공적으로 변경되었습니다.","success")}catch(e){ed("순위 변경 중 오류가 발생했습니다.","error")}finally{F(null),Z(null)}},ey=async()=>{if(0!==r.length)try{let e=r.filter(e=>"drama"===e.category||"Drama"===e.category),t=r.filter(e=>"movie"===e.category||"Movie"===e.category),a=[...e].sort((e,t)=>new Date(t.createdAt||t.updatedAt)-new Date(e.createdAt||e.updatedAt)),s=[...t].sort((e,t)=>new Date(t.createdAt||t.updatedAt)-new Date(e.createdAt||e.updatedAt)),l=a.map(async(e,t)=>{let a=t+1;return fetch(`/api/dramas/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderNumber:a,previousOrderNumber:e.orderNumber||a})})}),i=s.map(async(e,t)=>{let a=t+1;return fetch(`/api/dramas/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderNumber:a,previousOrderNumber:e.orderNumber||a})})});await Promise.all([...l,...i]),ea(),ed(`드라마 ${a.length}개, 영화 ${s.length}개의 순위가 최신순으로 정렬되었습니다.`,"success")}catch(e){ed("순위 정렬 중 오류가 발생했습니다.","error")}};return(0,c.jsxs)(p.default,{children:[(0,c.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"드라마 관리"})}),(0,c.jsxs)("div",{className:"flex gap-2",children:[K.length>0&&(0,c.jsxs)("button",{onClick:()=>{if(0===K.length){n("선택된 항목이 없습니다.");return}Q(!0)},className:"bg-red-600 hover:bg-red-700 text-white border-2 border-red-600 py-2 px-4 rounded-md flex items-center",children:[c.jsx(g.default,{className:"mr-2 h-5 w-5"}),"선택 삭제 (",K.length,")"]}),(0,c.jsxs)("button",{onClick:ey,className:"bg-white hover:bg-gray-50 border-2 py-2 px-4 rounded-md flex items-center",style:{borderColor:"#233cfa",color:"#233cfa"},disabled:l,children:[c.jsx(y.default,{className:"mr-2 h-5 w-5"}),"순위 정렬"]}),(0,c.jsxs)(h(),{href:"/admin/content/crawler",className:"bg-white hover:bg-gray-50 border-2 py-2 px-4 rounded-md flex items-center",style:{borderColor:"#233cfa",color:"#233cfa"},children:[c.jsx(f.default,{className:"mr-2 h-5 w-5"}),"드라마 정보 등록"]}),(0,c.jsxs)(h(),{href:"/admin/content/new",className:"bg-white hover:bg-gray-50 border-2 py-2 px-4 rounded-md flex items-center",style:{borderColor:"#233cfa",color:"#233cfa"},children:[c.jsx(b.default,{className:"mr-2 h-5 w-5"}),"신규 드라마 등록"]})]})]}),c.jsx("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:(0,c.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[c.jsx("div",{className:"flex-1 flex min-w-[300px]",children:(0,c.jsxs)("form",{onSubmit:t=>{t.preventDefault(),D(1);let a={...e.query};q?a.search=q:delete a.search,delete a.page,e.push({pathname:e.pathname,query:a},void 0,{shallow:!0}),ea()},className:"w-full flex",children:[c.jsx("input",{type:"text",placeholder:"제목 검색...",className:"flex-1 border border-gray-300 rounded-l-md px-3 py-2",value:q,onChange:e=>M(e.target.value)}),c.jsx("button",{type:"submit",className:"bg-gray-200 hover:bg-gray-300 px-3 py-2 rounded-r-md",children:c.jsx(j.default,{size:20})})]})}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsxs)("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm",value:`${U}-${L}`,onChange:e=>{let[t,a]=e.target.value.split("-");W(t),V(a),D(1)},children:[c.jsx("option",{value:"orderNumber-asc",children:"순위순"}),c.jsx("option",{value:"createdAt-desc",children:"최신순"}),c.jsx("option",{value:"createdAt-asc",children:"오래된순"}),c.jsx("option",{value:"title-asc",children:"제목 오름차순"}),c.jsx("option",{value:"title-desc",children:"제목 내림차순"}),c.jsx("option",{value:"reviewRating-desc",children:"평점 높은순"}),c.jsx("option",{value:"reviewCount-desc",children:"리뷰 많은순"}),c.jsx("option",{value:"views-desc",children:"조회수 높은순"})]}),(0,c.jsxs)("select",{className:"border border-gray-300 rounded-md px-3 py-2 text-sm",value:B,onChange:e=>{H(Number(e.target.value)),D(1)},children:[c.jsx("option",{value:"10",children:"10개씩"}),c.jsx("option",{value:"20",children:"20개씩"}),c.jsx("option",{value:"50",children:"50개씩"})]})]})]})}),(0,c.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[l?(0,c.jsxs)("div",{className:"p-20 text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),c.jsx("p",{className:"mt-3 text-gray-600",children:"콘텐츠를 불러오는 중..."})]}):d?(0,c.jsxs)("div",{className:"p-6 text-center text-red-600",children:[c.jsx("p",{children:d}),c.jsx("button",{onClick:ea,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"다시 시도"})]}):0===r.length?c.jsx("div",{className:"p-10 text-center text-gray-600",children:c.jsx("p",{children:"콘텐츠가 없습니다. 새 콘텐츠를 등록해보세요."})}):c.jsx("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[c.jsx("th",{scope:"col",className:"px-2 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-10",children:c.jsx("input",{type:"checkbox",onChange:e=>{e.target.checked?X(r.map(e=>e._id)):X([])},checked:r.length>0&&K.length===r.length,className:"h-4 w-4 rounded border-gray-300 text-[#ff3e8e] focus:ring-[#ff3e8e]"})}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"정보"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"콘텐츠 타입"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"순위"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,c.jsxs)("button",{className:"flex items-center",onClick:()=>ei("reviewRating"),children:["평점","reviewRating"===U&&c.jsx("span",{className:"ml-1",children:"asc"===L?"↑":"↓"})]})}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,c.jsxs)("button",{className:"flex items-center",onClick:()=>ei("createdAt"),children:["등록일","createdAt"===U&&c.jsx("span",{className:"ml-1",children:"asc"===L?"↑":"↓"})]})}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(e=>(0,c.jsxs)("tr",{className:`hover:bg-gray-50 cursor-move transition-colors ${G&&G._id===e._id?"bg-blue-50 border-t-2 border-b-2 border-blue-400":""}`,draggable:"true",onDragStart:t=>em(t,e),onDragEnd:eh,onDragOver:t=>eu(t,e),onDragLeave:ep,onDrop:t=>eg(t,e),children:[c.jsx("td",{className:"px-2 py-4 text-center",children:c.jsx("input",{type:"checkbox",checked:K.includes(e._id),onChange:()=>es(e._id),className:"h-4 w-4 rounded border-gray-300 text-[#ff3e8e] focus:ring-[#ff3e8e]"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 h-16 w-12 relative",children:e.coverImage?c.jsx(P(),{src:e.coverImage,alt:e.title,layout:"fill",objectFit:"cover",className:"rounded"}):c.jsx("div",{className:"h-full w-full bg-gray-200 rounded flex items-center justify-center",children:c.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})})}),(0,c.jsxs)("div",{className:"ml-4",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.title}),c.jsx("div",{className:"text-sm text-gray-500",children:e.originalTitle}),e.featured&&c.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:"대표 콘텐츠"})]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-indigo-100 text-indigo-800",children:en(e.category)})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"방영 중"===ec(e.status)?"bg-green-100 text-green-800":"완결"===ec(e.status)?"bg-blue-100 text-blue-800":"개봉 예정"===ec(e.status)?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:ec(e.status)})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["#",r.filter(t=>(t.category||t.contentType)===(e.category||e.contentType)).findIndex(t=>t._id===e._id)+1]}),(0,c.jsxs)("div",{className:"flex flex-col space-y-1",children:[c.jsx("button",{onClick:()=>ex(e._id,"up"),className:"text-blue-500 hover:text-blue-700 p-1",disabled:0===r.filter(t=>(t.category||t.contentType)===(e.category||e.contentType)).findIndex(t=>t._id===e._id),title:"순위 올리기",children:c.jsx(y.default,{size:14,className:0===r.filter(t=>(t.category||t.contentType)===(e.category||e.contentType)).findIndex(t=>t._id===e._id)?"text-gray-300":""})}),c.jsx("button",{onClick:()=>ex(e._id,"down"),className:"text-blue-500 hover:text-blue-700 p-1",disabled:(()=>{let t=r.filter(t=>(t.category||t.contentType)===(e.category||e.contentType));return t.findIndex(t=>t._id===e._id)===t.length-1})(),title:"순위 내리기",children:c.jsx(v.default,{size:14,className:(()=>{let t=r.filter(t=>(t.category||t.contentType)===(e.category||e.contentType));return t.findIndex(t=>t._id===e._id)===t.length-1?"text-gray-300":""})()})})]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx(N.default,{size:16,className:"text-yellow-400 mr-1"}),c.jsx("span",{className:"text-sm text-gray-900",children:e.reviewRating?e.reviewRating.toFixed(1):"-"}),(0,c.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(",e.reviewCount||0,")"]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,T.default)(new Date(e.createdAt),"yyyy.MM.dd",{locale:C.ko})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium",children:(0,c.jsxs)("div",{className:"flex justify-start space-x-2",children:[c.jsx(h(),{href:`/${e.category}/${e.slug}`,className:"text-indigo-600 hover:text-indigo-900",target:"_blank",rel:"noopener noreferrer",children:c.jsx(w.default,{size:18})}),c.jsx(h(),{href:`/admin/content/edit/${e._id}`,className:"text-blue-600 hover:text-blue-900",children:c.jsx(k.default,{size:18})}),c.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:()=>{er(e._id,e.title,e.contentType)},children:c.jsx(g.default,{size:18})})]})})]},e._id))})]})}),!l&&!d&&r.length>0&&(0,c.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"text-sm text-gray-700",children:[O,"개 중 ",(z-1)*B+1,"-",Math.min(z*B,O),"개 표시"]}),(0,c.jsxs)("div",{className:"flex space-x-2",children:[c.jsx("button",{className:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50",onClick:()=>D(z-1),disabled:1===z,children:c.jsx(S.default,{size:18})}),Array.from({length:Math.min(5,I)},(e,t)=>{let a;return a=I<=5?t+1:z<=3?t+1:z>=I-2?I-4+t:z-2+t,c.jsx("button",{className:`px-3 py-1 rounded ${z===a?"bg-blue-600 text-white":"border border-gray-300 hover:bg-gray-100"}`,onClick:()=>D(a),children:a},a)}),c.jsx("button",{className:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50",onClick:()=>D(z+1),disabled:z===I,children:c.jsx(_.default,{size:18})})]})]})]}),Y&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,c.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"다중 삭제"}),(0,c.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["선택한 ",K.length,"개의 드라마를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."]}),(0,c.jsxs)("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",onClick:()=>Q(!1),disabled:ee,children:"취소"}),c.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center",onClick:el,disabled:ee,children:ee?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"삭제 중..."]}):"삭제"})]})]})}),m.visible&&c.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-md animate-fade-in",children:(0,c.jsxs)("div",{className:`flex items-center p-4 rounded-lg border ${"success"===m.type?"bg-green-50 border-green-500":"error"===m.type?"bg-red-50 border-red-500":"warning"===m.type?"bg-yellow-50 border-yellow-500":"bg-blue-50 border-blue-500"} shadow-md`,children:[c.jsx("div",{className:`flex-grow ${"success"===m.type?"text-green-800":"error"===m.type?"text-red-800":"warning"===m.type?"text-yellow-800":"text-blue-800"}`,children:m.message}),c.jsx("button",{onClick:()=>$({visible:!1,message:"",type:""}),className:"ml-4 text-gray-500 hover:text-gray-700",children:c.jsx("span",{className:"text-xl",children:"\xd7"})})]})})]})},M=(0,i.hoist)(r,"default"),z=(0,i.hoist)(r,"getStaticProps"),D=(0,i.hoist)(r,"getStaticPaths"),I=(0,i.hoist)(r,"getServerSideProps"),E=(0,i.hoist)(r,"config"),O=(0,i.hoist)(r,"reportWebVitals"),R=(0,i.hoist)(r,"unstable_getStaticProps"),U=(0,i.hoist)(r,"unstable_getStaticPaths"),W=(0,i.hoist)(r,"unstable_getStaticParams"),L=(0,i.hoist)(r,"unstable_getServerProps"),V=(0,i.hoist)(r,"unstable_getServerSideProps"),B=new s.PagesRouteModule({definition:{kind:l.RouteKind.PAGES,page:"/admin/drama",pathname:"/admin/drama",bundlePath:"",filename:""},components:{App:n.default,Document:d.default},userland:r})},79046:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var r=a(20997),s=a(16689),l=a(41664),i=a.n(l),d=a(11163),n=a(41649),c=a(83364),o=a(93663),x=a(71952),m=a(82096),h=a(83055),u=a(47963),p=a(51565),g=a(7381),y=a(41549),f=a(90816),b=a(62691),j=a(63696);let v=({children:e})=>{let t=(0,d.useRouter)(),{data:a,status:l}=(0,n.useSession)(),[v,N]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{("unauthenticated"===l||a&&"admin"!==a.user.role)&&t.push("/admin/login")},[a,l,t]),"loading"===l)?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:r.jsx("div",{className:"p-8 bg-white rounded-lg shadow-md",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-t-[#ff3e8e] rounded-full animate-spin"}),r.jsx("p",{className:"text-xl font-medium",children:"Loading admin panel..."})]})})}):"unauthenticated"===l||a&&"admin"!==a.user.role?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:r.jsx("div",{className:"p-8 bg-white rounded-lg shadow-md max-w-md",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4 text-center",children:[r.jsx(c.default,{size:48,className:"text-red-500"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Unauthorized Access"}),r.jsx("p",{className:"text-gray-600",children:"You don't have permission to access the admin area."}),r.jsx(i(),{href:"/",className:"px-4 py-2 mt-4 text-white bg-[#ff3e8e] rounded-md hover:bg-[#e02e7c]",children:"Go to Homepage"})]})})}):(o.default,x.default,m.default,h.default,u.default,p.default,r.jsx("div",{className:"min-h-screen bg-white",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("div",{className:"w-64 min-h-screen bg-white shadow-md",children:[r.jsx("div",{className:"p-4 border-b",children:r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"관리자 패널"})}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("ul",{className:"space-y-2",children:[r.jsx("li",{children:(0,r.jsxs)(i(),{href:"/admin",className:`flex items-center px-4 py-2 rounded-lg ${"/admin"===t.pathname?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[r.jsx(o.default,{className:"mr-3 h-5 w-5"}),"대시보드"]})}),r.jsx("li",{children:(0,r.jsxs)(i(),{href:"/admin/drama",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/drama")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[r.jsx(g.default,{className:"mr-3 h-5 w-5"}),"드라마 관리"]})}),r.jsx("li",{children:(0,r.jsxs)(i(),{href:"/admin/tvfilm",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/tvfilm")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[r.jsx(y.default,{className:"mr-3 h-5 w-5"}),"영화 관리"]})}),r.jsx("li",{children:(0,r.jsxs)(i(),{href:"/admin/news",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/news")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[r.jsx(f.default,{className:"mr-3 h-5 w-5"}),"뉴스 관리"]})}),r.jsx("li",{children:(0,r.jsxs)(i(),{href:"/admin/music",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/music")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[r.jsx(h.default,{className:"mr-3 h-5 w-5"}),"음악 차트 관리"]})}),r.jsx("li",{children:(0,r.jsxs)(i(),{href:"/admin/celeb",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/celeb")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[r.jsx(b.default,{className:"mr-3 h-5 w-5"}),"셀럽 관리"]})})]}),r.jsx("div",{className:"border-t mt-4 pt-4",children:(0,r.jsxs)("button",{onClick:()=>{localStorage.removeItem("adminToken"),sessionStorage.removeItem("adminToken"),(0,n.signOut)({callbackUrl:"/"})},className:"flex items-center w-full px-4 py-2 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[r.jsx(j.default,{className:"mr-3 h-5 w-5"}),"로그아웃"]})})]})]}),r.jsx("div",{className:"flex-1 p-8",children:e})]})}))}},84257:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});let r=(0,a(64370).default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},76090:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});let r=(0,a(64370).default)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},47553:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});let r=(0,a(64370).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},20245:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});let r=(0,a(64370).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},23552:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});let r=(0,a(64370).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},33980:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});let r=(0,a(64370).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},40377:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});let r=(0,a(64370).default)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},28886:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});let r=(0,a(64370).default)("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},84672:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});let r=(0,a(64370).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},5451:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});let r=(0,a(64370).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},45564:e=>{e.exports=require("date-fns/locale")},41649:e=>{e.exports=require("next-auth/react")},62785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},40968:e=>{e.exports=require("next/head")},16689:e=>{e.exports=require("react")},66405:e=>{e.exports=require("react-dom")},20997:e=>{e.exports=require("react/jsx-runtime")},99816:e=>{e.exports=require("styled-jsx/style")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},76162:e=>{e.exports=require("stream")},71568:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[3393,1859,6859,8559,6870,84,2361,8505],()=>a(65048));module.exports=r})();