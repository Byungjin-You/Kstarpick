"use strict";(()=>{var e={};e.id=2300,e.ids=[2300],e.modules={51603:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>p,default:()=>u,getServerSideProps:()=>x,getStaticPaths:()=>h,getStaticProps:()=>m,reportWebVitals:()=>g,routeModule:()=>j,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>f});var s=r(87093),i=r(35244),l=r(1323),n=r(65949),o=r(81928),d=r(88548),c=e([d]);d=(c.then?(await c)():c)[0];let u=(0,l.hoist)(d,"default"),m=(0,l.hoist)(d,"getStaticProps"),h=(0,l.hoist)(d,"getStaticPaths"),x=(0,l.hoist)(d,"getServerSideProps"),p=(0,l.hoist)(d,"config"),g=(0,l.hoist)(d,"reportWebVitals"),f=(0,l.hoist)(d,"unstable_getStaticProps"),b=(0,l.hoist)(d,"unstable_getStaticPaths"),y=(0,l.hoist)(d,"unstable_getStaticParams"),v=(0,l.hoist)(d,"unstable_getServerProps"),w=(0,l.hoist)(d,"unstable_getServerSideProps"),j=new s.PagesRouteModule({definition:{kind:i.RouteKind.PAGES,page:"/admin/login",pathname:"/admin/login",bundlePath:"",filename:""},components:{App:o.default,Document:n.default},userland:d});a()}catch(e){a(e)}})},64370:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l,toKebabCase:()=>i});var a=r(16689),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=(e,t)=>{let r=(0,a.forwardRef)(({color:r="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:o,children:d,...c},u)=>(0,a.createElement)("svg",{ref:u,...s,width:l,height:l,stroke:r,strokeWidth:o?24*Number(n)/Number(l):n,className:`lucide lucide-${i(e)}`,...c},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...(Array.isArray(d)?d:[d])||[]]));return r.displayName=`${e}`,r}},83364:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});let a=(0,r(64370).default)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},83460:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});let a=(0,r(64370).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},62608:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});let a=(0,r(64370).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},88548:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>b,getServerSideProps:()=>y});var s=r(20997),i=r(16689),l=r(41649),n=r(11163),o=r(41664),d=r.n(o),c=r(40968),u=r.n(c),m=r(83364),h=r(62608),x=r(83460),p=r(69915),g=r(99648),f=e([p,g]);function b(){let[e,t]=(0,i.useState)(""),[r,a]=(0,i.useState)(""),[o,c]=(0,i.useState)(""),[f,b]=(0,i.useState)(!1),y=(0,n.useRouter)(),{data:v,status:w}=(0,l.useSession)(),j=async t=>{if(t.preventDefault(),!e||!r){c("Please enter both email and password.");return}try{if(b(!0),c(""),(await (0,l.signIn)("credentials",{redirect:!1,email:e,password:r})).error)try{let t=await g.default.post("/api/auth/login",{email:e,password:r});if(t.data.success&&t.data.token){let e=t.data.token;p.default.set("token",e,{expires:7}),localStorage.setItem("token",e),localStorage.setItem("adminToken",e),(await g.default.get("/api/auth/check-admin",{headers:{Authorization:`Bearer ${e}`}})).data.isAdmin?y.push("/admin"):(p.default.remove("token"),localStorage.removeItem("adminToken"),c("You do not have admin privileges."),b(!1))}else c("Invalid credentials. Please try again."),b(!1)}catch(e){c("Invalid credentials. Please try again."),b(!1)}else{let e=await fetch("/api/auth/check-admin");(await e.json()).isAdmin?y.push("/admin"):(await (0,l.signIn)("credentials",{redirect:!1,email:"",password:""}),c("You do not have admin privileges."),b(!1))}}catch(e){c("An error occurred during login. Please try again."),b(!1)}};return"loading"===w?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u(),{children:[s.jsx("title",{children:"Admin Login | K-POP News Portal"}),s.jsx("meta",{name:"description",content:"Admin login page for K-POP News Portal"})]}),s.jsx("div",{className:"min-h-screen flex flex-col justify-center items-center bg-gray-100 px-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-6 py-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Admin Portal"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your admin account"})]}),o&&(0,s.jsxs)("div",{className:"mb-6 flex items-center p-4 border-l-4 border-red-500 bg-red-50 text-red-700 rounded",children:[s.jsx(m.default,{className:"mr-2 h-5 w-5"}),s.jsx("p",{children:o})]}),(0,s.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(h.default,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-black",placeholder:"admin@example.com",value:e,onChange:e=>t(e.target.value)})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(x.default,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-black",placeholder:"••••••••",value:r,onChange:e=>a(e.target.value)})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:f,className:`w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 text-sm font-medium ${f?"opacity-70 cursor-not-allowed":""}`,children:f?"Signing in...":"Sign in to Admin"})})]})]}),s.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:(0,s.jsxs)("p",{className:"text-sm text-center text-gray-600",children:["Need an admin account? ",s.jsx(d(),{href:"/admin/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Register here"})]})})]}),s.jsx("div",{className:"text-center mt-6",children:s.jsx(d(),{href:"/",className:"text-sm text-gray-600 hover:text-gray-900",children:"← Back to homepage"})})]})})]})}async function y(e){return{props:{}}}[p,g]=f.then?(await f)():f,a()}catch(e){a(e)}})},41649:e=>{e.exports=require("next-auth/react")},62785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},40968:e=>{e.exports=require("next/head")},16689:e=>{e.exports=require("react")},66405:e=>{e.exports=require("react-dom")},20997:e=>{e.exports=require("react/jsx-runtime")},99816:e=>{e.exports=require("styled-jsx/style")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},76162:e=>{e.exports=require("stream")},71568:e=>{e.exports=require("zlib")},99648:e=>{e.exports=import("axios")},69915:e=>{e.exports=import("js-cookie")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[3393,1859,6859,8559,8505],()=>r(51603));module.exports=a})();