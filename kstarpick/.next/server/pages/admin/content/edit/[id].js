"use strict";(()=>{var e={};e.id=828,e.ids=[828],e.modules={88035:(e,t,s)=>{s.r(t),s.d(t,{config:()=>$,default:()=>k,getServerSideProps:()=>L,getStaticPaths:()=>C,getStaticProps:()=>S,reportWebVitals:()=>D,routeModule:()=>q,unstable_getServerProps:()=>U,unstable_getServerSideProps:()=>M,unstable_getStaticParams:()=>z,unstable_getStaticPaths:()=>T,unstable_getStaticProps:()=>R});var a={};s.r(a),s.d(a,{default:()=>N,getServerSideProps:()=>w});var r=s(87093),l=s(35244),i=s(1323),n=s(65949),d=s(81928),c=s(20997),o=s(16689),m=s(11163),x=s(41649),u=s(79046),h=s(25875),p=s(55809),g=s(3785),b=s(43613),y=s(68453),f=s(25482),v=s(62691);if(s(25675),"undefined"!=typeof document){let e=document.createElement("style");e.textContent=Object.entries({"@keyframes progress":{"0%":{width:"0%"},"100%":{width:"100%"}},".animate-progress":{animation:"progress 3s ease-in-out infinite"},"@keyframes pulse":{"0%, 100%":{opacity:1},"50%":{opacity:.5}},".animate-pulse":{animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},"@keyframes ping":{"75%, 100%":{transform:"scale(2)",opacity:0}},".animate-ping":{animation:"ping 1s cubic-bezier(0, 0, 0.2, 1) infinite"},"@keyframes sparkle":{"0%":{opacity:0,transform:"scale(0.8)"},"50%":{opacity:1,transform:"scale(1.2)"},"100%":{opacity:0,transform:"scale(0.8)"}},".animate-star":{animation:"sparkle 1.5s ease-in-out"}}).map(([e,t])=>(e.startsWith("@keyframes"),`${e} ${JSON.stringify(t)}`)).join("\n").replace(/"/g,"").replace(/,/g,";"),document.head.appendChild(e)}let j=e=>{if(!e)return null;let t=e.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=)|youtu\.be\/)([^#&?]*).*/);return t&&t[1]&&11===t[1].length?t[1]:null};function N(){let e=(0,m.useRouter)(),{id:t}=e.query,[s,a]=(0,o.useState)({title:"",originalTitle:"",englishTitle:"",description:"",summary:"",status:"ongoing",country:"KOREA",releaseDate:"",runtime:"",ageRating:"",director:"",genres:[],category:"drama",coverImage:null,bannerImage:null,trailerUrl:"",cast:[],watchProviders:[],streamingLinks:{netflix:"",apple:"",disney:"",viki:"",wavve:""},whereToWatch:[],tags:[],rating:0,views:0,likesCount:0,dislikesCount:0,metaDescription:"",metaKeywords:"",videos:[],reviews:[],episodeList:[]}),[r,l]=(0,o.useState)(!0),[i,n]=(0,o.useState)(null),[d,x]=(0,o.useState)({visible:!1,message:"",type:""}),[N,w]=(0,o.useState)(!1),[k,S]=(0,o.useState)(!1),[C,L]=(0,o.useState)(!1),[$,D]=(0,o.useState)(!1),[R,T]=(0,o.useState)(""),[z,U]=(0,o.useState)(""),[M,q]=(0,o.useState)("basic"),[P,I]=(0,o.useState)({visible:!1,message:"",type:""}),[F,A]=(0,o.useState)([]),[H,K]=(0,o.useState)(!1),[W,E]=(0,o.useState)([]),[V,_]=(0,o.useState)(!1),[O,Y]=(0,o.useState)(null),[B,J]=(0,o.useState)(""),[Z,G]=(0,o.useState)(!1),[X,Q]=(0,o.useState)(null),[ee,et]=(0,o.useState)(null),[es,ea]=(0,o.useState)(""),[er,el]=(0,o.useState)(!0),[ei,en]=(0,o.useState)(""),[ed,ec]=(0,o.useState)("trailer"),[eo,em]=(0,o.useState)(""),[ex,eu]=(0,o.useState)(""),[eh,ep]=(0,o.useState)(""),[eg,eb]=(0,o.useState)(5),[ey,ef]=(0,o.useState)(""),[ev,ej]=(0,o.useState)(""),[eN,ew]=(0,o.useState)(""),[ek,eS]=(0,o.useState)(""),[eC,eL]=(0,o.useState)(null),[e$,eD]=(0,o.useState)(""),[eR,eT]=(0,o.useState)(null),[ez,eU]=(0,o.useState)(""),[eM,eq]=(0,o.useState)({}),[eP,eI]=(0,o.useState)(null),[eF,eA]=(0,o.useState)(null),[eH,eK]=(0,o.useState)(""),[eW,eE]=(0,o.useState)(""),[eV,e_]=(0,o.useState)(""),[eO,eY]=(0,o.useState)(""),[eB,eJ]=(0,o.useState)(""),[eZ,eG]=(0,o.useState)(""),eX=(0,o.useRef)(null),eQ=(0,o.useRef)(null);(0,o.useRef)(null);let[e0,e2]=(0,o.useState)([]),[e1,e4]=(0,o.useState)([]),[e5,e3]=(0,o.useState)({netflix:!1,apple:!1,disney:!1,viki:!1,wavve:!1}),[e6,e7]=(0,o.useState)({basic:!1,videos:!1,reviews:!1,episodes:!1}),e8=e=>{let{name:t,value:s}=e.target;a(e=>({...e,[t]:s}))},e9=async a=>{a.preventDefault(),L(!0);try{let a=localStorage.getItem("token")||localStorage.getItem("adminToken"),r=await fetch(`/api/dramas/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:a?`Bearer ${a}`:""},body:JSON.stringify(s)}),l=await r.json();if(!r.ok)throw Error(l.message||"콘텐츠 수정 중 오류가 발생했습니다.");te("콘텐츠가 성공적으로 수정되었습니다.","success"),setTimeout(()=>e.push("/admin/content"),1500)}catch(e){te(e.message,"error")}finally{L(!1)}},te=(e,t="info")=>{x({visible:!0,message:e,type:t}),setTimeout(()=>x({visible:!1,message:"",type:""}),3e3)},tt=e=>{let t=[...s.cast];t.splice(e,1),a(e=>({...e,cast:t}))},ts=e=>{if(e3(t=>({...t,[e]:!t[e]})),e5[e])a(t=>({...t,watchProviders:(t.watchProviders||[]).filter(t=>t.name.toLowerCase()!==("apple"===e?"apple tv+":e))}));else{let t={};switch(e){case"netflix":t={name:"Netflix",logo:"https://upload.wikimedia.org/wikipedia/commons/7/7a/Logonetflix.png",type:"subscription",price:"13,500원/월",quality:["HD","4K","HDR"],url:s.streamingLinks?.netflix||""};break;case"apple":t={name:"Apple TV+",logo:"https://upload.wikimedia.org/wikipedia/commons/3/39/Apple_TV.svg",type:"subscription",price:"8,900원/월",quality:["HD","4K"],url:s.streamingLinks?.apple||""};break;case"disney":t={name:"Disney+",logo:"https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney%2B_logo.svg",type:"subscription",price:"9,900원/월",quality:["HD","4K"],url:s.streamingLinks?.disney||""};break;case"viki":t={name:"Viki",logo:"https://upload.wikimedia.org/wikipedia/en/5/55/Viki_Logo.png",type:"subscription",price:"5,900원/월",quality:["HD"],url:s.streamingLinks?.viki||""};break;case"wavve":t={name:"Wavve",logo:"https://upload.wikimedia.org/wikipedia/commons/f/ff/Wavve_logo.svg",type:"subscription",price:"10,900원/월",quality:["HD","4K"],url:s.streamingLinks?.wavve||""}}a(e=>({...e,watchProviders:[...e.watchProviders||[],t]}))}},ta=(e,t)=>{a(s=>({...s,streamingLinks:{...s.streamingLinks||{},[e]:t},watchProviders:(s.watchProviders||[]).map(s=>s.name.toLowerCase().includes(e.toLowerCase())?{...s,url:t}:s)}))},tr=e=>{let t=s.reviews.map(e=>({...e,featured:!1}));t[e]={...t[e],featured:!0},a(e=>({...e,reviews:t})),te("대표 리뷰가 설정되었습니다.","success")},[tl,ti]=(0,o.useState)(""),[tn,td]=(0,o.useState)(""),[tc,to]=(0,o.useState)(""),[tm,tx]=(0,o.useState)(""),[tu,th]=(0,o.useState)(""),[tp,tg]=(0,o.useState)(""),[tb,ty]=(0,o.useState)(""),[tf,tv]=(0,o.useState)(""),[tj,tN]=(0,o.useState)(""),[tw,tk]=(0,o.useState)(!1),tS=e=>{let t=s.episodeList[e];ti(t.number.toString()),td(t.title||""),to(t.airDate?new Date(t.airDate).toISOString().split("T")[0]:""),tx(t.summary||""),th(t.runtime?t.runtime.toString():""),tg(t.rating?t.rating.toString():""),ty(t.viewerRating?t.viewerRating.toString():""),tv(t.image||""),tN(t.mdlUrl||""),a(t=>({...t,_editingEpisodeIndex:e})),tk(!0)},tC=e=>{a(t=>({...t,episodeList:t.episodeList.filter((t,s)=>s!==e)})),te("에피소드가 삭제되었습니다.","info")},tL=()=>{ti(""),td(""),to(""),tx(""),th(""),tg(""),ty(""),tv(""),tN(""),a(e=>{let{_editingEpisodeIndex:t,...s}=e;return s})},t$=async()=>{if(!s.mdlUrl){te("MyDramaList URL이 필요합니다.","error");return}try{L(!0),te("에피소드 정보를 크롤링 중입니다...","info");let e=`${s.mdlUrl}/episodes`,t=await fetch("/api/crawler/stealth-crawler",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,mode:"episodes"})}),r=await t.json();if(!t.ok)throw Error(r.message||"에피소드 크롤링 중 오류가 발생했습니다.");r.data&&r.data.episodes&&r.data.episodes.length>0?(a(e=>({...e,episodeList:r.data.episodes})),te(`${r.data.episodes.length}개의 에피소드를 가져왔습니다.`,"success")):te("에피소드 정보를 찾을 수 없습니다.","warning")}catch(e){te(e.message,"error")}finally{L(!1)}},tD=async()=>{if(!s.mdlUrl){te("MyDramaList URL이 필요합니다.","error");return}try{L(!0),te("스트리밍 서비스 정보를 크롤링 중입니다...","info");let e=s.mdlUrl,t=await fetch("/api/crawler/stealth-crawler",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,mode:"streaming"})}),r=await t.json();if(!t.ok)throw Error(r.message||"스트리밍 서비스 크롤링 중 오류가 발생했습니다.");if(r.data&&r.data.streamingServices&&r.data.streamingServices.length>0){let e=r.data.streamingServices,t={...s.streamingLinks},l={...e5},i=[],n=r.data.whereToWatch||[];e.forEach(e=>{e.providerKey&&(l[e.providerKey]=!0,t[e.providerKey]=e.url,i.push({name:e.name,logo:e.logo,type:e.type,url:e.url,price:"netflix"===e.providerKey?"13,500원/월":"apple"===e.providerKey?"8,900원/월":"disney"===e.providerKey?"9,900원/월":"viki"===e.providerKey?"5,900원/월":"wavve"===e.providerKey?"10,900원/월":"구독",quality:"netflix"===e.providerKey?["HD","4K","HDR"]:"apple"===e.providerKey?["HD","4K"]:"disney"===e.providerKey?["HD","4K"]:"viki"===e.providerKey?["HD"]:"wavve"===e.providerKey?["HD","4K"]:["HD"]}))}),a(e=>({...e,watchProviders:i,streamingLinks:t,whereToWatch:n})),e3(l),te(`${e.length}개의 스트리밍 서비스 정보를 가져왔습니다.`,"success")}else te("스트리밍 서비스 정보를 찾을 수 없습니다.","warning")}catch(e){te(e.message,"error")}finally{L(!1)}},tR=async()=>{if(!B){te("리뷰 URL을 입력해주세요.","error");return}let e=B;if(!e.includes("mydramalist.com")){te("올바른 MyDramalist URL을 입력해주세요.","error");return}e.endsWith("/reviews")||(e.endsWith("/")&&(e=e.slice(0,-1)),J(e=`${e}/reviews`));try{G(!0),et(null),Q(null),ea("리뷰 크롤링 준비 중..."),te("리뷰 크롤링을 시작합니다...","info");let s=await fetch(er?"/api/crawler/reviews-stealth-crawler":"/api/crawler/reviews-crawler",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,dramaId:t})});ea("서버에서 응답 처리 중...");let a=await s.json();if(a.success){let e=a.data.reviews?.length||0;te(`${e}개의 리뷰를 성공적으로 가져왔습니다.`,"success"),Q(a.data),ea(`${e}개 리뷰 수집 완료`),tT()}else et(`크롤링 실패: ${a.message}`),te(`크롤링 실패: ${a.message}`,"error"),ea("크롤링 실패")}catch(e){et(`오류 발생: ${e.message}`),te(`오류 발생: ${e.message}`,"error"),ea("")}finally{G(!1)}},tT=async()=>{try{ea("드라마 정보 업데이트 중...");let e=localStorage.getItem("token")||localStorage.getItem("adminToken"),s=await fetch(`/api/dramas/${t}`,{headers:{Authorization:e?`Bearer ${e}`:""}}),r=await s.json();s.ok?(a(e=>({...e,reviewCount:r.data.reviewCount||0,reviewRating:r.data.reviewRating||0,ratingDistribution:r.data.ratingDistribution||[]})),ea("드라마 정보 업데이트 완료"),tz()):ea("드라마 정보 업데이트 실패")}catch(e){ea("드라마 정보 업데이트 실패")}},tz=async()=>{if(t)try{_(!0),Y(null);let e=await fetch(`/api/reviews/by-drama/${t}`),s=await e.json();e.ok&&s.success?E(s.data||[]):Y(s.message||"리뷰를 불러오는데 실패했습니다.")}catch(e){Y(e.message||"리뷰를 불러오는 중 오류가 발생했습니다.")}finally{_(!1)}};return r?c.jsx(u.default,{children:c.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-200px)]",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):i?c.jsx(u.default,{children:(0,c.jsxs)("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-200px)]",children:[c.jsx("p",{className:"text-red-600 mb-4",children:i}),(0,c.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center text-blue-600 hover:text-blue-800",children:[c.jsx(h.default,{size:20,className:"mr-1"}),"뒤로 가기"]})]})}):(0,c.jsxs)(u.default,{children:[(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("button",{onClick:()=>e.back(),className:"mr-4 text-gray-600 hover:text-gray-800",children:c.jsx(h.default,{size:24})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"콘텐츠 수정"})]}),(0,c.jsxs)("button",{onClick:e9,disabled:C,className:`bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md flex items-center ${C?"opacity-70 cursor-not-allowed":""}`,children:[c.jsx(p.default,{size:18,className:"mr-1"}),C?"저장 중...":"저장"]})]}),c.jsx("div",{className:"mb-6 bg-white rounded-lg shadow p-4",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsxs)("div",{className:`flex items-center ${e6.basic?"text-green-600":"text-gray-400"}`,children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${e6.basic?"bg-green-100":"bg-gray-100"}`,children:e6.basic?c.jsx(g.default,{size:20}):c.jsx("span",{children:"1"})}),c.jsx("span",{className:"ml-2",children:"기본 정보"})]}),c.jsx("div",{className:"h-1 w-8 bg-gray-200"}),(0,c.jsxs)("div",{className:`flex items-center ${e6.videos?"text-green-600":"text-gray-400"}`,children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${e6.videos?"bg-green-100":"bg-gray-100"}`,children:e6.videos?c.jsx(g.default,{size:20}):c.jsx("span",{children:"2"})}),c.jsx("span",{className:"ml-2",children:"비디오"})]}),c.jsx("div",{className:"h-1 w-8 bg-gray-200"}),(0,c.jsxs)("div",{className:`flex items-center ${e6.reviews?"text-green-600":"text-gray-400"}`,children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${e6.reviews?"bg-green-100":"bg-gray-100"}`,children:e6.reviews?c.jsx(g.default,{size:20}):c.jsx("span",{children:"3"})}),c.jsx("span",{className:"ml-2",children:"리뷰"})]}),c.jsx("div",{className:"h-1 w-8 bg-gray-200"}),(0,c.jsxs)("div",{className:`flex items-center ${e6.episodes?"text-green-600":"text-gray-400"}`,children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${e6.episodes?"bg-green-100":"bg-gray-100"}`,children:e6.episodes?c.jsx(g.default,{size:20}):c.jsx("span",{children:"4"})}),c.jsx("span",{className:"ml-2",children:"에피소드"})]})]}),(0,c.jsxs)("div",{className:"text-sm text-gray-500",children:[Object.values(e6).filter(Boolean).length,"/4 단계 완료"]})]})}),c.jsx("div",{className:"mb-6 border-b border-gray-200 sticky top-0 bg-gray-50 z-10 shadow-sm",children:(0,c.jsxs)("nav",{className:"flex flex-nowrap overflow-x-auto px-2 py-1 hide-scrollbar",children:[(0,c.jsxs)("button",{className:`py-3 px-4 font-medium text-sm whitespace-nowrap flex items-center ${"basic"===M?"bg-white text-blue-600 border-b-2 border-blue-500 rounded-t-lg shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg"}`,onClick:()=>q("basic"),children:[c.jsx("span",{className:"mr-2",children:"기본 정보"}),e6.basic&&c.jsx(g.default,{size:16,className:"text-green-500"})]}),(0,c.jsxs)("button",{className:`py-3 px-4 font-medium text-sm whitespace-nowrap flex items-center ${"videos"===M?"bg-white text-blue-600 border-b-2 border-blue-500 rounded-t-lg shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg"}`,onClick:()=>q("videos"),children:[c.jsx("span",{className:"mr-2",children:"비디오"}),e6.videos&&c.jsx(g.default,{size:16,className:"text-green-500"})]}),(0,c.jsxs)("button",{className:`py-3 px-4 font-medium text-sm whitespace-nowrap flex items-center ${"reviews"===M?"bg-white text-blue-600 border-b-2 border-blue-500 rounded-t-lg shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg"}`,onClick:()=>q("reviews"),children:[c.jsx("span",{className:"mr-2",children:"리뷰"}),e6.reviews&&c.jsx(g.default,{size:16,className:"text-green-500"})]}),(0,c.jsxs)("button",{className:`py-3 px-4 font-medium text-sm whitespace-nowrap flex items-center ${"episodes"===M?"bg-white text-blue-600 border-b-2 border-blue-500 rounded-t-lg shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg"}`,onClick:()=>q("episodes"),children:[c.jsx("span",{className:"mr-2",children:"에피소드"}),e6.episodes&&c.jsx(g.default,{size:16,className:"text-green-500"})]})]})}),(0,c.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:["basic"===M&&(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"category",children:["카테고리 ",c.jsx("span",{className:"text-red-500",children:"*"})]}),(0,c.jsxs)("select",{id:"category",name:"category",value:s.category,onChange:e8,className:`w-full px-3 py-2 border rounded-md ${eM.category?"border-red-500":"border-gray-300"}`,required:!0,children:[c.jsx("option",{value:"",children:"카테고리를 선택하세요"}),c.jsx("option",{value:"drama",children:"드라마"}),c.jsx("option",{value:"movie",children:"영화"}),c.jsx("option",{value:"variety",children:"예능"}),c.jsx("option",{value:"documentary",children:"다큐멘터리"}),c.jsx("option",{value:"animation",children:"애니메이션"}),c.jsx("option",{value:"web_series",children:"웹 시리즈"}),c.jsx("option",{value:"other",children:"기타"})]}),eM.category&&c.jsx("p",{className:"text-red-500 text-xs mt-1",children:eM.category})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"title",children:["제목 ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"title",name:"title",value:s.title,onChange:e8,className:`w-full px-3 py-2 border rounded-md ${eM.title?"border-red-500":"border-gray-300"}`,placeholder:"제목을 입력하세요",required:!0}),eM.title&&c.jsx("p",{className:"text-red-500 text-xs mt-1",children:eM.title})]}),(0,c.jsxs)("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"originalTitle",children:"원제"}),c.jsx("input",{type:"text",id:"originalTitle",name:"originalTitle",value:s.originalTitle,onChange:e8,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"원제를 입력하세요"})]}),(0,c.jsxs)("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"englishTitle",children:"영어 제목 (영상 자동 검색에 사용)"}),c.jsx("input",{type:"text",id:"englishTitle",name:"englishTitle",value:s.englishTitle,onChange:e8,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"영어 제목을 입력하세요 (예: Parasite)"})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"description",children:["줄거리 ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{id:"description",name:"description",value:s.description||s.summary||"",onChange:e8,className:`w-full px-3 py-2 border rounded-md ${eM.description?"border-red-500":"border-gray-300"}`,placeholder:"줄거리를 입력하세요",rows:4,required:!0}),eM.description&&c.jsx("p",{className:"text-red-500 text-xs mt-1",children:eM.description})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"releaseDate",children:["방영일 ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"releaseDate",name:"releaseDate",value:s.releaseDate,onChange:e8,className:`w-full px-3 py-2 border rounded-md ${eM.releaseDate?"border-red-500":"border-gray-300"}`,placeholder:"예: 2023-05-15 또는 May 15, 2023",required:!0}),eM.releaseDate&&c.jsx("p",{className:"text-red-500 text-xs mt-1",children:eM.releaseDate}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"원하는 형식으로 방영일을 입력하세요. (예: YYYY-MM-DD, Month DD, YYYY 등)"})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"runtime",children:["런타임 ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"runtime",name:"runtime",value:s.runtime,onChange:e8,className:`w-full px-3 py-2 border rounded-md ${eM.runtime?"border-red-500":"border-gray-300"}`,placeholder:"예: 1시간 30분",required:!0}),eM.runtime&&c.jsx("p",{className:"text-red-500 text-xs mt-1",children:eM.runtime})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"country",children:["국가 ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"country",name:"country",value:s.country,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"ageRating",children:["연령 등급 ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"ageRating",name:"ageRating",value:s.ageRating,onChange:e8,className:`w-full px-3 py-2 border rounded-md ${eM.ageRating?"border-red-500":"border-gray-300"}`,placeholder:"예: 전체 관람가, 12세 이상, 15세 이상, 18세 이상",required:!0}),eM.ageRating&&c.jsx("p",{className:"text-red-500 text-xs mt-1",children:eM.ageRating}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"크롤링된 등급 정보를 그대로 입력하거나 수정할 수 있습니다."})]}),(0,c.jsxs)("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"director",children:"감독"}),c.jsx("input",{type:"text",id:"director",name:"director",value:s.director,onChange:e8,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"감독을 입력하세요"})]}),(0,c.jsxs)("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"출연진"}),s.cast&&s.cast.length>0&&c.jsx("div",{className:"space-y-2 mb-2",children:s.cast.map((e,t)=>(0,c.jsxs)("div",{className:"flex flex-wrap items-center gap-2 bg-gray-50 p-2 rounded",children:[e.image?c.jsx("img",{src:e.image,alt:e.name||`cast-${t}`,className:"w-12 h-12 object-cover rounded-full border border-gray-300 bg-white",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder-profile.png"}}):c.jsx("div",{className:"w-12 h-12 flex items-center justify-center rounded-full border border-gray-200 bg-gray-100 text-gray-400 text-xs",children:"No Image"}),c.jsx("input",{type:"text",placeholder:"이름",value:e.name||"",onChange:e=>{let r=[...s.cast];r[t]={...r[t],name:e.target.value},a(e=>({...e,cast:r}))},className:"w-32 px-2 py-1 border border-gray-300 rounded"}),c.jsx("input",{type:"text",placeholder:"역할 (예: 주연, 조연, 특별출연 등)",value:e.role||"",onChange:e=>{let r=[...s.cast];r[t]={...r[t],role:e.target.value},a(e=>({...e,cast:r}))},className:"w-40 px-2 py-1 border border-gray-300 rounded"}),c.jsx("input",{type:"text",placeholder:"프로필 이미지 URL",value:e.image||"",onChange:e=>{let r=[...s.cast];r[t]={...r[t],image:e.target.value},a(e=>({...e,cast:r}))},className:"w-64 px-2 py-1 border border-gray-300 rounded"}),c.jsx("button",{type:"button",className:"text-red-500 hover:text-red-700 ml-2",onClick:()=>tt(t),children:c.jsx(b.default,{size:18})})]},t))}),(0,c.jsxs)("button",{type:"button",className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 text-sm",onClick:()=>{a(e=>({...e,cast:[...e.cast||[],{name:"",role:"",image:""}]}))},children:[c.jsx(y.default,{size:16,className:"mr-1"})," 출연진 추가"]})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:["장르 ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"genresText",name:"genresText",value:Array.isArray(s.genres)?s.genres.join(", "):s.genres,onChange:e=>{let t=e.target.value,s=t.split(",").map(e=>e.trim()).filter(e=>e);a(e=>({...e,genres:s,genresText:t}))},className:`w-full px-3 py-2 border rounded-md ${eM.genres?"border-red-500":"border-gray-300"}`,placeholder:"예: 로맨스, 코미디, 드라마 (쉼표로 구분)",required:!0}),eM.genres&&c.jsx("p",{className:"text-red-500 text-xs mt-1",children:eM.genres}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"크롤링된 장르 정보를 쉼표(,)로 구분하여 입력하세요."})]}),(0,c.jsxs)("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"시청 플랫폼"}),(0,c.jsxs)("div",{className:"bg-white border border-gray-300 rounded-md p-4",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"font-medium",children:"Where to Watch"}),c.jsx("button",{type:"button",onClick:tD,disabled:C||!s.mdlUrl,className:`text-sm bg-blue-500 text-white py-1 px-3 rounded-md flex items-center ${C||!s.mdlUrl?"opacity-50 cursor-not-allowed":"hover:bg-blue-600"}`,children:C?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"크롤링 중..."]}):"MyDramalist에서 가져오기"})]}),c.jsx("p",{className:"text-xs text-gray-500 mb-4",children:s.mdlUrl?c.jsx(c.Fragment,{children:"MyDramalist에서 제공자 정보를 자동으로 가져올 수 있습니다."}):c.jsx(c.Fragment,{children:"MyDramalist URL을 설정하면 제공자 정보를 자동으로 가져올 수 있습니다."})}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"netflix",checked:e5.netflix,onChange:()=>ts("netflix"),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("label",{htmlFor:"netflix",className:"ml-2 text-sm text-gray-700",children:"Netflix"})]}),e5.netflix&&c.jsx("input",{type:"text",value:s.streamingLinks?.netflix||"",onChange:e=>ta("netflix",e.target.value),placeholder:"https://www.netflix.com/title/...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"apple",checked:e5.apple,onChange:()=>ts("apple"),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("label",{htmlFor:"apple",className:"ml-2 text-sm text-gray-700",children:"Apple TV+"})]}),e5.apple&&c.jsx("input",{type:"text",value:s.streamingLinks?.apple||"",onChange:e=>ta("apple",e.target.value),placeholder:"https://tv.apple.com/show/...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"disney",checked:e5.disney,onChange:()=>ts("disney"),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("label",{htmlFor:"disney",className:"ml-2 text-sm text-gray-700",children:"Disney+"})]}),e5.disney&&c.jsx("input",{type:"text",value:s.streamingLinks?.disney||"",onChange:e=>ta("disney",e.target.value),placeholder:"https://www.disneyplus.com/series/...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"viki",checked:e5.viki,onChange:()=>ts("viki"),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("label",{htmlFor:"viki",className:"ml-2 text-sm text-gray-700",children:"Viki"})]}),e5.viki&&c.jsx("input",{type:"text",value:s.streamingLinks?.viki||"",onChange:e=>ta("viki",e.target.value),placeholder:"https://www.viki.com/tv/...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"wavve",checked:e5.wavve,onChange:()=>ts("wavve"),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("label",{htmlFor:"wavve",className:"ml-2 text-sm text-gray-700",children:"Wavve"})]}),e5.wavve&&c.jsx("input",{type:"text",value:s.streamingLinks?.wavve||"",onChange:e=>ta("wavve",e.target.value),placeholder:"https://www.wavve.com/player/...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),(0,c.jsxs)("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"썸네일 이미지"}),(0,c.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[c.jsx("div",{className:"w-24 h-32 bg-gray-100 border border-gray-300 rounded flex items-center justify-center overflow-hidden",children:eP||s.coverImage?c.jsx("img",{src:eP||s.coverImage,alt:"썸네일 미리보기",className:"object-cover w-full h-full",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder-tvfilm.svg"}}):c.jsx("span",{className:"text-gray-400 text-xs",children:"No Image"})}),(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];if(t&&t.type.startsWith("image/")){let e=new FileReader;e.onload=e=>{eI(e.target.result),a(t=>({...t,coverImage:e.target.result}))},e.readAsDataURL(t)}},ref:eX,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),c.jsx("input",{type:"text",placeholder:"이미지 URL 입력",value:eH,onChange:e=>{let t=e.target.value;if(eK(t),eJ(""),t)try{new URL(t),eI(t),a(e=>({...e,coverImage:t}))}catch(e){eJ("유효한 이미지 URL을 입력해주세요."),eI(null)}else eI(null)},className:"w-full px-2 py-1 border border-gray-300 rounded"}),eV&&c.jsx("p",{className:"text-red-500 text-xs mt-1",children:eV}),eB&&c.jsx("p",{className:"text-red-500 text-xs mt-1",children:eB})]})]})]}),(0,c.jsxs)("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"배경 이미지"}),(0,c.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[c.jsx("div",{className:"w-40 h-24 bg-gray-100 border border-gray-300 rounded flex items-center justify-center overflow-hidden",children:eF||s.bannerImage?c.jsx("img",{src:eF||s.bannerImage,alt:"배경 미리보기",className:"object-cover w-full h-full",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder-tvfilm.svg"}}):c.jsx("span",{className:"text-gray-400 text-xs",children:"No Image"})}),(0,c.jsxs)("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];if(t&&t.type.startsWith("image/")){let e=new FileReader;e.onload=e=>{eA(e.target.result),a(t=>({...t,bannerImage:e.target.result}))},e.readAsDataURL(t)}},ref:eQ,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),c.jsx("input",{type:"text",placeholder:"이미지 URL 입력",value:eW,onChange:e=>{let t=e.target.value;if(eE(t),eG(""),t)try{new URL(t),eA(t),a(e=>({...e,bannerImage:t}))}catch(e){eG("유효한 이미지 URL을 입력해주세요."),eA(null)}else eA(null)},className:"w-full px-2 py-1 border border-gray-300 rounded"}),eO&&c.jsx("p",{className:"text-red-500 text-xs mt-1",children:eO}),eZ&&c.jsx("p",{className:"text-red-500 text-xs mt-1",children:eZ})]})]})]})]}),"videos"===M&&(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"비디오 정보"}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"트레일러, 티저, 하이라이트 등 다양한 종류의 비디오를 추가할 수 있습니다."})]}),(0,c.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h4",{className:"text-md font-medium text-blue-700",children:"영상 자동 검색"}),c.jsx("div",{className:"flex space-x-2",children:(0,c.jsxs)("button",{type:"button",onClick:async()=>{try{let e="";if(!(e=s.originalTitle?`${s.originalTitle} 영화`:s.englishTitle?s.englishTitle:`${s.title} 영화`)){te("검색할 제목이 필요합니다.","error");return}te(`"${e}" 관련 영상 검색 중...`,"info");let t=await fetch(`/api/youtube/search-videos?title=${encodeURIComponent(e)}&maxResults=5`),r=await t.json();if(!t.ok)throw Error(r.message||"영상 검색 중 오류가 발생했습니다.");if(r.success&&r.data.length>0){let e=r.data.map(e=>({title:e.title,type:e.title.toLowerCase().includes("trailer")?"trailer":e.title.toLowerCase().includes("teaser")?"teaser":"other",url:e.url,viewCount:e.viewCount,publishedAt:e.publishedAt}));a(t=>({...t,videos:[...Array.isArray(t.videos)?t.videos:[],...e]})),te(`${e.length}개의 영상을 성공적으로 가져왔습니다. 저장 버튼을 눌러 변경사항을 저장하세요.`,"success")}else te("검색 결과가 없습니다.","warning")}catch(e){te(`오류 발생: ${e.message}`,"error")}},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"영상 자동 검색"]})})]}),c.jsx("p",{className:"text-sm text-blue-600 mb-2",children:"원제(한글) + '영화' 키워드로 YouTube에서 조회수가 높은 상위 5개 영상을 검색하여 추가합니다."}),(0,c.jsxs)("div",{className:"bg-yellow-50 p-2 rounded text-sm text-yellow-700",children:[c.jsx("strong",{children:"주의:"})," 영상을 추가한 후 반드시 하단의 ",c.jsx("strong",{children:"저장"})," 버튼을 클릭하여 변경사항을 저장해야 합니다."]})]}),c.jsx("div",{className:"border border-gray-200 rounded-lg p-5 bg-white mb-6",children:(0,c.jsxs)("div",{className:"space-y-5",children:[s.videos&&s.videos.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.videos.map((e,t)=>{let r=j(e.url);return(0,c.jsxs)("div",{className:"relative group border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-all",children:[(0,c.jsxs)("div",{className:"aspect-video bg-gray-100",children:[r?c.jsx("img",{src:`https://img.youtube.com/vi/${r}/mqdefault.jpg`,alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder-tvfilm.jpg"}}):c.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:c.jsx(f.default,{className:"w-12 h-12 text-gray-400"})}),e.viewCount&&(0,c.jsxs)("div",{className:"absolute bottom-0 right-0 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-tl-md",children:["조회수: ",e.viewCount.toLocaleString()]})]}),(0,c.jsxs)("div",{className:"p-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"font-medium text-gray-900 truncate",children:e.title}),c.jsx("button",{onClick:()=>{let e=[...s.videos];e.splice(t,1),a(t=>({...t,videos:e}))},className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx(b.default,{size:20})})]}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"trailer"===e.type?"트레일러":"teaser"===e.type?"티저":"highlight"===e.type?"하이라이트":"interview"===e.type?"인터뷰":"기타"}),e.publishedAt&&c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.publishedAt).toLocaleDateString()})]})]},t)})}):(0,c.jsxs)("div",{className:"text-center py-10",children:[c.jsx(f.default,{className:"mx-auto h-12 w-12 text-gray-400"}),c.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"추가된 비디오가 없습니다."})]}),(0,c.jsxs)("div",{className:"border-t border-gray-200 pt-5",children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"비디오 제목"}),c.jsx("input",{type:"text",value:ei,onChange:e=>en(e.target.value),placeholder:"비디오 제목을 입력하세요",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"비디오 유형"}),(0,c.jsxs)("select",{value:ed,onChange:e=>ec(e.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"trailer",children:"트레일러"}),c.jsx("option",{value:"teaser",children:"티저"}),c.jsx("option",{value:"highlight",children:"하이라이트"}),c.jsx("option",{value:"interview",children:"인터뷰"}),c.jsx("option",{value:"other",children:"기타"})]})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"YouTube URL"}),c.jsx("input",{type:"text",value:eo,onChange:e=>em(e.target.value),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),c.jsx("div",{className:"mt-4 flex justify-end",children:(0,c.jsxs)("button",{onClick:()=>{if(ei.trim()&&eo.trim()){if(!j(eo)){te("유효한 YouTube URL을 입력해주세요.","error");return}a(e=>({...e,videos:[...Array.isArray(e.videos)?e.videos:[],{title:ei.trim(),type:ed,url:eo.trim()}]})),en(""),em("")}else ei.trim()?eo.trim()||te("YouTube URL을 입력해주세요.","error"):te("비디오 제목을 입력해주세요.","error")},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center",children:[c.jsx(y.default,{className:"w-4 h-4 mr-1"}),"비디오 추가"]})})]})]})})]}),"reviews"===M&&(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"리뷰 정보"}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"리뷰는 콘텐츠에 대한 사용자의 개인적인 의견을 나타내는 섹션입니다."})]}),(0,c.jsxs)("div",{className:"border border-gray-200 rounded-lg p-5 bg-white mb-6",children:[c.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"리뷰 크롤링"}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3",children:[c.jsx("input",{type:"text",className:"form-input flex-1 rounded-md border-gray-300",placeholder:"MyDramalist 리뷰 URL (예: https://mydramalist.com/123-drama-title/reviews)",value:B,onChange:e=>J(e.target.value)}),c.jsx("button",{onClick:tR,disabled:Z||!B,className:`px-4 py-2 rounded-md flex items-center justify-center ${Z||!B?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:Z?(0,c.jsxs)(c.Fragment,{children:[c.jsx("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-t-transparent border-white rounded-full"}),"크롤링 중..."]}):c.jsx(c.Fragment,{children:"크롤링 시작"})})]}),(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:er,onChange:()=>el(!er)}),c.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),(0,c.jsxs)("span",{className:"ms-3 text-sm font-medium text-gray-900",children:["스텔스 모드 사용 ",er?"(활성화)":"(비활성화)"]})]}),c.jsx("span",{className:"ml-2 text-xs text-gray-500",children:er?"(Cloudflare 보호 우회)":""})]}),es&&c.jsx("div",{className:"mt-2 text-sm text-gray-600",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-t-transparent border-blue-500 rounded-full"}),c.jsx("span",{children:es})]})}),ee&&(0,c.jsxs)("div",{className:"mt-2 text-sm text-red-600 p-2 bg-red-50 rounded",children:[c.jsx("p",{className:"font-medium",children:"오류 발생:"}),c.jsx("p",{children:ee})]}),X&&(0,c.jsxs)("div",{className:"mt-2 text-sm text-green-600 p-2 bg-green-50 rounded",children:[c.jsx("p",{className:"font-medium",children:"크롤링 완료:"}),(0,c.jsxs)("p",{children:["총 ",X.reviews?.length||0,"개의 리뷰를 가져왔습니다."]}),(0,c.jsxs)("p",{children:["평균 평점: ",X.averageRating?.toFixed(1)||"N/A"]})]}),c.jsx("div",{className:"mt-4",children:(0,c.jsxs)("button",{onClick:tz,className:"text-blue-600 hover:text-blue-800 text-sm flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"리뷰 다시 불러오기"]})})]})]}),(0,c.jsxs)("div",{className:"border border-gray-200 rounded-lg p-5 bg-white mb-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-medium",children:"크롤링된 리뷰 목록"}),(0,c.jsxs)("span",{className:"text-sm bg-blue-100 text-blue-800 py-1 px-3 rounded-full",children:[W.length,"개 리뷰"]})]}),V?(0,c.jsxs)("div",{className:"py-10 text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500",children:"리뷰를 불러오는 중..."})]}):O?(0,c.jsxs)("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",children:[c.jsx("p",{className:"font-medium",children:"리뷰를 불러오는데 실패했습니다:"}),c.jsx("p",{children:O})]}):0===W.length?(0,c.jsxs)("div",{className:"text-center py-10",children:[c.jsx(v.default,{className:"mx-auto h-12 w-12 text-gray-400"}),c.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"저장된 리뷰가 없습니다."}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"위 크롤링 도구를 사용해 리뷰를 가져오세요."})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:W.map((e,t)=>(0,c.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-300 hover:border-pink-200 group relative",children:[c.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-pink-100 to-transparent rounded-tr-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,c.jsxs)("div",{className:"flex justify-between items-start mb-2 relative",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-br from-pink-400 to-rose-500 flex items-center justify-center text-white font-bold text-sm shadow-sm group-hover:shadow-md transition-all duration-300",children:e.rating||"N/A"}),(0,c.jsxs)("div",{className:"ml-2",children:[c.jsx("div",{className:"text-sm font-semibold text-gray-800 group-hover:text-pink-600 transition-colors duration-300",children:e.username||"익명"}),c.jsx("div",{className:"flex mt-0.5",children:[1,2,3,4,5].map(t=>c.jsx(v.default,{className:`w-3 h-3 ${t<=Math.floor((e.rating||0)/2)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},t))})]})]}),(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("span",{className:"text-xs text-gray-500 mr-2",children:e.reviewDate||new Date(e.createdAt).toLocaleDateString()}),c.jsx("button",{onClick:()=>{confirm(`"${e.title}" 리뷰를 삭제하시겠습니까?`)&&fetch(`/api/reviews/${e.reviewId}`,{method:"DELETE"}).then(e=>e.json()).then(e=>{e.success?(te("리뷰가 삭제되었습니다.","success"),tz(),tT()):te(`삭제 실패: ${e.message}`,"error")}).catch(e=>{te(`오류 발생: ${e.message}`,"error")})},className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx(b.default,{size:20})})]})]}),c.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:e.title}),c.jsx("div",{className:"text-sm text-gray-600 whitespace-pre-wrap mb-3 max-h-28 overflow-y-auto",children:e.reviewText})]},t))})]}),c.jsx("div",{className:"border border-gray-200 rounded-lg p-5 bg-white mb-6",children:(0,c.jsxs)("div",{className:"space-y-5",children:[s.reviews&&s.reviews.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.reviews.map((e,t)=>(0,c.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-300 hover:border-pink-200 group relative",children:[c.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-pink-100 to-transparent rounded-tr-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,c.jsxs)("div",{className:"flex justify-between items-start mb-2 relative",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-br from-pink-400 to-rose-500 flex items-center justify-center text-white font-bold text-sm shadow-sm group-hover:shadow-md transition-all duration-300",children:e.rating}),(0,c.jsxs)("div",{className:"ml-2",children:[c.jsx("div",{className:"text-sm font-semibold text-gray-800 group-hover:text-pink-600 transition-colors duration-300",children:e.authorName}),c.jsx("div",{className:"flex mt-0.5",children:[1,2,3,4,5].map(t=>c.jsx(v.default,{className:`w-3 h-3 ${t<=Math.floor(e.rating/2)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},t))})]})]}),c.jsx("button",{onClick:()=>{let e=[...s.reviews];e.splice(t,1),a(t=>({...t,reviews:e}))},className:"text-gray-400 hover:text-red-500 transition-colors",children:c.jsx(b.default,{size:20})})]}),c.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:e.title}),c.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap mb-3",children:e.content}),(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[c.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags&&e.tags.length>0?e.tags.map((e,t)=>c.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full group-hover:bg-pink-50 group-hover:text-pink-600 transition-colors duration-300",children:e},t)):c.jsx("span",{className:"text-xs px-2 py-0.5 bg-pink-50 text-pink-600 rounded-full",children:"Review"})}),c.jsx("button",{onClick:()=>tr(t),className:`px-3 py-1 rounded-md text-sm ${e.featured?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:e.featured?"대표 리뷰로 설정됨":"대표 리뷰로 설정"})]})]},t))}):(0,c.jsxs)("div",{className:"text-center py-10",children:[c.jsx(v.default,{className:"mx-auto h-12 w-12 text-gray-400"}),c.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"추가된 리뷰가 없습니다."})]}),(0,c.jsxs)("div",{className:"border-t border-gray-200 pt-5",children:[(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"리뷰 제목"}),c.jsx("input",{type:"text",value:ex,onChange:e=>eu(e.target.value),placeholder:"리뷰 제목을 입력하세요",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"작성자"}),c.jsx("input",{type:"text",value:eh,onChange:e=>ep(e.target.value),placeholder:"작성자 이름을 입력하세요",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"평점 (1-10)"}),(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[c.jsx("input",{type:"range",min:"1",max:"10",value:eg,onChange:e=>eb(parseInt(e.target.value)),className:"flex-1"}),c.jsx("span",{className:"text-sm font-medium text-gray-700 w-8 text-center",children:eg})]}),c.jsx("div",{className:"flex mt-1",children:[...Array(10)].map((e,t)=>c.jsx("span",{className:`text-xl ${t<eg?"text-yellow-400":"text-gray-300"}`,children:"★"},t))})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"리뷰 내용"}),c.jsx("textarea",{value:ey,onChange:e=>ef(e.target.value),placeholder:"리뷰 내용을 입력하세요",rows:4,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"태그 (쉼표로 구분)"}),c.jsx("input",{type:"text",value:ev,onChange:e=>ej(e.target.value),placeholder:"예: 연기, 스토리, OST",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),c.jsx("div",{className:"mt-4 flex justify-end",children:(0,c.jsxs)("button",{type:"button",onClick:()=>{ex.trim()&&eh.trim()&&ey.trim()?(a(e=>({...e,reviews:[...e.reviews||[],{title:ex.trim(),authorName:eh.trim(),rating:eg,content:ey.trim(),tags:ev.split(",").map(e=>e.trim()).filter(Boolean),featured:0===e.reviews.length,approved:!0}]})),eu(""),ep(""),eb(5),ef(""),ej("")):ex.trim()?eh.trim()?ey.trim()||te("리뷰 내용을 입력해주세요.","error"):te("작성자 이름을 입력해주세요.","error"):te("리뷰 제목을 입력해주세요.","error")},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center",children:[c.jsx(y.default,{className:"w-4 h-4 mr-1"}),"리뷰 추가"]})})]})]})})]}),"episodes"===M&&(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"에피소드 관리"}),(0,c.jsxs)("div",{className:"flex space-x-2",children:[(0,c.jsxs)("button",{type:"button",onClick:()=>t$(),disabled:C,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[c.jsx(f.default,{size:18,className:"mr-1"}),"에피소드 크롤링"]}),(0,c.jsxs)("button",{type:"button",onClick:()=>{tL(),tk(!0)},className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[c.jsx(y.default,{size:18,className:"mr-1"}),"에피소드 추가"]})]})]}),tw&&(0,c.jsxs)("div",{className:"bg-gray-50 p-4 mb-4 border rounded-lg",children:[c.jsx("h3",{className:"text-lg font-medium mb-3",children:void 0!==s._editingEpisodeIndex?"에피소드 수정":"새 에피소드 추가"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"에피소드 번호*"}),c.jsx("input",{type:"number",value:tl,onChange:e=>ti(e.target.value),className:"w-full px-3 py-2 border rounded-lg",min:"1",required:!0})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"제목"}),c.jsx("input",{type:"text",value:tn,onChange:e=>td(e.target.value),className:"w-full px-3 py-2 border rounded-lg",placeholder:"에피소드 제목"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"방영일"}),c.jsx("input",{type:"date",value:tc,onChange:e=>to(e.target.value),className:"w-full px-3 py-2 border rounded-lg"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"런타임 (분)"}),c.jsx("input",{type:"number",value:tu,onChange:e=>th(e.target.value),className:"w-full px-3 py-2 border rounded-lg",min:"1",placeholder:"60"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"평점 (0-10)"}),c.jsx("input",{type:"number",value:tp,onChange:e=>tg(e.target.value),className:"w-full px-3 py-2 border rounded-lg",min:"0",max:"10",step:"0.1",placeholder:"0.0"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"시청률 (%)"}),c.jsx("input",{type:"number",value:tb,onChange:e=>ty(e.target.value),className:"w-full px-3 py-2 border rounded-lg",min:"0",max:"100",step:"0.1",placeholder:"0.0"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"이미지 URL"}),c.jsx("input",{type:"text",value:tf,onChange:e=>tv(e.target.value),className:"w-full px-3 py-2 border rounded-lg",placeholder:"https://example.com/image.jpg"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MDL URL"}),c.jsx("input",{type:"text",value:tj,onChange:e=>tN(e.target.value),className:"w-full px-3 py-2 border rounded-lg",placeholder:"https://mydramalist.com/..."})]})]}),(0,c.jsxs)("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"줄거리"}),c.jsx("textarea",{value:tm,onChange:e=>tx(e.target.value),className:"w-full px-3 py-2 border rounded-lg",rows:"3",placeholder:"에피소드 줄거리..."})]}),(0,c.jsxs)("div",{className:"flex justify-end space-x-2",children:[c.jsx("button",{type:"button",onClick:()=>{tL(),tk(!1)},className:"px-4 py-2 border rounded-lg hover:bg-gray-100",children:"취소"}),c.jsx("button",{type:"button",onClick:()=>{if(!tl){te("에피소드 번호를 입력해주세요.","error");return}let e={number:parseInt(tl),title:tn,airDate:tc?new Date(tc):null,summary:tm,runtime:tu?parseInt(tu):null,rating:tp?parseFloat(tp):null,viewerRating:tb?parseFloat(tb):null,image:tf,mdlUrl:tj};a(t=>{if(!t.episodeList)return{...t,episodeList:[e]};if(void 0!==t._editingEpisodeIndex){let s=[...t.episodeList];s[t._editingEpisodeIndex]=e;let{_editingEpisodeIndex:a,...r}=t;return{...r,episodeList:s}}return{...t,episodeList:[...t.episodeList,e]}}),tL(),tk(!1),te("에피소드가 저장되었습니다.","success")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"저장"})]})]}),s.episodeList&&s.episodeList.length>0?c.jsx("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"번호"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"제목"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"방영일"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"평점"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"시청률"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"액션"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.episodeList.sort((e,t)=>e.number-t.number).map((e,t)=>(0,c.jsxs)("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.number}),(0,c.jsxs)("td",{className:"px-6 py-4",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.title||`에피소드 ${e.number}`}),e.summary&&c.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.summary})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.airDate?new Date(e.airDate).toLocaleDateString():"-"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.rating?(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx(v.default,{size:16,className:"text-yellow-400 mr-1"}),c.jsx("span",{children:e.rating.toFixed(1)})]}):"-"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.viewerRating?`${e.viewerRating.toFixed(1)}%`:"-"}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[c.jsx("button",{type:"button",onClick:()=>tS(t),className:"text-blue-600 hover:text-blue-900 mr-3",children:"수정"}),c.jsx("button",{type:"button",onClick:()=>tC(t),className:"text-red-600 hover:text-red-900",children:"삭제"})]})]},t))})]})}):(0,c.jsxs)("div",{className:"bg-gray-50 p-8 text-center rounded-lg border",children:[c.jsx("p",{className:"text-gray-500 mb-4",children:"등록된 에피소드가 없습니다."}),c.jsx("p",{className:"text-sm text-gray-400",children:"오른쪽 상단의 버튼을 클릭하여 에피소드를 추가하거나 크롤링할 수 있습니다."})]})]})]}),(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[c.jsx("h2",{className:"text-xl font-bold mb-4",children:"기타 정보"}),(0,c.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"리뷰 크롤링"}),c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"MyDramalist에서 리뷰를 자동으로 수집합니다. 드라마 URL을 입력하면 /reviews가 없는 경우 자동으로 추가됩니다."}),(0,c.jsxs)("div",{className:"flex items-end space-x-2 mb-2",children:[(0,c.jsxs)("div",{className:"flex-grow",children:[c.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"MyDramalist URL"}),c.jsx("input",{type:"text",value:B,onChange:e=>J(e.target.value),placeholder:"https://mydramalist.com/드라마ID-드라마제목",className:"w-full border border-gray-300 rounded-md px-3 py-2",disabled:Z}),s.mdlUrl&&!B&&c.jsx("button",{type:"button",onClick:()=>J(s.mdlUrl),className:"mt-1 text-sm text-blue-600 hover:text-blue-800",children:"기존 MDL URL 사용하기"})]}),c.jsx("button",{onClick:tR,disabled:Z||!B,className:`px-4 py-2 rounded-md ${Z?"bg-gray-400 cursor-not-allowed":B?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"} text-white font-medium transition-colors`,children:Z?(0,c.jsxs)(c.Fragment,{children:[c.jsx("span",{className:"inline-block animate-spin mr-1",children:"⟳"})," 크롤링 중..."]}):"리뷰 크롤링"})]}),(Z||es)&&(0,c.jsxs)("div",{className:"mt-2 mb-3",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${Z?"bg-blue-500 animate-pulse":"bg-green-500"}`}),c.jsx("span",{className:"text-sm text-gray-700",children:Z?"크롤링 진행 중...":es})]}),Z&&c.jsx("div",{className:"mt-2 w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-blue-600 rounded-full animate-progress"})})]}),ee&&(0,c.jsxs)("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md text-red-800 text-sm",children:[c.jsx("p",{className:"font-medium",children:"크롤링 오류 발생:"}),c.jsx("p",{children:ee}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"URL이 올바른지 확인하고 다시 시도해보세요. Cloudflare 보호가 활성화되어 있을 수 있습니다."})]}),X&&(0,c.jsxs)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md",children:[(0,c.jsxs)("p",{className:"text-green-800 font-medium",children:[X.reviews.length,"개의 리뷰를 성공적으로 수집했습니다."]}),(0,c.jsxs)("div",{className:"mt-3 space-y-2",children:[X.reviews.slice(0,5).map((e,t)=>(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-pink-100 flex items-center justify-center text-pink-600 font-bold mr-2",children:e.rating}),(0,c.jsxs)("div",{children:[c.jsx("div",{className:"text-sm font-medium",children:e.username}),(0,c.jsxs)("div",{className:"flex",children:[[void 0,void 0,void 0,void 0,void 0].map((t,s)=>c.jsx("span",{className:`text-sm ${s<Math.round(e.rating/2)?"text-yellow-400":"text-gray-300"}`,children:"★"},s)),(0,c.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",new Date(e.createdAt).toLocaleDateString(),")"]})]})]})]},t)),X.reviews.length>5&&(0,c.jsxs)("div",{className:"pt-2 mt-2 border-t border-green-100 text-gray-500 text-sm",children:["...외 ",X.reviews.length-5,"개"]})]}),X.reviews.length>0&&(0,c.jsxs)("div",{className:"mt-4 pt-3 border-t border-green-200",children:[c.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"리뷰 요약"}),(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-400 to-rose-500 flex items-center justify-center text-white font-bold text-xl shadow-sm mr-4",children:(X.reviews.reduce((e,t)=>e+t.rating,0)/X.reviews.length).toFixed(1)}),(0,c.jsxs)("div",{children:[c.jsx("div",{className:"text-sm font-medium text-green-700",children:"평균 평점 (Overall)"}),c.jsx("div",{className:"flex mt-1",children:[1,2,3,4,5].map(e=>c.jsx(v.default,{className:`w-5 h-5 ${e<=Math.round(X.reviews.reduce((e,t)=>e+t.rating,0)/X.reviews.length/2)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},e))}),(0,c.jsxs)("div",{className:"text-xs text-green-700 mt-1",children:[X.reviews.length,"개 리뷰 기준"]})]})]})]})]})]})]})]}),d.visible&&c.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-md",children:c.jsx("div",{className:`flex items-center p-4 rounded-lg shadow-lg ${"success"===d.type?"bg-green-100 text-green-800":"error"===d.type?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:d.message})})]})}async function w(e){let t=await (0,x.getSession)(e);return t&&t.user&&["admin","editor"].includes(t.user.role)?{props:{session:t}}:{redirect:{destination:"/login?from="+encodeURIComponent(e.resolvedUrl),permanent:!1}}}let k=(0,i.hoist)(a,"default"),S=(0,i.hoist)(a,"getStaticProps"),C=(0,i.hoist)(a,"getStaticPaths"),L=(0,i.hoist)(a,"getServerSideProps"),$=(0,i.hoist)(a,"config"),D=(0,i.hoist)(a,"reportWebVitals"),R=(0,i.hoist)(a,"unstable_getStaticProps"),T=(0,i.hoist)(a,"unstable_getStaticPaths"),z=(0,i.hoist)(a,"unstable_getStaticParams"),U=(0,i.hoist)(a,"unstable_getServerProps"),M=(0,i.hoist)(a,"unstable_getServerSideProps"),q=new r.PagesRouteModule({definition:{kind:l.RouteKind.PAGES,page:"/admin/content/edit/[id]",pathname:"/admin/content/edit/[id]",bundlePath:"",filename:""},components:{App:d.default,Document:n.default},userland:a})},79046:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var a=s(20997),r=s(16689),l=s(41664),i=s.n(l),n=s(11163),d=s(41649),c=s(83364),o=s(93663),m=s(71952),x=s(82096),u=s(83055),h=s(47963),p=s(51565),g=s(53585),b=s(90816),y=s(41549),f=s(62691),v=s(63696);let j=({children:e})=>{let t=(0,n.useRouter)(),{data:s,status:l}=(0,d.useSession)(),[j,N]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{("unauthenticated"===l||s&&"admin"!==s.user.role)&&t.push("/admin/login")},[s,l,t]),"loading"===l)?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:a.jsx("div",{className:"p-8 bg-white rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-t-[#ff3e8e] rounded-full animate-spin"}),a.jsx("p",{className:"text-xl font-medium",children:"Loading admin panel..."})]})})}):"unauthenticated"===l||s&&"admin"!==s.user.role?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:a.jsx("div",{className:"p-8 bg-white rounded-lg shadow-md max-w-md",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4 text-center",children:[a.jsx(c.default,{size:48,className:"text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Unauthorized Access"}),a.jsx("p",{className:"text-gray-600",children:"You don't have permission to access the admin area."}),a.jsx(i(),{href:"/",className:"px-4 py-2 mt-4 text-white bg-[#ff3e8e] rounded-md hover:bg-[#e02e7c]",children:"Go to Homepage"})]})})}):(o.default,m.default,x.default,u.default,h.default,p.default,a.jsx("div",{className:"min-h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"w-64 min-h-screen bg-white shadow-md",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"관리자 패널"})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("ul",{className:"space-y-2",children:[a.jsx("li",{children:(0,a.jsxs)(i(),{href:"/admin",className:`flex items-center px-4 py-2 rounded-lg ${"/admin"===t.pathname?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[a.jsx(o.default,{className:"mr-3 h-5 w-5"}),"대시보드"]})}),a.jsx("li",{children:(0,a.jsxs)(i(),{href:"/admin/content",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/content")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[a.jsx(g.default,{className:"mr-3 h-5 w-5"}),"콘텐츠 관리"]})}),a.jsx("li",{children:(0,a.jsxs)(i(),{href:"/admin/news",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/news")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[a.jsx(b.default,{className:"mr-3 h-5 w-5"}),"뉴스 관리"]})}),a.jsx("li",{children:(0,a.jsxs)(i(),{href:"/admin/drama",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/drama")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[a.jsx(y.default,{className:"mr-3 h-5 w-5"}),"드라마 관리"]})}),a.jsx("li",{children:(0,a.jsxs)(i(),{href:"/admin/music",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/music")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[a.jsx(u.default,{className:"mr-3 h-5 w-5"}),"음악 차트 관리"]})}),a.jsx("li",{children:(0,a.jsxs)(i(),{href:"/admin/celeb",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/celeb")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[a.jsx(f.default,{className:"mr-3 h-5 w-5"}),"셀럽 관리"]})}),a.jsx("li",{children:(0,a.jsxs)(i(),{href:"/admin/users",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/users")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[a.jsx(h.default,{className:"mr-3 h-5 w-5"}),"사용자 관리"]})})]}),a.jsx("div",{className:"border-t mt-4 pt-4",children:(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("adminToken"),sessionStorage.removeItem("adminToken"),(0,d.signOut)({callbackUrl:"/"})},className:"flex items-center w-full px-4 py-2 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[a.jsx(v.default,{className:"mr-3 h-5 w-5"}),"로그아웃"]})})]})]}),a.jsx("div",{className:"flex-1",children:e})]})}))}},83364:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},25875:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3785:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]])},71952:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},41549:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Film",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"2.18",ry:"2.18",key:"vury4c"}],["line",{x1:"7",x2:"7",y1:"2",y2:"22",key:"t1e4qh"}],["line",{x1:"17",x2:"17",y1:"2",y2:"22",key:"1tliql"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"2",x2:"7",y1:"7",y2:"7",key:"1wdzzh"}],["line",{x1:"2",x2:"7",y1:"17",y2:"17",key:"2fufxq"}],["line",{x1:"17",x2:"22",y1:"17",y2:"17",key:"1xg577"}],["line",{x1:"17",x2:"22",y1:"7",y2:"7",key:"acrv2l"}]])},93663:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},53585:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]])},63696:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},83055:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]])},90816:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]])},25482:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},68453:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},55809:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},51565:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},62691:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},47963:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},82096:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]])},43613:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},41649:e=>{e.exports=require("next-auth/react")},62785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},40968:e=>{e.exports=require("next/head")},16689:e=>{e.exports=require("react")},66405:e=>{e.exports=require("react-dom")},20997:e=>{e.exports=require("react/jsx-runtime")},99816:e=>{e.exports=require("styled-jsx/style")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},76162:e=>{e.exports=require("stream")},71568:e=>{e.exports=require("zlib")}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[3393,1859,6859,8559,6870,8505],()=>s(88035));module.exports=a})();