"use strict";(()=>{var e={};e.id=8859,e.ids=[8859],e.modules={42238:(e,s,a)=>{a.a(e,async(e,t)=>{try{a.r(s),a.d(s,{config:()=>g,default:()=>m,getServerSideProps:()=>p,getStaticPaths:()=>h,getStaticProps:()=>x,reportWebVitals:()=>u,routeModule:()=>N,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>b,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>y});var r=a(87093),i=a(35244),l=a(1323),n=a(65949),c=a(81928),o=a(51281),d=e([o]);o=(d.then?(await d)():d)[0];let m=(0,l.hoist)(o,"default"),x=(0,l.hoist)(o,"getStaticProps"),h=(0,l.hoist)(o,"getStaticPaths"),p=(0,l.hoist)(o,"getServerSideProps"),g=(0,l.hoist)(o,"config"),u=(0,l.hoist)(o,"reportWebVitals"),y=(0,l.hoist)(o,"unstable_getStaticProps"),v=(0,l.hoist)(o,"unstable_getStaticPaths"),f=(0,l.hoist)(o,"unstable_getStaticParams"),j=(0,l.hoist)(o,"unstable_getServerProps"),b=(0,l.hoist)(o,"unstable_getServerSideProps"),N=new r.PagesRouteModule({definition:{kind:i.RouteKind.PAGES,page:"/admin/content/movie-crawler",pathname:"/admin/content/movie-crawler",bundlePath:"",filename:""},components:{App:c.default,Document:n.default},userland:o});t()}catch(e){t(e)}})},23552:(e,s,a)=>{a.r(s),a.d(s,{default:()=>t});let t=(0,a(64370).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},15595:(e,s,a)=>{a.r(s),a.d(s,{default:()=>t});let t=(0,a(64370).default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]])},51281:(e,s,a)=>{a.a(e,async(e,t)=>{try{a.r(s),a.d(s,{default:()=>v,getServerSideProps:()=>f});var r=a(20997),i=a(16689),l=a(41649),n=a(79046),c=a(40220),o=a(3785),d=a(83364),m=a(55809),x=a(23552),h=a(71952),p=a(15595);a(41664);var g=a(3590);a(88819),a(25675);var u=a(11163),y=e([g]);function v(){let{data:e,status:s}=(0,l.useSession)();(0,u.useRouter)();let[a,t]=(0,i.useState)("https://mydramalist.com/search?adv=titles&ty=77&co=3&so=newest&or=asc&page=1"),[y,v]=(0,i.useState)(!1),[f,j]=(0,i.useState)(null),[b,N]=(0,i.useState)([]),[w,S]=(0,i.useState)(null),[k,A]=(0,i.useState)({}),[C,P]=(0,i.useState)({}),[R,I]=(0,i.useState)(!1),[T,q]=(0,i.useState)(null),[D,E]=(0,i.useState)(!1),[M,O]=(0,i.useState)(0),[$,_]=(0,i.useState)({open:!1,movie:null}),[L,z]=(0,i.useState)(1),J=(e,s="info")=>{g.toast[s](e,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},B=async()=>{try{let e;v(!0),j(null),N([]),J(`영화 목록 크롤링 중입니다...`,"info");let s=await fetch("/api/crawler/movie-stealth-crawler",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:a,mode:"list"})});try{e=await s.json()}catch(e){throw Error("서버 응답을 처리하는 중 오류가 발생했습니다.")}if(!s.ok)throw Error(e.message||"영화 목록을 가져오는데 실패했습니다.");e.data&&e.data.movies?(N(e.data.movies),S(e.data.nextPage),J(`${e.data.movies.length}개의 영화 정보를 가져왔습니다.`,"success")):(j("영화 정보가 없거나 형식이 올바르지 않습니다."),J("영화 정보 가져오기에 실패했습니다.","error"))}catch(e){j(e.message||"크롤링 중 오류가 발생했습니다."),J(`크롤링 오류: ${e.message}`,"error")}finally{v(!1)}},W=async()=>{if(!w){J("더 이상 다음 페이지가 없습니다.","info");return}try{let e;v(!0),j(null),J("다음 페이지를 크롤링 중입니다...","info");let s=await fetch("/api/crawler/movie-stealth-crawler",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:w,mode:"list"})});try{e=await s.json()}catch(e){throw Error("서버 응답을 처리하는 중 오류가 발생했습니다.")}if(!s.ok)throw Error(e.message||"영화 목록을 가져오는데 실패했습니다.");e.data&&e.data.movies?(N(s=>[...s,...e.data.movies]),S(e.data.nextPage),J(`${e.data.movies.length}개의 영화 정보를 추가로 가져왔습니다.`,"success")):(j("영화 정보가 없거나 형식이 올바르지 않습니다."),J("영화 정보 가져오기에 실패했습니다.","error"))}catch(e){j(e.message||"크롤링 중 오류가 발생했습니다."),J(`크롤링 오류: ${e.message}`,"error")}finally{v(!1)}},G=async e=>{try{let s;v(!0),j(null),J(`"${e.title}" 영화의 상세 정보를 가져오는 중...`,"info");let a=await fetch("/api/crawler/movie-stealth-crawler",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e.url,mode:"detail"})});try{s=await a.json()}catch(e){throw Error("서버 응답을 처리하는 중 오류가 발생했습니다.")}if(!a.ok)throw Error(s.message||"영화 상세 정보를 가져오는데 실패했습니다.");let t=s.data||{},r={...e,...t,mdlId:e.id,mdlUrl:e.url};return r.credits,r.cast,["originalTitle","releaseDate","duration","runtime","country","contentRating","genres","synopsis","summary","poster","coverImage","bannerImage"].forEach(e=>{r[e]}),!r.summary&&r.synopsis&&(r.summary=r.synopsis),!r.runtime&&r.duration&&(r.runtime=r.duration),!r.ageRating&&r.contentRating&&(r.ageRating=r.contentRating),!r.coverImage&&r.poster&&(r.coverImage=r.poster),r.bannerImage||(r.bannerImage=r.coverImage||r.poster),Array.isArray(r.genres)||(r.genres=[]),Array.isArray(r.tags)||(r.tags=[]),Array.isArray(r.watchProviders)||(r.watchProviders=[]),r.credits&&(("object"!=typeof r.cast||Array.isArray(r.cast))&&(r.cast={mainRoles:[],supportRoles:[]}),Array.isArray(r.credits.mainCast)&&(r.cast.mainRoles=r.credits.mainCast),Array.isArray(r.credits.supportCast)&&(r.cast.supportRoles=r.credits.supportCast)),q(r),_({open:!0,movie:r}),J(`"${e.title}" 영화의 상세 정보를 가져왔습니다.`,"success"),r}catch(e){return j(e.message||"상세 정보 크롤링 중 오류가 발생했습니다."),J(`크롤링 오류: ${e.message}`,"error"),null}finally{v(!1)}},H=async e=>{if(!e){J("저장할 영화 데이터가 없습니다.","error");return}try{let s;if(P(s=>({...s,[e.mdlId]:"saving"})),e.credits){if(Array.isArray(e.credits.mainCast)||Array.isArray(e.credits.supportCast)){let s=Array.isArray(e.credits.mainCast)?e.credits.mainCast:[],a=Array.isArray(e.credits.supportCast)?e.credits.supportCast:[],t=new Set,r=[...s.filter(e=>!!e&&!!e.name&&!t.has(e.name)&&(t.add(e.name),!0)).map((e,s)=>({name:e.name||"N/A",role:e.role||(e.character?e.character:"Main Role"),image:e.image||"",order:s})),...a.filter(e=>!!e&&!!e.name&&!t.has(e.name)&&(t.add(e.name),!0)).map((e,a)=>({name:e.name||"N/A",role:e.role||(e.character?e.character:"Support Role"),image:e.image||"",order:s.length+a}))];e.cast=r}}else if(e.cast&&"object"==typeof e.cast&&!Array.isArray(e.cast)){let s=Array.isArray(e.cast.mainRoles)?e.cast.mainRoles:[],a=Array.isArray(e.cast.supportRoles)?e.cast.supportRoles:[],t=new Set,r=[...s.filter(e=>!!e&&!!e.name&&!t.has(e.name)&&(t.add(e.name),!0)).map((e,s)=>({name:e.name||"N/A",role:e.role||"Main Role",image:e.image||"",order:s})),...a.filter(e=>!!e&&!!e.name&&!t.has(e.name)&&(t.add(e.name),!0)).map((e,a)=>({name:e.name||"N/A",role:e.role||"Support Role",image:e.image||"",order:s.length+a}))];e.cast=r}let a={...e,category:"movie",status:e.status||"completed",originalTitle:e.originalTitle||"",summary:e.synopsis||e.summary||"",content:e.synopsis||e.content||e.summary||"",releaseDate:e.releaseDate||null,director:e.director||"",runtime:e.duration||e.runtime||"",country:e.country||"South Korea",ageRating:e.contentRating||"",genres:Array.isArray(e.genres)?e.genres:[],tags:Array.isArray(e.tags)?e.tags:[],coverImage:e.poster||e.coverImage||"/images/placeholder-tvfilm.svg",bannerImage:e.bannerImage||e.poster||"/images/placeholder-tvfilm.svg",watchProviders:Array.isArray(e.watchProviders)?e.watchProviders:[],createdAt:new Date,updatedAt:new Date},t=localStorage.getItem("token")||localStorage.getItem("adminToken")||sessionStorage.getItem("token")||sessionStorage.getItem("adminToken");if(!t)try{let e=await fetch("/api/auth/session"),s=await e.json();s?.user?.role==="admin"&&(t="session-based-auth")}catch(e){}let r=await fetch("/api/dramas",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""},body:JSON.stringify(a)});try{s=await r.json()}catch(e){throw Error("서버 응답을 처리하는 중 오류가 발생했습니다.")}if(!r.ok)throw Error(s.message||"영화 저장에 실패했습니다.");return P(s=>({...s,[e.mdlId]:"saved"})),J(`"${e.title}" 영화를 저장했습니다.`,"success"),s.data}catch(s){return P(s=>({...s,[e.mdlId]:"error"})),J(`저장 오류: ${s.message}`,"error"),null}},K=e=>{A(s=>({...s,[e]:!s[e]}))},V=e=>{let s=C[e];return"saving"===s?r.jsx(c.default,{className:"animate-spin h-4 w-4 text-blue-500"}):"saved"===s?r.jsx(o.default,{className:"h-4 w-4 text-green-500"}):"error"===s?r.jsx(d.default,{className:"h-4 w-4 text-red-500"}):null};return(0,r.jsxs)(n.default,{children:[(0,r.jsxs)("div",{className:"container px-4 py-6 mx-auto",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"영화 정보 등록"}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"MyDramaList 영화 크롤링"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"최대 페이지 수"}),r.jsx("input",{type:"number",min:"1",max:"10",value:L,onChange:e=>z(parseInt(e.target.value)||1),className:"w-full border border-gray-300 rounded-md px-3 py-2",disabled:y})]}),r.jsx("div",{className:"flex items-end",children:(0,r.jsxs)("button",{onClick:B,disabled:y,className:"w-full px-4 py-2 rounded-md flex items-center justify-center",style:{backgroundColor:y?"#93b4ff":"#233cfa",color:"white"},children:[y?r.jsx(c.default,{className:"animate-spin h-4 w-4 mr-2"}):r.jsx(x.default,{className:"h-4 w-4 mr-2"}),"스텔스 크롤링 시작"]})})]}),f&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded text-sm mb-4",children:f})]}),b.length>0&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold",children:["크롤링된 영화 목록 (",b.length,"개)"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:()=>{if(Object.keys(k).length===b.length&&Object.values(k).every(e=>e))A({});else{let e={};b.forEach(s=>{e[s.id]=!0}),A(e)}},className:"bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-1 rounded text-sm flex items-center gap-1",children:[r.jsx(o.default,{className:"h-4 w-4"}),"전체 선택/해제"]}),w&&(0,r.jsxs)("button",{onClick:W,disabled:y,className:"px-3 py-1 rounded text-sm flex items-center gap-1 text-white",style:{backgroundColor:y?"#93b4ff":"#233cfa"},children:[y?r.jsx(c.default,{className:"animate-spin h-4 w-4"}):r.jsx(h.default,{className:"h-4 w-4"}),"다음 페이지"]})]})]}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-10",children:"선택"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-14",children:"이미지"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"제목"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"평점"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"연도"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"상태"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"작업"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:r.jsx("input",{type:"checkbox",checked:k[e.id]||!1,onChange:()=>K(e.id),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.image?r.jsx("div",{className:"w-10 h-14 relative overflow-hidden rounded",children:r.jsx("img",{src:e.image,alt:e.title,className:"object-cover w-full h-full",onError:e=>{e.target.src="/images/placeholder-poster.png"}})}):r.jsx("div",{className:"w-10 h-14 bg-gray-200 flex items-center justify-center rounded",children:r.jsx("span",{className:"text-xs text-gray-500",children:"없음"})})}),(0,r.jsxs)("td",{className:"px-4 py-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.title}),r.jsx("div",{className:"text-xs text-gray-500",children:e.id}),r.jsx("div",{className:"text-xs text-blue-500 hover:underline",children:(0,r.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1",children:[r.jsx(p.default,{className:"h-3 w-3"}),"MDL"]})})]}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.rating?r.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:e.rating}):r.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:e.year||"-"}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:V(e.id)||r.jsx("span",{className:"text-xs text-gray-400",children:"대기중"})}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>G(e),disabled:y,className:"text-xs flex items-center gap-1",style:{color:"#233cfa"},children:"상세정보"}),"saved"===C[e.id]?r.jsx("span",{className:"text-green-600 text-xs",children:"✓ 저장됨"}):r.jsx("button",{onClick:async()=>{await G(e),T&&await H(T)},disabled:y||"saving"===C[e.id],className:"text-xs flex items-center gap-1",style:{color:y||"saving"===C[e.id]?"#93b4ff":"#233cfa"},children:"saving"===C[e.id]?"저장 중...":"저장"})]})})]},e.id))})]})})]})]}),$.open&&$.movie?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-auto",children:r.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:$.movie.title}),r.jsx("button",{onClick:()=>_({open:!1,movie:null}),className:"text-gray-500 hover:text-gray-700",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"md:col-span-1",children:[$.movie.poster?r.jsx("div",{className:"relative w-full aspect-[2/3] rounded overflow-hidden",children:r.jsx("img",{src:$.movie.poster,alt:$.movie.title,className:"object-cover w-full h-full"})}):r.jsx("div",{className:"w-full aspect-[2/3] bg-gray-200 flex items-center justify-center rounded",children:r.jsx("span",{className:"text-gray-400",children:"이미지 없음"})}),(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"평점:"}),r.jsx("span",{className:"font-semibold",children:$.movie.rating||"정보 없음"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"연도:"}),r.jsx("span",{className:"font-semibold",children:$.movie.year||"정보 없음"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"국가:"}),r.jsx("span",{className:"font-semibold",children:$.movie.country||"정보 없음"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"리뷰:"}),r.jsx("span",{className:"font-semibold",children:$.movie.reviewCount||"0"})]})]})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"상세 정보"}),$.movie.originalTitle&&(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx("span",{className:"text-gray-500 text-sm",children:"원제: "}),r.jsx("span",{children:$.movie.originalTitle})]}),$.movie.genres&&$.movie.genres.length>0&&(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx("span",{className:"text-gray-500 text-sm",children:"장르: "}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:$.movie.genres.map((e,s)=>r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded",children:e},s))})]}),$.movie.synopsis&&(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx("span",{className:"text-gray-500 text-sm",children:"줄거리: "}),r.jsx("p",{className:"text-sm mt-1 text-gray-700",children:$.movie.synopsis})]}),$.movie.cast&&$.movie.cast.mainRoles&&$.movie.cast.mainRoles.length>0&&(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx("span",{className:"text-gray-500 text-sm",children:"주요 출연진: "}),r.jsx("ul",{className:"list-disc list-inside text-sm mt-1",children:$.movie.cast.mainRoles.map((e,s)=>(0,r.jsxs)("li",{children:[e.name," ",e.role?` - ${e.role}`:""]},s))})]}),$.movie.releaseDate&&(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx("span",{className:"text-gray-500 text-sm",children:"개봉일: "}),r.jsx("span",{children:$.movie.releaseDate})]}),$.movie.duration&&(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx("span",{className:"text-gray-500 text-sm",children:"상영 시간: "}),r.jsx("span",{children:$.movie.duration})]}),$.movie.contentRating&&(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx("span",{className:"text-gray-500 text-sm",children:"등급: "}),r.jsx("span",{children:$.movie.contentRating})]})]})]}),(0,r.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"리뷰 정보"}),$.movie.reviewCount>0?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-500",children:"평균 평점:"}),r.jsx("span",{className:"font-semibold",children:$.movie.reviewRating?.toFixed(1)||"0"})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-500",children:"평점 분포:"}),r.jsx("div",{className:"flex mt-1 gap-1 h-24",children:$.movie.ratingDistribution&&$.movie.ratingDistribution.map((e,s)=>(0,r.jsxs)("div",{className:"flex flex-col items-center w-8",children:[r.jsx("div",{className:"flex-grow w-full bg-gray-100 relative",children:r.jsx("div",{className:"absolute bottom-0 w-full bg-blue-500",style:{height:`${e>0?Math.max(e/Math.max(...$.movie.ratingDistribution)*100,10):0}%`}})}),r.jsx("span",{className:"text-xs mt-1",children:s+1})]},s))})]})]}):r.jsx("div",{className:"text-gray-500",children:"아직 리뷰 정보가 없습니다. 리뷰를 크롤링하세요."})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[r.jsx("button",{onClick:()=>_({open:!1,movie:null}),className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50 text-sm",children:"닫기"}),(0,r.jsxs)("button",{onClick:()=>H($.movie),disabled:y||"saving"===C[$.movie.mdlId]||"saved"===C[$.movie.mdlId],className:"px-4 py-2 rounded text-white text-sm flex items-center gap-1",style:{backgroundColor:y||"saving"===C[$.movie.mdlId]||"saved"===C[$.movie.mdlId]?"#93b4ff":"#233cfa"},children:["saving"===C[$.movie.mdlId]?r.jsx(c.default,{className:"animate-spin h-4 w-4"}):r.jsx(m.default,{className:"h-4 w-4"}),"데이터베이스에 저장"]})]})]})})}):null,r.jsx(g.ToastContainer,{})]})}async function f(e){let s=await (0,l.getSession)(e);return s&&"admin"===s.user.role?{props:{session:s}}:{redirect:{destination:"/admin/login",permanent:!1}}}g=(y.then?(await y)():y)[0],t()}catch(e){t(e)}})},41649:e=>{e.exports=require("next-auth/react")},62785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},40968:e=>{e.exports=require("next/head")},16689:e=>{e.exports=require("react")},66405:e=>{e.exports=require("react-dom")},20997:e=>{e.exports=require("react/jsx-runtime")},99816:e=>{e.exports=require("styled-jsx/style")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},76162:e=>{e.exports=require("stream")},71568:e=>{e.exports=require("zlib")},3590:e=>{e.exports=import("react-toastify")}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[3393,1859,6859,8559,6870,8505,6014],()=>a(42238));module.exports=t})();