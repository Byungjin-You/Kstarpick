(()=>{var e={};e.id=5026,e.ids=[5026],e.modules={48836:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>x,getStaticProps:()=>u,reportWebVitals:()=>p,routeModule:()=>N,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>j,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>b});var r=s(87093),l=s(35244),i=s(1323),n=s(65949),d=s(81928),c=s(42424),o=e([c]);c=(o.then?(await o)():o)[0];let m=(0,i.hoist)(c,"default"),u=(0,i.hoist)(c,"getStaticProps"),x=(0,i.hoist)(c,"getStaticPaths"),h=(0,i.hoist)(c,"getServerSideProps"),g=(0,i.hoist)(c,"config"),p=(0,i.hoist)(c,"reportWebVitals"),b=(0,i.hoist)(c,"unstable_getStaticProps"),f=(0,i.hoist)(c,"unstable_getStaticPaths"),y=(0,i.hoist)(c,"unstable_getStaticParams"),v=(0,i.hoist)(c,"unstable_getServerProps"),j=(0,i.hoist)(c,"unstable_getServerSideProps"),N=new r.PagesRouteModule({definition:{kind:l.RouteKind.PAGES,page:"/admin/content/new",pathname:"/admin/content/new",bundlePath:"",filename:""},components:{App:d.default,Document:n.default},userland:c});a()}catch(e){a(e)}})},79046:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(20997),r=s(16689),l=s(41664),i=s.n(l),n=s(11163),d=s(41649),c=s(83364),o=s(93663),m=s(71952),u=s(82096),x=s(83055),h=s(47963),g=s(51565),p=s(53585),b=s(90816),f=s(41549),y=s(62691),v=s(63696);let j=({children:e})=>{let t=(0,n.useRouter)(),{data:s,status:l}=(0,d.useSession)(),[j,N]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{("unauthenticated"===l||s&&"admin"!==s.user.role)&&t.push("/admin/login")},[s,l,t]),"loading"===l)?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:a.jsx("div",{className:"p-8 bg-white rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-t-[#ff3e8e] rounded-full animate-spin"}),a.jsx("p",{className:"text-xl font-medium",children:"Loading admin panel..."})]})})}):"unauthenticated"===l||s&&"admin"!==s.user.role?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:a.jsx("div",{className:"p-8 bg-white rounded-lg shadow-md max-w-md",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4 text-center",children:[a.jsx(c.default,{size:48,className:"text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Unauthorized Access"}),a.jsx("p",{className:"text-gray-600",children:"You don't have permission to access the admin area."}),a.jsx(i(),{href:"/",className:"px-4 py-2 mt-4 text-white bg-[#ff3e8e] rounded-md hover:bg-[#e02e7c]",children:"Go to Homepage"})]})})}):(o.default,m.default,u.default,x.default,h.default,g.default,a.jsx("div",{className:"min-h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"w-64 min-h-screen bg-white shadow-md",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"관리자 패널"})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("ul",{className:"space-y-2",children:[a.jsx("li",{children:(0,a.jsxs)(i(),{href:"/admin",className:`flex items-center px-4 py-2 rounded-lg ${"/admin"===t.pathname?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[a.jsx(o.default,{className:"mr-3 h-5 w-5"}),"대시보드"]})}),a.jsx("li",{children:(0,a.jsxs)(i(),{href:"/admin/content",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/content")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[a.jsx(p.default,{className:"mr-3 h-5 w-5"}),"콘텐츠 관리"]})}),a.jsx("li",{children:(0,a.jsxs)(i(),{href:"/admin/news",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/news")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[a.jsx(b.default,{className:"mr-3 h-5 w-5"}),"뉴스 관리"]})}),a.jsx("li",{children:(0,a.jsxs)(i(),{href:"/admin/drama",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/drama")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[a.jsx(f.default,{className:"mr-3 h-5 w-5"}),"드라마 관리"]})}),a.jsx("li",{children:(0,a.jsxs)(i(),{href:"/admin/music",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/music")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[a.jsx(x.default,{className:"mr-3 h-5 w-5"}),"음악 차트 관리"]})}),a.jsx("li",{children:(0,a.jsxs)(i(),{href:"/admin/celeb",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/celeb")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[a.jsx(y.default,{className:"mr-3 h-5 w-5"}),"셀럽 관리"]})}),a.jsx("li",{children:(0,a.jsxs)(i(),{href:"/admin/users",className:`flex items-center px-4 py-2 rounded-lg ${t.pathname.startsWith("/admin/users")?"bg-blue-600 text-white":"text-gray-800 hover:bg-blue-100"}`,children:[a.jsx(h.default,{className:"mr-3 h-5 w-5"}),"사용자 관리"]})})]}),a.jsx("div",{className:"border-t mt-4 pt-4",children:(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("adminToken"),sessionStorage.removeItem("adminToken"),(0,d.signOut)({callbackUrl:"/"})},className:"flex items-center w-full px-4 py-2 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[a.jsx(v.default,{className:"mr-3 h-5 w-5"}),"로그아웃"]})})]})]}),a.jsx("div",{className:"flex-1",children:e})]})}))}},37321:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(20997),r=s(16689),l=s(68453),i=s(28154),n=s(91020);let d=(0,s(64370).default)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),c=[{id:"action",name:"액션"},{id:"adventure",name:"모험"},{id:"animation",name:"애니메이션"},{id:"comedy",name:"코미디"},{id:"crime",name:"범죄"},{id:"documentary",name:"다큐멘터리"},{id:"drama",name:"드라마"},{id:"family",name:"가족"},{id:"fantasy",name:"판타지"},{id:"history",name:"역사"},{id:"horror",name:"공포"},{id:"music",name:"음악"},{id:"mystery",name:"미스터리"},{id:"romance",name:"로맨스"},{id:"science-fiction",name:"SF"},{id:"thriller",name:"스릴러"},{id:"war",name:"전쟁"},{id:"western",name:"서부"}],o=({initialGenres:e=[],onChange:t})=>{let[s,o]=(0,r.useState)(e),[m,u]=(0,r.useState)(""),[x,h]=(0,r.useState)(!1),[g,p]=(0,r.useState)({id:"",name:""}),[b,f]=(0,r.useState)({});(0,r.useEffect)(()=>{e&&o(e)},[e]);let y=c.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())||e.id.toLowerCase().includes(m.toLowerCase())),v=e=>s.some(t=>t.id===e),j=e=>{if(v(e.id)){let a=s.filter(t=>t.id!==e.id);o(a),t(a)}else{let a=[...s,e];o(a),t(a)}},N=e=>{let{name:t,value:s}=e.target;p(e=>({...e,[t]:s})),b[t]&&f(e=>({...e,[t]:null}))},w=e=>e.toLowerCase().replace(/[^a-z0-9가-힣]/g,"-").replace(/-+/g,"-").replace(/(^-|-$)/g,""),k=e=>{let a=s.filter(t=>t.id!==e);o(a),t(a)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"장르 관리"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{p({id:"",name:""}),f({}),h(!0)},className:"px-3 py-1.5 text-sm bg-pink-50 text-pink-600 rounded-md hover:bg-pink-100 transition flex items-center",children:[a.jsx(l.default,{className:"w-4 h-4 mr-1"}),"커스텀 장르 추가"]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"선택된 장르"}),0===s.length?a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-center",children:a.jsx("p",{className:"text-gray-500",children:"선택된 장르가 없습니다."})}):a.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(e=>(0,a.jsxs)("div",{className:`px-3 py-1.5 rounded-full text-sm flex items-center ${e.custom?"bg-pink-50 text-pink-600 border border-pink-200":"bg-blue-50 text-blue-600 border border-blue-200"}`,children:[e.name,a.jsx("button",{type:"button",onClick:()=>k(e.id),className:"ml-1.5 text-current hover:text-red-500",children:a.jsx(i.default,{className:"w-3.5 h-3.5"})})]},e.id))})]}),a.jsx("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:"text",value:m,onChange:e=>u(e.target.value),placeholder:"장르 검색...",className:"w-full px-4 py-2 border border-gray-300 rounded-md"}),m&&a.jsx("button",{type:"button",onClick:()=>u(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a.jsx(i.default,{className:"w-4 h-4"})})]})}),a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:a.jsx("div",{className:"max-h-80 overflow-y-auto",children:0===y.length?a.jsx("div",{className:"p-6 text-center",children:a.jsx("p",{className:"text-gray-500",children:"검색 결과가 없습니다."})}):a.jsx("div",{className:"divide-y divide-gray-200",children:y.map(e=>(0,a.jsxs)("div",{className:`p-3 flex items-center hover:bg-gray-50 cursor-pointer ${v(e.id)?"bg-gray-50":""}`,onClick:()=>j(e),children:[a.jsx("div",{className:"mr-3 text-blue-500",children:v(e.id)?a.jsx(n.default,{className:"w-5 h-5"}):a.jsx(d,{className:"w-5 h-5 text-gray-300"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.name}),a.jsx("p",{className:"text-xs text-gray-500",children:e.id})]})]},e.id))})})}),x&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,a.jsxs)("div",{className:"p-5 border-b border-gray-200 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"커스텀 장르 추가"}),a.jsx("button",{type:"button",onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-500",children:a.jsx(i.default,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-5 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["장르 이름 ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"name",value:g.name,onChange:N,onBlur:()=>{g.name&&!g.id&&p(e=>({...e,id:w(e.name)}))},className:`w-full px-3 py-2 border rounded-md ${b.name?"border-red-300":"border-gray-300"}`,placeholder:"예: 로맨틱 코미디"}),b.name&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["장르 ID ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"id",value:g.id,onChange:N,className:`w-full px-3 py-2 border rounded-md ${b.id?"border-red-300":"border-gray-300"}`,placeholder:"예: romantic-comedy"}),b.id&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.id}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"영문, 숫자, 하이픈(-) 만 사용 가능합니다. 이름을 입력하면 자동으로 생성됩니다."})]})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"취소"}),a.jsx("button",{type:"button",onClick:()=>{let e={};if(g.name.trim()||(e.name="장르 이름을 입력해주세요."),g.id.trim()?(c.some(e=>e.id===g.id)||s.some(e=>e.id===g.id))&&(e.id="이미 사용 중인 ID입니다."):e.id="장르 ID를 입력해주세요.",Object.keys(e).length>0){f(e);return}let a=[...s,{id:g.id,name:g.name,custom:!0}];o(a),t(a),h(!1)},className:"px-4 py-2 bg-pink-500 text-white rounded-md hover:bg-pink-600",children:"추가"})]})]})})]})}},86629:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(20997),r=s(16689),l=s(91020),i=s(83364),n=s(26848),d=s(28154);let c=({message:e,type:t="info",duration:s=3e3,onClose:c})=>{let[o,m]=(0,r.useState)(!0);if((0,r.useEffect)(()=>{let e=setTimeout(()=>{m(!1),c&&c()},s);return()=>clearTimeout(e)},[s,c]),!o)return null;let u="success"===t?l.default:"error"===t?i.default:"warning"===t?i.default:n.default;return a.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-md animate-fade-in",children:(0,a.jsxs)("div",{className:`flex items-center p-4 rounded-lg border ${"success"===t?"bg-green-50 border-green-500":"error"===t?"bg-red-50 border-red-500":"warning"===t?"bg-yellow-50 border-yellow-500":"bg-blue-50 border-blue-500"} shadow-md`,children:[a.jsx(u,{className:`mr-2 ${"success"===t?"text-green-500":"error"===t?"text-red-500":"warning"===t?"text-yellow-500":"text-blue-500"}`,size:20}),a.jsx("div",{className:`flex-grow ${"success"===t?"text-green-800":"error"===t?"text-red-800":"warning"===t?"text-yellow-800":"text-blue-800"}`,children:e}),a.jsx("button",{onClick:()=>{m(!1),c&&c()},className:"ml-4 text-gray-500 hover:text-gray-700",children:a.jsx(d.default,{size:16})})]})})}},25875:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},91020:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},3785:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]])},26848:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},25482:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},68453:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},55809:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},43613:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},28154:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(64370).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},28864:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return d},noSSR:function(){return n}});let a=s(50167),r=s(20997);s(16689);let l=a._(s(74830));function i(e){return{default:(null==e?void 0:e.default)||e}}function n(e,t){delete t.webpack,delete t.modules;let s=t.loading;return()=>(0,r.jsx)(s,{error:null,isLoading:!0,pastDelay:!1,timedOut:!1})}function d(e,t){let s=l.default,a={loading:e=>{let{error:t,isLoading:s,pastDelay:a}=e;return null}};e instanceof Promise?a.loader=()=>e:"function"==typeof e?a.loader=e:"object"==typeof e&&(a={...a,...e});let r=(a={...a,...t}).loader;return(a.loadableGenerated&&(a={...a,...a.loadableGenerated},delete a.loadableGenerated),"boolean"!=typeof a.ssr||a.ssr)?s({...a,loader:()=>null!=r?r().then(i):Promise.resolve(i(()=>null))}):(delete a.webpack,delete a.modules,n(s,a))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},42424:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>N,getServerSideProps:()=>w});var r=s(20997),l=s(16689),i=s(79046),n=s(11163),d=s(41649),c=s(5152),o=s.n(c);s(25675),s(41664);var m=s(25875),u=s(55809),x=s(3785),h=s(43613),g=s(68453),p=s(25482),b=s(62691);s(86629),s(73673),s(37321);var f=s(99648),y=s(45507),v=s(86201),j=e([f,v]);[f,v]=j.then?(await j)():j,o()(()=>s.e(5554).then(s.bind(s,25554)),{loadableGenerated:{modules:["pages/admin/content/new.js -> ../../../components/Editor"]},ssr:!1});let k=[{value:"drama",label:"드라마"},{value:"movie",label:"영화"},{value:"variety",label:"예능"},{value:"documentary",label:"다큐멘터리"},{value:"animation",label:"애니메이션"},{value:"web_series",label:"웹 시리즈"},{value:"other",label:"기타"}],S=[{value:"romance",label:"Romance"},{value:"comedy",label:"Comedy"},{value:"action",label:"Action"},{value:"drama",label:"Drama"},{value:"thriller",label:"Thriller"},{value:"fantasy",label:"Fantasy"},{value:"historical",label:"Historical"},{value:"crime",label:"Crime"},{value:"mystery",label:"Mystery"},{value:"horror",label:"Horror"},{value:"sports",label:"Sports"},{value:"music",label:"Music"},{value:"family",label:"Family"},{value:"youth",label:"Youth"},{value:"medical",label:"Medical"},{value:"legal",label:"Legal"},{value:"military",label:"Military"},{value:"sci-fi",label:"Sci-Fi"},{value:"documentary",label:"Documentary"},{value:"reality",label:"Reality"}];function N(){let e=(0,n.useRouter)(),{id:t}=e.query,s=!!t,[a,d]=(0,l.useState)({title:"",originalTitle:"",description:"",summary:"",status:"ongoing",country:"KOREA",releaseDate:(0,y.default)(new Date,"yyyy-MM-dd"),runtime:"",ageRating:"",director:"",genres:[],category:"drama",coverImage:null,bannerImage:null,trailerUrl:"",cast:[],watchProviders:[],streamingLinks:{netflix:"",apple:"",disney:""},tags:[],rating:0,views:0,likesCount:0,dislikesCount:0,metaDescription:"",metaKeywords:"",videos:[],reviews:[]}),[c,o]=(0,l.useState)(s),[f,v]=(0,l.useState)(null),[j,N]=(0,l.useState)({visible:!1,message:"",type:""}),[w,C]=(0,l.useState)(!1),[$,L]=(0,l.useState)(!1),[P,R]=(0,l.useState)(!1),[q,D]=(0,l.useState)(!1),[I,z]=(0,l.useState)(""),[F,T]=(0,l.useState)(""),[M,_]=(0,l.useState)("basic"),[U,A]=(0,l.useState)({visible:!1,message:"",type:""}),[O,W]=(0,l.useState)([]),[E,H]=(0,l.useState)(!1),[V,G]=(0,l.useState)(""),[K,B]=(0,l.useState)("trailer"),[Y,X]=(0,l.useState)(""),[J,Q]=(0,l.useState)(""),[Z,ee]=(0,l.useState)(""),[et,es]=(0,l.useState)(5),[ea,er]=(0,l.useState)(""),[el,ei]=(0,l.useState)(""),[en,ed]=(0,l.useState)(""),[ec,eo]=(0,l.useState)(""),[em,eu]=(0,l.useState)(null),[ex,eh]=(0,l.useState)(""),[eg,ep]=(0,l.useState)(null),[eb,ef]=(0,l.useState)(""),[ey,ev]=(0,l.useState)({}),[ej,eN]=(0,l.useState)(null),[ew,ek]=(0,l.useState)(null),[eS,eC]=(0,l.useState)(""),[e$,eL]=(0,l.useState)(""),[eP,eR]=(0,l.useState)(""),[eq,eD]=(0,l.useState)(""),[eI,ez]=(0,l.useState)(""),[eF,eT]=(0,l.useState)(""),eM=(0,l.useRef)(null),e_=(0,l.useRef)(null);(0,l.useRef)(null);let[eU,eA]=(0,l.useState)([]),[eO,eW]=(0,l.useState)([]),[eE,eH]=(0,l.useState)({netflix:!1,apple:!1,disney:!1}),[eV,eG]=(0,l.useState)({basic:!1,videos:!1,reviews:!1}),eK=e=>{let{name:t,value:s,type:a,checked:r}=e.target;d(e=>({...e,[t]:"checkbox"===a?r:s})),ey[t]&&ev(e=>({...e,[t]:null}))},eB=e=>{if(!e)return null;let t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&11===t[2].length?t[2]:null},eY=(e,t="info")=>{A({visible:!0,message:e,type:t}),setTimeout(()=>A({visible:!1,message:"",type:""}),3e3)},eX=(e,t,s)=>{let r=[...a.cast];r[e]={...r[e],[t]:s},d({...a,cast:r})},eJ=e=>{let t=[...a.cast];t.splice(e,1),d({...a,cast:t});let s=[...eU];s.splice(e,1),eA(s);let r=[...eO];r.splice(e,1),eW(r)},eQ=e=>{if(eH(t=>({...t,[e]:!t[e]})),eE[e])d(t=>({...t,watchProviders:t.watchProviders.filter(t=>t.name.toLowerCase()!==e)}));else{let t={};switch(e){case"netflix":t={name:"Netflix",logo:"https://upload.wikimedia.org/wikipedia/commons/7/7a/Logonetflix.png",type:"subscription",price:"13,500원/월",quality:["HD","4K","HDR"],url:a.streamingLinks.netflix};break;case"apple":t={name:"Apple TV+",logo:"https://upload.wikimedia.org/wikipedia/commons/3/39/Apple_TV.svg",type:"subscription",price:"8,900원/월",quality:["HD","4K"],url:a.streamingLinks.apple};break;case"disney":t={name:"Disney+",logo:"https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney%2B_logo.svg",type:"subscription",price:"9,900원/월",quality:["HD","4K"],url:a.streamingLinks.disney}}d(e=>({...e,watchProviders:[...e.watchProviders,t]}))}},eZ=(e,t)=>{d(s=>({...s,streamingLinks:{...s.streamingLinks,[e]:t},watchProviders:s.watchProviders.map(s=>s.name.toLowerCase().includes(e)?{...s,url:t}:s)}))},e0=async r=>{r.preventDefault(),R(!0),v(null);let l={};if(a.title||(l.title="제목을 입력해주세요."),a.description||(l.description="줄거리를 입력해주세요."),a.status||(l.status="상태를 선택해주세요."),a.releaseDate||(l.releaseDate="방영일을 선택해주세요."),0===a.genres.length&&(l.genres="최소 하나의 장르를 선택해주세요."),a.category||(l.category="카테고리를 선택해주세요."),Object.keys(l).length>0){ev(l),R(!1);return}try{let r=localStorage.getItem("token")||localStorage.getItem("adminToken"),l=s?`/api/dramas/${t}`:"/api/dramas",i=await fetch(l,{method:s?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:r?`Bearer ${r}`:""},body:JSON.stringify(a)}),n=await i.json();if(!i.ok)throw Error(n.message||"콘텐츠 저장 중 오류가 발생했습니다.");eY(`콘텐츠가 성공적으로 ${s?"수정":"등록"}되었습니다.`,"success"),setTimeout(()=>e.push("/admin/content"),1500)}catch(e){eY(e.message,"error")}finally{R(!1)}},e1=e=>{d(t=>({...t,reviews:t.reviews.map((t,s)=>({...t,isFeatured:s===e}))}))};return r.jsx(i.default,{children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("button",{onClick:()=>e.back(),className:"mr-4 text-gray-600 hover:text-gray-800",children:r.jsx(m.default,{size:24})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:s?"콘텐츠 수정":"새 콘텐츠 등록"})]}),(0,r.jsxs)("button",{onClick:e0,disabled:P,className:`bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md flex items-center ${P?"opacity-70 cursor-not-allowed":""}`,children:[r.jsx(u.default,{size:18,className:"mr-1"}),s?"저장":"등록"]})]}),r.jsx("div",{className:"mb-6 bg-white rounded-lg shadow p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:`flex items-center ${eV.basic?"text-green-600":"text-gray-400"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${eV.basic?"bg-green-100":"bg-gray-100"}`,children:eV.basic?r.jsx(x.default,{size:20}):r.jsx("span",{children:"1"})}),r.jsx("span",{className:"ml-2",children:"기본 정보"})]}),r.jsx("div",{className:"h-1 w-8 bg-gray-200"}),(0,r.jsxs)("div",{className:`flex items-center ${eV.videos?"text-green-600":"text-gray-400"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${eV.videos?"bg-green-100":"bg-gray-100"}`,children:eV.videos?r.jsx(x.default,{size:20}):r.jsx("span",{children:"2"})}),r.jsx("span",{className:"ml-2",children:"비디오"})]}),r.jsx("div",{className:"h-1 w-8 bg-gray-200"}),(0,r.jsxs)("div",{className:`flex items-center ${eV.reviews?"text-green-600":"text-gray-400"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${eV.reviews?"bg-green-100":"bg-gray-100"}`,children:eV.reviews?r.jsx(x.default,{size:20}):r.jsx("span",{children:"3"})}),r.jsx("span",{className:"ml-2",children:"리뷰"})]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[Object.values(eV).filter(Boolean).length,"/3 단계 완료"]})]})}),r.jsx("div",{className:"mb-6 border-b border-gray-200 sticky top-0 bg-gray-50 z-10 shadow-sm",children:(0,r.jsxs)("nav",{className:"flex flex-nowrap overflow-x-auto px-2 py-1 hide-scrollbar",children:[(0,r.jsxs)("button",{className:`py-3 px-4 font-medium text-sm whitespace-nowrap flex items-center ${"basic"===M?"bg-white text-blue-600 border-b-2 border-blue-500 rounded-t-lg shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg"}`,onClick:()=>_("basic"),children:[r.jsx("span",{className:"mr-2",children:"기본 정보"}),eV.basic&&r.jsx(x.default,{size:16,className:"text-green-500"})]}),(0,r.jsxs)("button",{className:`py-3 px-4 font-medium text-sm whitespace-nowrap flex items-center ${"videos"===M?"bg-white text-blue-600 border-b-2 border-blue-500 rounded-t-lg shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg"}`,onClick:()=>_("videos"),children:[r.jsx("span",{className:"mr-2",children:"비디오"}),eV.videos&&r.jsx(x.default,{size:16,className:"text-green-500"})]}),(0,r.jsxs)("button",{className:`py-3 px-4 font-medium text-sm whitespace-nowrap flex items-center ${"reviews"===M?"bg-white text-blue-600 border-b-2 border-blue-500 rounded-t-lg shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg"}`,onClick:()=>_("reviews"),children:[r.jsx("span",{className:"mr-2",children:"리뷰"}),eV.reviews&&r.jsx(x.default,{size:16,className:"text-green-500"})]})]})}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:["basic"===M&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"category",children:["카테고리 ",r.jsx("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{id:"category",name:"category",value:a.category,onChange:e=>{eK(e),"drama"!==e.target.value&&d(e=>({...e,network:"",status:""}))},className:`w-full px-3 py-2 border rounded-md ${ey.category?"border-red-500":"border-gray-300"}`,required:!0,children:[r.jsx("option",{value:"",children:"카테고리를 선택하세요"}),k.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))]}),ey.category&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:ey.category})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"title",children:["제목 ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"title",name:"title",value:a.title,onChange:eK,className:`w-full px-3 py-2 border rounded-md ${ey.title?"border-red-500":"border-gray-300"}`,placeholder:"제목을 입력하세요",required:!0}),ey.title&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:ey.title})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"originalTitle",children:"원제"}),r.jsx("input",{type:"text",id:"originalTitle",name:"originalTitle",value:a.originalTitle,onChange:eK,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"원제를 입력하세요"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"description",children:["줄거리 ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{id:"description",name:"description",value:a.description,onChange:eK,className:`w-full px-3 py-2 border rounded-md ${ey.description?"border-red-500":"border-gray-300"}`,placeholder:"줄거리를 입력하세요",rows:4,required:!0}),ey.description&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:ey.description})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"releaseDate",children:["방영일 ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"date",id:"releaseDate",name:"releaseDate",value:a.releaseDate,onChange:eK,className:`w-full px-3 py-2 border rounded-md ${ey.releaseDate?"border-red-500":"border-gray-300"}`,required:!0}),ey.releaseDate&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:ey.releaseDate})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"runtime",children:["런타임 ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"runtime",name:"runtime",value:a.runtime,onChange:eK,className:`w-full px-3 py-2 border rounded-md ${ey.runtime?"border-red-500":"border-gray-300"}`,placeholder:"예: 1시간 30분",required:!0}),ey.runtime&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:ey.runtime})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"country",children:["국가 ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"country",name:"country",value:a.country,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"ageRating",children:["연령 등급 ",r.jsx("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{id:"ageRating",name:"ageRating",value:a.ageRating,onChange:eK,className:`w-full px-3 py-2 border rounded-md ${ey.ageRating?"border-red-500":"border-gray-300"}`,required:!0,children:[r.jsx("option",{value:"",children:"연령 등급을 선택하세요"}),r.jsx("option",{value:"ALL",children:"전체 관람가"}),r.jsx("option",{value:"12",children:"12세 이상"}),r.jsx("option",{value:"15",children:"15세 이상"}),r.jsx("option",{value:"18",children:"18세 이상"})]}),ey.ageRating&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:ey.ageRating})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"director",children:"감독"}),r.jsx("input",{type:"text",id:"director",name:"director",value:a.director,onChange:eK,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"감독을 입력하세요"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"출연진"}),a.cast&&a.cast.length>0&&r.jsx("div",{className:"space-y-2 mb-2",children:a.cast.map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 bg-gray-50 p-2 rounded",children:[e.profileImage?r.jsx("img",{src:e.profileImage,alt:e.name||`cast-${t}`,className:"w-12 h-12 object-cover rounded-full border border-gray-300 bg-white",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder-profile.png"}}):r.jsx("div",{className:"w-12 h-12 flex items-center justify-center rounded-full border border-gray-200 bg-gray-100 text-gray-400 text-xs",children:"No Image"}),r.jsx("input",{type:"text",placeholder:"이름",value:e.name||"",onChange:e=>eX(t,"name",e.target.value),className:"w-32 px-2 py-1 border border-gray-300 rounded"}),r.jsx("input",{type:"text",placeholder:"역할 (예: 주연, 조연, 특별출연 등)",value:e.role||"",onChange:e=>eX(t,"role",e.target.value),className:"w-40 px-2 py-1 border border-gray-300 rounded"}),r.jsx("input",{type:"text",placeholder:"프로필 이미지 URL",value:e.profileImage||"",onChange:e=>eX(t,"profileImage",e.target.value),className:"w-64 px-2 py-1 border border-gray-300 rounded"}),r.jsx("button",{type:"button",className:"text-red-500 hover:text-red-700 ml-2",onClick:()=>eJ(t),children:r.jsx(h.default,{size:18})})]},t))}),(0,r.jsxs)("button",{type:"button",className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 text-sm",onClick:()=>{d({...a,cast:[...a.cast,{name:"",role:"",profileImage:""}]}),eA([...eU,""]),eW([...eO,""])},children:[r.jsx(g.default,{size:16,className:"mr-1"})," 출연진 추가"]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:["장르 ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:S.map(e=>(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:`genre-${e.value}`,checked:a.genres.includes(e.value),onChange:()=>{d(t=>({...t,genres:t.genres.includes(e.value)?t.genres.filter(t=>t!==e.value):[...t.genres,e.value]}))},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:`genre-${e.value}`,className:"ml-2 text-sm text-gray-700",children:e.label})]},e.value))}),ey.genres&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:ey.genres})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Where to Watch"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"netflix",checked:eE.netflix,onChange:()=>eQ("netflix"),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"netflix",className:"ml-2 text-sm text-gray-700",children:"Netflix"})]}),eE.netflix&&r.jsx("input",{type:"text",value:a.streamingLinks.netflix,onChange:e=>eZ("netflix",e.target.value),placeholder:"https://www.netflix.com/title/...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"apple",checked:eE.apple,onChange:()=>eQ("apple"),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"apple",className:"ml-2 text-sm text-gray-700",children:"Apple TV+"})]}),eE.apple&&r.jsx("input",{type:"text",value:a.streamingLinks.apple,onChange:e=>eZ("apple",e.target.value),placeholder:"https://tv.apple.com/show/...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"disney",checked:eE.disney,onChange:()=>eQ("disney"),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"disney",className:"ml-2 text-sm text-gray-700",children:"Disney+"})]}),eE.disney&&r.jsx("input",{type:"text",value:a.streamingLinks.disney,onChange:e=>eZ("disney",e.target.value),placeholder:"https://www.disneyplus.com/series/...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"썸네일 이미지"}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[r.jsx("div",{className:"w-24 h-32 bg-gray-100 border border-gray-300 rounded flex items-center justify-center overflow-hidden",children:ej||a.coverImage?r.jsx("img",{src:ej||a.coverImage,alt:"썸네일 미리보기",className:"object-cover w-full h-full",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder-tvfilm.svg"}}):r.jsx("span",{className:"text-gray-400 text-xs",children:"No Image"})}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];if(t){if(t.type.startsWith("image/")){let e=new FileReader;e.onload=e=>{eN(e.target.result),d({...a,coverImage:e.target.result}),eR("")},e.readAsDataURL(t)}else eR("이미지 파일만 업로드 가능합니다.")}},ref:eM,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),r.jsx("input",{type:"text",placeholder:"이미지 URL 입력",value:eS,onChange:e=>{let t=e.target.value;if(eC(t),ez(""),t)try{new URL(t),eN(t),d({...a,coverImage:t})}catch(e){ez("유효한 이미지 URL을 입력해주세요."),eN(null)}else eN(null)},className:"w-full px-2 py-1 border border-gray-300 rounded"}),eP&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:eP}),eI&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:eI})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"배경 이미지"}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[r.jsx("div",{className:"w-40 h-24 bg-gray-100 border border-gray-300 rounded flex items-center justify-center overflow-hidden",children:ew||a.bannerImage?r.jsx("img",{src:ew||a.bannerImage,alt:"배경 미리보기",className:"object-cover w-full h-full",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder-tvfilm.svg"}}):r.jsx("span",{className:"text-gray-400 text-xs",children:"No Image"})}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];if(t){if(t.type.startsWith("image/")){let e=new FileReader;e.onload=e=>{ek(e.target.result),d({...a,bannerImage:e.target.result}),eD("")},e.readAsDataURL(t)}else eD("이미지 파일만 업로드 가능합니다.")}},ref:e_,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),r.jsx("input",{type:"text",placeholder:"이미지 URL 입력",value:e$,onChange:e=>{let t=e.target.value;if(eL(t),eT(""),t)try{new URL(t),ek(t),d({...a,bannerImage:t})}catch(e){eT("유효한 이미지 URL을 입력해주세요."),ek(null)}else ek(null)},className:"w-full px-2 py-1 border border-gray-300 rounded"}),eq&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:eq}),eF&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:eF})]})]})]})]}),"videos"===M&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"비디오 정보"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"트레일러, 티저, 하이라이트 등 다양한 종류의 비디오를 추가할 수 있습니다."})]}),r.jsx("div",{className:"border border-gray-200 rounded-lg p-5 bg-white mb-6",children:(0,r.jsxs)("div",{className:"space-y-5",children:[a.videos&&a.videos.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.videos.map((e,t)=>{let s=eB(e.url);return(0,r.jsxs)("div",{className:"relative group border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-all",children:[r.jsx("div",{className:"aspect-video bg-gray-100",children:s?r.jsx("img",{src:`https://img.youtube.com/vi/${s}/mqdefault.jpg`,alt:e.title,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:r.jsx(p.default,{className:"w-12 h-12 text-gray-400"})})}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:e.title}),r.jsx("button",{onClick:()=>{let e=[...a.videos];e.splice(t,1),d(t=>({...t,videos:e}))},className:"text-gray-400 hover:text-red-500 transition-colors",children:r.jsx(h.default,{size:20})})]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"trailer"===e.type?"트레일러":"teaser"===e.type?"티저":"highlight"===e.type?"하이라이트":"interview"===e.type?"인터뷰":"기타"})]})]},t)})}):(0,r.jsxs)("div",{className:"text-center py-10",children:[r.jsx(p.default,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"추가된 비디오가 없습니다."})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-5",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"비디오 제목"}),r.jsx("input",{type:"text",value:V,onChange:e=>G(e.target.value),placeholder:"비디오 제목을 입력하세요",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"비디오 유형"}),(0,r.jsxs)("select",{value:K,onChange:e=>B(e.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"trailer",children:"트레일러"}),r.jsx("option",{value:"teaser",children:"티저"}),r.jsx("option",{value:"highlight",children:"하이라이트"}),r.jsx("option",{value:"interview",children:"인터뷰"}),r.jsx("option",{value:"other",children:"기타"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"YouTube URL"}),r.jsx("input",{type:"text",value:Y,onChange:e=>X(e.target.value),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),r.jsx("div",{className:"mt-4 flex justify-end",children:(0,r.jsxs)("button",{onClick:()=>{if(V.trim()&&Y.trim()){if(!/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.?be)\/.+$/.test(Y)){j.error("유효한 YouTube URL을 입력해주세요.");return}d(e=>({...e,videos:[...e.videos||[],{title:V.trim(),type:K,url:Y.trim()}]})),G(""),X("")}else V.trim()?Y.trim()||j.error("YouTube URL을 입력해주세요."):j.error("비디오 제목을 입력해주세요.")},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center",children:[r.jsx(g.default,{className:"w-4 h-4 mr-1"}),"비디오 추가"]})})]})]})})]}),"reviews"===M&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"리뷰 정보"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"리뷰는 콘텐츠에 대한 사용자의 개인적인 의견을 나타내는 섹션입니다."})]}),r.jsx("div",{className:"border border-gray-200 rounded-lg p-5 bg-white mb-6",children:(0,r.jsxs)("div",{className:"space-y-5",children:[a.reviews&&a.reviews.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.reviews.map((e,t)=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-300 hover:border-pink-200 group relative",children:[r.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-pink-100 to-transparent rounded-tr-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2 relative",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-br from-pink-400 to-rose-500 flex items-center justify-center text-white font-bold text-sm shadow-sm group-hover:shadow-md transition-all duration-300",children:e.rating}),(0,r.jsxs)("div",{className:"ml-2",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-800 group-hover:text-pink-600 transition-colors duration-300",children:e.authorName}),r.jsx("div",{className:"flex mt-0.5",children:[1,2,3,4,5].map(t=>r.jsx(b.default,{className:`w-3 h-3 ${t<=Math.floor(e.rating/2)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},t))})]})]}),r.jsx("button",{onClick:()=>{let e=[...a.reviews];e.splice(t,1),d(t=>({...t,reviews:e}))},className:"text-gray-400 hover:text-red-500 transition-colors",children:r.jsx(h.default,{size:20})})]}),r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:e.title}),r.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap mb-3",children:e.content}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags&&e.tags.length>0?e.tags.map((e,t)=>r.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full group-hover:bg-pink-50 group-hover:text-pink-600 transition-colors duration-300",children:e},t)):r.jsx("span",{className:"text-xs px-2 py-0.5 bg-pink-50 text-pink-600 rounded-full",children:"Review"})}),r.jsx("button",{onClick:()=>e1(t),className:`px-3 py-1 rounded-md text-sm ${e.isFeatured?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:e.isFeatured?"대표 리뷰로 설정됨":"대표 리뷰로 설정"})]})]},t))}):(0,r.jsxs)("div",{className:"text-center py-10",children:[r.jsx(b.default,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"추가된 리뷰가 없습니다."})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-5",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"리뷰 제목"}),r.jsx("input",{type:"text",value:J,onChange:e=>Q(e.target.value),placeholder:"리뷰 제목을 입력하세요",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"작성자"}),r.jsx("input",{type:"text",value:Z,onChange:e=>ee(e.target.value),placeholder:"작성자 이름을 입력하세요",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"평점 (1-10)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("input",{type:"range",min:"1",max:"10",value:et,onChange:e=>es(parseInt(e.target.value)),className:"flex-1"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 w-8 text-center",children:et})]}),r.jsx("div",{className:"flex mt-1",children:[...Array(10)].map((e,t)=>r.jsx("span",{className:`text-xl ${t<et?"text-yellow-400":"text-gray-300"}`,children:"★"},t))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"리뷰 내용"}),r.jsx("textarea",{value:ea,onChange:e=>er(e.target.value),placeholder:"리뷰 내용을 입력하세요",rows:4,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"태그 (쉼표로 구분)"}),r.jsx("input",{type:"text",value:el,onChange:e=>ei(e.target.value),placeholder:"예: 연기, 스토리, OST",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),r.jsx("div",{className:"mt-4 flex justify-end",children:(0,r.jsxs)("button",{onClick:()=>{J.trim()&&Z.trim()&&ea.trim()?(d(e=>({...e,reviews:[...e.reviews||[],{title:J.trim(),authorName:Z.trim(),rating:et,content:ea.trim(),tags:el.split(",").map(e=>e.trim()).filter(Boolean),isFeatured:0===e.reviews.length,approved:!0}]})),Q(""),ee(""),es(5),er(""),ei("")):J.trim()?Z.trim()?ea.trim()||j.error("리뷰 내용을 입력해주세요."):j.error("작성자 이름을 입력해주세요."):j.error("리뷰 제목을 입력해주세요.")},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center",children:[r.jsx(g.default,{className:"w-4 h-4 mr-1"}),"리뷰 추가"]})})]})]})})]})]})]})})}async function w(e){let t=await (0,d.getSession)(e);return t&&t.user&&["admin","editor"].includes(t.user.role)?{props:{session:t}}:{redirect:{destination:"/login?from="+encodeURIComponent(e.resolvedUrl),permanent:!1}}}a()}catch(e){a(e)}})},74830:(e,t,s)=>{"use strict";e.exports=s(87093).vendored.contexts.Loadable},5152:(e,t,s)=>{e.exports=s(28864)},41649:e=>{"use strict";e.exports=require("next-auth/react")},62785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},40968:e=>{"use strict";e.exports=require("next/head")},16689:e=>{"use strict";e.exports=require("react")},66405:e=>{"use strict";e.exports=require("react-dom")},12586:e=>{"use strict";e.exports=require("react-quill")},20997:e=>{"use strict";e.exports=require("react/jsx-runtime")},73673:e=>{"use strict";e.exports=require("slugify")},99816:e=>{"use strict";e.exports=require("styled-jsx/style")},92048:e=>{"use strict";e.exports=require("fs")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},71568:e=>{"use strict";e.exports=require("zlib")},99648:e=>{"use strict";e.exports=import("axios")},86201:e=>{"use strict";e.exports=import("react-hot-toast")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[3393,1859,6859,8559,6870,1877,449,8505],()=>s(48836));module.exports=a})();